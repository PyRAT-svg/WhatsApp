.class public LX/3ZK;
.super Ljava/lang/Object;
.source ""

# interfaces
.implements LX/3Cf;
.implements LX/3Cn;


# static fields
.field public static A2D:Z

.field public static final A2E:Ljava/lang/Object;

.field public static final A2F:Ljava/util/concurrent/ThreadPoolExecutor;

.field public static final A2G:Ljava/util/concurrent/atomic/AtomicInteger;


# instance fields
.field public A00:D

.field public A01:D

.field public A02:D

.field public A03:I

.field public A04:I

.field public A05:I

.field public A06:I

.field public A07:I

.field public A08:I

.field public A09:I

.field public A0A:J

.field public A0B:J

.field public A0C:J

.field public A0D:J

.field public A0E:J

.field public A0F:Landroid/content/BroadcastReceiver;

.field public A0G:Landroid/content/BroadcastReceiver;

.field public A0H:Landroid/media/Ringtone;

.field public A0I:Landroid/media/SoundPool;

.field public A0J:Landroid/net/Uri;

.field public A0K:Landroid/os/Handler;

.field public A0L:Landroid/os/Handler;

.field public A0M:Landroid/os/Handler;

.field public A0N:Landroid/os/Handler;

.field public A0O:Landroid/os/PowerManager$WakeLock;

.field public A0P:Landroid/os/PowerManager$WakeLock;

.field public A0Q:Landroid/telephony/PhoneStateListener;

.field public A0R:Landroid/telephony/TelephonyManager;

.field public A0S:LX/1Z2;

.field public A0T:Lcom/whatsapp/fieldstats/events/WamCall;

.field public A0U:LX/38v;

.field public A0V:LX/38w;

.field public A0W:LX/3CD;

.field public A0X:LX/0mR;

.field public A0Y:LX/3CH;

.field public A0Z:LX/3CL;

.field public A0a:LX/0WA;

.field public A0b:Ljava/lang/Integer;

.field public A0c:Ljava/lang/Integer;

.field public A0d:Ljava/lang/Integer;

.field public A0e:Ljava/lang/Integer;

.field public A0f:Ljava/lang/Integer;

.field public A0g:Ljava/lang/Integer;

.field public A0h:Ljava/lang/Integer;

.field public A0i:Ljava/lang/Integer;

.field public A0j:Ljava/lang/Long;

.field public A0k:Ljava/lang/Long;

.field public A0l:Ljava/lang/Long;

.field public A0m:Ljava/lang/Long;

.field public A0n:Ljava/lang/Object;

.field public A0o:Ljava/lang/Object;

.field public A0p:Ljava/lang/Object;

.field public A0q:Ljava/lang/String;

.field public A0r:Ljava/lang/String;

.field public A0s:Ljava/util/concurrent/ScheduledExecutorService;

.field public A0t:S

.field public A0u:Z

.field public A0v:Z

.field public A0w:Z

.field public A0x:Z

.field public A0y:Z

.field public A0z:Z

.field public A10:Z

.field public A11:Z

.field public A12:Z

.field public A13:Z

.field public A14:Z

.field public A15:Z

.field public A16:Z

.field public A17:Z

.field public A18:Z

.field public A19:Z

.field public A1A:Z

.field public A1B:Z

.field public A1C:[J

.field public A1D:[J

.field public A1E:[J

.field public final A1F:Landroid/content/Context;

.field public final A1G:LX/0DK;

.field public final A1H:LX/0J7;

.field public final A1I:LX/1XX;

.field public final A1J:LX/0Cl;

.field public final A1K:LX/009;

.field public final A1L:LX/0Hi;

.field public final A1M:LX/09y;

.field public final A1N:LX/0IL;

.field public final A1O:LX/04f;

.field public final A1P:LX/01A;

.field public final A1Q:LX/0IR;

.field public final A1R:LX/0Kv;

.field public final A1S:LX/0Kn;

.field public final A1T:LX/00e;

.field public final A1U:LX/0Da;

.field public final A1V:LX/0Hk;

.field public final A1W:LX/0BJ;

.field public final A1X:LX/04z;

.field public final A1Y:LX/03a;

.field public final A1Z:LX/011;

.field public final A1a:LX/00T;

.field public final A1b:LX/02S;

.field public final A1c:LX/00E;

.field public final A1d:LX/01Q;

.field public final A1e:LX/0Af;

.field public final A1f:LX/08J;

.field public final A1g:LX/07h;

.field public final A1h:LX/04y;

.field public final A1i:LX/0B8;

.field public final A1j:LX/0AU;

.field public final A1k:LX/0Ex;

.field public final A1l:LX/0CB;

.field public final A1m:LX/07b;

.field public final A1n:LX/0Cy;

.field public final A1o:LX/0Hx;

.field public final A1p:LX/00W;

.field public final A1q:Lcom/whatsapp/util/WhatsAppLibLoader;

.field public final A1r:LX/3Br;

.field public final A1s:LX/3Bv;

.field public final A1t:LX/3C4;

.field public final A1u:Lcom/whatsapp/voipcalling/JNIUtils;

.field public final A1v:LX/3ZC;

.field public final A1w:Lcom/whatsapp/voipcalling/VoiceService$VoiceServiceEventCallback;

.field public final A1x:LX/0dr;

.field public final A1y:LX/3Co;

.field public final A1z:LX/0Ho;

.field public final A20:LX/0Zd;

.field public final A21:Lcom/whatsapp/voipcalling/camera/VoipCameraManager;

.field public final A22:Ljava/util/List;

.field public final A23:Ljava/util/Map;

.field public final A24:Ljava/util/Map;

.field public final A25:Ljava/util/Map;

.field public final A26:Ljava/util/Map;

.field public final A27:Ljava/util/Set;

.field public final A28:Ljava/util/Set;

.field public volatile A29:LX/3Bx;

.field public volatile A2A:LX/3Ce;

.field public volatile A2B:Ljava/lang/Integer;

.field public volatile A2C:Z


# direct methods
.method public static constructor <clinit>()V
    .locals 7

    .line 378525
    sget-object v0, LX/3B8;->A00:LX/3B8;

    sput-object v0, LX/3ZK;->A2E:Ljava/lang/Object;

    .line 378526
    new-instance v0, Ljava/util/concurrent/atomic/AtomicInteger;

    invoke-direct {v0}, Ljava/util/concurrent/atomic/AtomicInteger;-><init>()V

    sput-object v0, LX/3ZK;->A2G:Ljava/util/concurrent/atomic/AtomicInteger;

    .line 378527
    new-instance v0, Ljava/util/concurrent/ThreadPoolExecutor;

    sget-object v5, Ljava/util/concurrent/TimeUnit;->SECONDS:Ljava/util/concurrent/TimeUnit;

    new-instance v6, Ljava/util/concurrent/LinkedBlockingQueue;

    invoke-direct {v6}, Ljava/util/concurrent/LinkedBlockingQueue;-><init>()V

    const/4 v1, 0x0

    const/4 v2, 0x1

    const-wide/16 v3, 0xa

    invoke-direct/range {v0 .. v6}, Ljava/util/concurrent/ThreadPoolExecutor;-><init>(IIJLjava/util/concurrent/TimeUnit;Ljava/util/concurrent/BlockingQueue;)V

    sput-object v0, LX/3ZK;->A2F:Ljava/util/concurrent/ThreadPoolExecutor;

    return-void
.end method

.method public constructor <init>(Landroid/content/Context;LX/0dr;)V
    .locals 18

    .line 378528
    move-object/from16 v0, p0

    invoke-direct {v0}, Ljava/lang/Object;-><init>()V

    .line 378529
    new-instance v1, LX/3Br;

    invoke-direct {v1}, LX/3Br;-><init>()V

    iput-object v1, v0, LX/3ZK;->A1r:LX/3Br;

    .line 378530
    new-instance v1, Lcom/whatsapp/voipcalling/VoiceService$VoiceServiceEventCallback;

    invoke-direct {v1, v0}, Lcom/whatsapp/voipcalling/VoiceService$VoiceServiceEventCallback;-><init>(LX/3ZK;)V

    iput-object v1, v0, LX/3ZK;->A1w:Lcom/whatsapp/voipcalling/VoiceService$VoiceServiceEventCallback;

    .line 378531
    new-instance v1, Ljava/util/ArrayList;

    invoke-direct {v1}, Ljava/util/ArrayList;-><init>()V

    iput-object v1, v0, LX/3ZK;->A22:Ljava/util/List;

    const-wide/high16 v1, 0x7ff8000000000000L    # NaN

    .line 378532
    iput-wide v1, v0, LX/3ZK;->A01:D

    .line 378533
    iput-wide v1, v0, LX/3ZK;->A00:D

    .line 378534
    new-instance v3, Ljava/util/HashMap;

    invoke-direct {v3}, Ljava/util/HashMap;-><init>()V

    iput-object v3, v0, LX/3ZK;->A23:Ljava/util/Map;

    const/16 v3, 0x5dc

    .line 378535
    invoke-static {v3}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v3

    iput-object v3, v0, LX/3ZK;->A0f:Ljava/lang/Integer;

    const/4 v3, 0x0

    .line 378536
    iput-boolean v3, v0, LX/3ZK;->A15:Z

    const/16 v4, 0x1e

    .line 378537
    iput v4, v0, LX/3ZK;->A05:I

    .line 378538
    new-instance v4, Ljava/util/HashMap;

    invoke-direct {v4}, Ljava/util/HashMap;-><init>()V

    iput-object v4, v0, LX/3ZK;->A24:Ljava/util/Map;

    .line 378539
    iput-boolean v3, v0, LX/3ZK;->A0z:Z

    const/4 v4, 0x1

    .line 378540
    iput-boolean v4, v0, LX/3ZK;->A1A:Z

    .line 378541
    new-instance v4, Ljava/util/concurrent/ConcurrentHashMap;

    invoke-direct {v4}, Ljava/util/concurrent/ConcurrentHashMap;-><init>()V

    iput-object v4, v0, LX/3ZK;->A25:Ljava/util/Map;

    .line 378542
    new-instance v4, Ljava/util/concurrent/ConcurrentHashMap;

    invoke-direct {v4}, Ljava/util/concurrent/ConcurrentHashMap;-><init>()V

    iput-object v4, v0, LX/3ZK;->A26:Ljava/util/Map;

    .line 378543
    new-instance v4, Ljava/util/HashSet;

    invoke-direct {v4}, Ljava/util/HashSet;-><init>()V

    iput-object v4, v0, LX/3ZK;->A27:Ljava/util/Set;

    .line 378544
    new-instance v4, Ljava/util/HashSet;

    invoke-direct {v4}, Ljava/util/HashSet;-><init>()V

    invoke-static {v4}, Ljava/util/Collections;->synchronizedSet(Ljava/util/Set;)Ljava/util/Set;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A28:Ljava/util/Set;

    .line 378545
    invoke-static {}, LX/00T;->A00()LX/00T;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1a:LX/00T;

    .line 378546
    invoke-static {}, LX/04f;->A00()LX/04f;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1O:LX/04f;

    .line 378547
    invoke-static {}, Lcom/whatsapp/voipcalling/JNIUtils;->getInstance()Lcom/whatsapp/voipcalling/JNIUtils;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1u:Lcom/whatsapp/voipcalling/JNIUtils;

    .line 378548
    sget-object v4, LX/009;->A00:LX/009;

    invoke-static {v4}, LX/00A;->A05(Ljava/lang/Object;)V

    .line 378549
    iput-object v4, v0, LX/3ZK;->A1K:LX/009;

    .line 378550
    invoke-static {}, LX/01A;->A00()LX/01A;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1P:LX/01A;

    .line 378551
    invoke-static {}, LX/0Hk;->A00()LX/0Hk;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1V:LX/0Hk;

    .line 378552
    invoke-static {}, LX/00V;->A00()LX/00W;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1p:LX/00W;

    .line 378553
    invoke-static {}, LX/09y;->A00()LX/09y;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1M:LX/09y;

    .line 378554
    invoke-static {}, LX/0Da;->A00()LX/0Da;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1U:LX/0Da;

    .line 378555
    invoke-static {}, LX/0CB;->A00()LX/0CB;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1l:LX/0CB;

    .line 378556
    invoke-static {}, LX/00e;->A0E()LX/00e;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1T:LX/00e;

    .line 378557
    invoke-static {}, LX/0B8;->A00()LX/0B8;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1i:LX/0B8;

    .line 378558
    sget-object v4, LX/0J7;->A00:LX/0J7;

    .line 378559
    iput-object v4, v0, LX/3ZK;->A1H:LX/0J7;

    .line 378560
    invoke-static {}, LX/0Hi;->A00()LX/0Hi;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1L:LX/0Hi;

    .line 378561
    invoke-static {}, LX/0Ho;->A00()LX/0Ho;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1z:LX/0Ho;

    .line 378562
    invoke-static {}, LX/04y;->A00()LX/04y;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1h:LX/04y;

    .line 378563
    invoke-static {}, LX/011;->A00()LX/011;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1Z:LX/011;

    .line 378564
    sget-object v4, LX/08J;->A01:LX/08J;

    .line 378565
    iput-object v4, v0, LX/3ZK;->A1f:LX/08J;

    .line 378566
    invoke-static {}, LX/04z;->A00()LX/04z;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1X:LX/04z;

    .line 378567
    invoke-static {}, LX/07b;->A00()LX/07b;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1m:LX/07b;

    .line 378568
    invoke-static {}, LX/01Q;->A00()LX/01Q;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1d:LX/01Q;

    .line 378569
    sget-object v4, LX/1XX;->A02:LX/1XX;

    if-nez v4, :cond_1

    .line 378570
    const-class v7, LX/1XX;

    monitor-enter v7

    .line 378571
    :try_start_0
    sget-object v4, LX/1XX;->A02:LX/1XX;

    if-nez v4, :cond_0

    .line 378572
    new-instance v6, LX/1XX;

    .line 378573
    invoke-static {}, LX/0BG;->A01()LX/0BG;

    move-result-object v5

    invoke-static {}, LX/0Af;->A00()LX/0Af;

    move-result-object v4

    invoke-direct {v6, v5, v4}, LX/1XX;-><init>(LX/0BG;LX/0Af;)V

    sput-object v6, LX/1XX;->A02:LX/1XX;

    .line 378574
    :cond_0
    monitor-exit v7

    goto :goto_0

    :catchall_0
    move-exception v0

    monitor-exit v7
    :try_end_0
    .catchall {:try_start_0 .. :try_end_0} :catchall_0

    throw v0

    .line 378575
    :cond_1
    :goto_0
    sget-object v4, LX/1XX;->A02:LX/1XX;

    .line 378576
    iput-object v4, v0, LX/3ZK;->A1I:LX/1XX;

    .line 378577
    sget-object v4, LX/0IL;->A03:LX/0IL;

    .line 378578
    iput-object v4, v0, LX/3ZK;->A1N:LX/0IL;

    .line 378579
    invoke-static {}, LX/0IR;->A00()LX/0IR;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1Q:LX/0IR;

    .line 378580
    sget-object v4, LX/0BJ;->A07:LX/0BJ;

    .line 378581
    iput-object v4, v0, LX/3ZK;->A1W:LX/0BJ;

    .line 378582
    invoke-static {}, LX/0Ex;->A00()LX/0Ex;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1k:LX/0Ex;

    .line 378583
    invoke-static {}, LX/0Cy;->A01()LX/0Cy;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1n:LX/0Cy;

    .line 378584
    invoke-static {}, LX/0Af;->A00()LX/0Af;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1e:LX/0Af;

    .line 378585
    invoke-static {}, LX/0AU;->A00()LX/0AU;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1j:LX/0AU;

    .line 378586
    invoke-static {}, LX/07h;->A00()LX/07h;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1g:LX/07h;

    .line 378587
    invoke-static {}, LX/0Cl;->A00()LX/0Cl;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1J:LX/0Cl;

    .line 378588
    invoke-static {}, Lcom/whatsapp/voipcalling/camera/VoipCameraManager;->getInstance()Lcom/whatsapp/voipcalling/camera/VoipCameraManager;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A21:Lcom/whatsapp/voipcalling/camera/VoipCameraManager;

    .line 378589
    invoke-static {}, Lcom/whatsapp/util/WhatsAppLibLoader;->A00()Lcom/whatsapp/util/WhatsAppLibLoader;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1q:Lcom/whatsapp/util/WhatsAppLibLoader;

    .line 378590
    invoke-static {}, LX/03a;->A00()LX/03a;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1Y:LX/03a;

    .line 378591
    invoke-static {}, LX/00E;->A00()LX/00E;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1c:LX/00E;

    .line 378592
    invoke-static {}, LX/0Hx;->A00()LX/0Hx;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1o:LX/0Hx;

    .line 378593
    invoke-static {}, LX/0Zd;->A00()LX/0Zd;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A20:LX/0Zd;

    .line 378594
    invoke-static {}, LX/02S;->A00()LX/02S;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1b:LX/02S;

    .line 378595
    sget-object v4, LX/3Bv;->A0B:LX/3Bv;

    if-nez v4, :cond_3

    .line 378596
    const-class v5, LX/3Bv;

    monitor-enter v5

    .line 378597
    :try_start_1
    sget-object v4, LX/3Bv;->A0B:LX/3Bv;

    if-nez v4, :cond_2

    .line 378598
    new-instance v6, LX/3Bv;

    .line 378599
    invoke-static {}, LX/00V;->A00()LX/00W;

    move-result-object v7

    .line 378600
    invoke-static {}, LX/0Jo;->A01()LX/0Jo;

    move-result-object v8

    .line 378601
    invoke-static {}, LX/0Jp;->A02()LX/0Jp;

    move-result-object v9

    .line 378602
    invoke-static {}, LX/04y;->A00()LX/04y;

    move-result-object v10

    .line 378603
    invoke-static {}, LX/011;->A00()LX/011;

    move-result-object v11

    .line 378604
    invoke-static {}, LX/04z;->A00()LX/04z;

    move-result-object v12

    .line 378605
    invoke-static {}, LX/01Q;->A00()LX/01Q;

    move-result-object v13

    .line 378606
    invoke-static {}, LX/0Cl;->A00()LX/0Cl;

    move-result-object v14

    .line 378607
    invoke-static {}, LX/0Ez;->A00()LX/0Ez;

    move-result-object v15

    .line 378608
    invoke-static {}, LX/02S;->A00()LX/02S;

    move-result-object v16

    .line 378609
    invoke-static {}, LX/0DK;->A00()LX/0DK;

    move-result-object v17

    invoke-direct/range {v6 .. v17}, LX/3Bv;-><init>(LX/00W;LX/0Jo;LX/0Jp;LX/04y;LX/011;LX/04z;LX/01Q;LX/0Cl;LX/0Ez;LX/02S;LX/0DK;)V

    sput-object v6, LX/3Bv;->A0B:LX/3Bv;

    .line 378610
    :cond_2
    monitor-exit v5

    goto :goto_1

    :catchall_1
    move-exception v0

    monitor-exit v5
    :try_end_1
    .catchall {:try_start_1 .. :try_end_1} :catchall_1

    throw v0

    .line 378611
    :cond_3
    :goto_1
    sget-object v4, LX/3Bv;->A0B:LX/3Bv;

    .line 378612
    iput-object v4, v0, LX/3ZK;->A1s:LX/3Bv;

    .line 378613
    invoke-static {}, LX/0Kn;->A00()LX/0Kn;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1S:LX/0Kn;

    .line 378614
    invoke-static {}, LX/0DK;->A00()LX/0DK;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A1G:LX/0DK;

    .line 378615
    sget v5, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v4, 0x1c

    if-lt v5, v4, :cond_4

    .line 378616
    invoke-static {}, LX/3ZC;->A02()LX/3ZC;

    move-result-object v4

    :goto_2
    iput-object v4, v0, LX/3ZK;->A1v:LX/3ZC;

    .line 378617
    iget-object v4, v0, LX/3ZK;->A1Z:LX/011;

    invoke-virtual {v4}, LX/011;->A0E()Landroid/telephony/TelephonyManager;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A0R:Landroid/telephony/TelephonyManager;

    .line 378618
    iput v3, v0, LX/3ZK;->A06:I

    const/4 v3, -0x1

    .line 378619
    iput v3, v0, LX/3ZK;->A07:I

    .line 378620
    iput v3, v0, LX/3ZK;->A08:I

    .line 378621
    iput-wide v1, v0, LX/3ZK;->A02:D

    const-wide/16 v1, -0x1

    .line 378622
    iput-wide v1, v0, LX/3ZK;->A0C:J

    .line 378623
    new-instance v1, LX/3ZH;

    invoke-direct {v1, v0}, LX/3ZH;-><init>(LX/3ZK;)V

    iput-object v1, v0, LX/3ZK;->A1R:LX/0Kv;

    .line 378624
    new-instance v1, LX/3Yi;

    invoke-direct {v1, v0}, LX/3Yi;-><init>(LX/3ZK;)V

    iput-object v1, v0, LX/3ZK;->A0W:LX/3CD;

    .line 378625
    move-object/from16 v4, p1

    iput-object v4, v0, LX/3ZK;->A1F:Landroid/content/Context;

    .line 378626
    move-object/from16 v1, p2

    iput-object v1, v0, LX/3ZK;->A1x:LX/0dr;

    .line 378627
    new-instance v5, LX/3C4;

    .line 378628
    invoke-static {}, LX/00Z;->A00()LX/00Z;

    move-result-object v6

    iget-object v7, v0, LX/3ZK;->A1f:LX/08J;

    .line 378629
    invoke-static {}, LX/0Hs;->A00()LX/0Hs;

    move-result-object v8

    iget-object v9, v0, LX/3ZK;->A1e:LX/0Af;

    .line 378630
    invoke-static {}, LX/0IM;->A00()LX/0IM;

    move-result-object v10

    .line 378631
    sget-object v11, LX/0O9;->A00:LX/0O9;

    .line 378632
    new-instance v12, LX/3Yp;

    invoke-direct {v12, v0}, LX/3Yp;-><init>(LX/3ZK;)V

    invoke-direct/range {v5 .. v12}, LX/3C4;-><init>(LX/00Z;LX/08J;LX/0Hs;LX/0Af;LX/0IM;LX/0O9;LX/3C2;)V

    iput-object v5, v0, LX/3ZK;->A1t:LX/3C4;

    .line 378633
    new-instance v3, LX/3Co;

    iget-object v2, v0, LX/3ZK;->A1Z:LX/011;

    iget-object v1, v0, LX/3ZK;->A1v:LX/3ZC;

    invoke-direct {v3, v0, v4, v2, v1}, LX/3Co;-><init>(LX/3Cn;Landroid/content/Context;LX/011;LX/3ZC;)V

    iput-object v3, v0, LX/3ZK;->A1y:LX/3Co;

    return-void

    .line 378634
    :cond_4
    const/4 v4, 0x0

    goto :goto_2
.end method

.method public static final A00(Lcom/whatsapp/jid/Jid;)Ljava/lang/String;
    .locals 2

    .line 378635
    instance-of v0, p0, Lcom/whatsapp/jid/DeviceJid;

    if-eqz v0, :cond_2

    .line 378636
    check-cast p0, Lcom/whatsapp/jid/DeviceJid;

    .line 378637
    iget-byte v1, p0, Lcom/whatsapp/jid/DeviceJid;->device:B

    const/4 v0, 0x0

    if-nez v1, :cond_0

    const/4 v0, 0x1

    .line 378638
    :cond_0
    if-eqz v0, :cond_1

    .line 378639
    iget-object v0, p0, Lcom/whatsapp/jid/DeviceJid;->userJid:Lcom/whatsapp/jid/UserJid;

    .line 378640
    invoke-virtual {v0}, Lcom/whatsapp/jid/Jid;->getRawString()Ljava/lang/String;

    move-result-object v0

    .line 378641
    return-object v0

    :cond_1
    invoke-virtual {p0}, Lcom/whatsapp/jid/Jid;->getRawString()Ljava/lang/String;

    move-result-object v0

    return-object v0

    .line 378642
    :cond_2
    invoke-virtual {p0}, Lcom/whatsapp/jid/Jid;->getRawString()Ljava/lang/String;

    move-result-object v0

    return-object v0
.end method

.method public static A01(LX/3Ce;Ljava/lang/String;)V
    .locals 4

    .line 378643
    new-instance v3, Landroid/os/Bundle;

    invoke-direct {v3}, Landroid/os/Bundle;-><init>()V

    const-string v0, "end_call_reason"

    .line 378644
    invoke-virtual {v3, v0, p0}, Landroid/os/Bundle;->putSerializable(Ljava/lang/String;Ljava/io/Serializable;)V

    if-eqz p1, :cond_0

    const-string v0, "end_call_string"

    .line 378645
    invoke-virtual {v3, v0, p1}, Landroid/os/Bundle;->putString(Ljava/lang/String;Ljava/lang/String;)V

    .line 378646
    :cond_0
    new-instance v2, LX/0dq;

    const/4 v1, 0x0

    const-string v0, "hangup_call"

    .line 378647
    invoke-direct {v2, v0, v3, v1}, LX/0dq;-><init>(Ljava/lang/String;Landroid/os/Bundle;Landroid/os/Message;)V

    .line 378648
    invoke-static {v2}, LX/0dr;->A01(LX/0dq;)V

    return-void
.end method

.method public static A02(LX/0Zd;Ljava/lang/String;)V
    .locals 0

    iget-object p0, p0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {p0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object p0

    invoke-interface {p0, p1}, Landroid/content/SharedPreferences$Editor;->remove(Ljava/lang/String;)Landroid/content/SharedPreferences$Editor;

    invoke-interface {p0}, Landroid/content/SharedPreferences$Editor;->apply()V

    return-void
.end method


# virtual methods
.method public A03(Ljava/lang/String;)LX/3CJ;
    .locals 1

    if-eqz p1, :cond_0

    .line 378649
    iget-object v0, p0, LX/3ZK;->A1v:LX/3ZC;

    if-eqz v0, :cond_0

    .line 378650
    iget-object v0, v0, LX/3ZC;->A05:Ljava/util/concurrent/ConcurrentMap;

    invoke-interface {v0, p1}, Ljava/util/concurrent/ConcurrentMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, LX/3CJ;

    return-object v0

    :cond_0
    const/4 v0, 0x0

    return-object v0
.end method

.method public final A04(Ljava/util/Map;)Ljava/util/Map;
    .locals 12

    .line 378651
    iget-object v3, p0, LX/3ZK;->A1t:LX/3C4;

    .line 378652
    invoke-interface {p1}, Ljava/util/Map;->isEmpty()Z

    move-result v0

    const/4 v8, 0x1

    invoke-static {v8}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v5

    const/4 v2, 0x0

    if-nez v0, :cond_6

    invoke-interface {p1}, Ljava/util/Map;->keySet()Ljava/util/Set;

    move-result-object v0

    .line 378653
    new-instance v7, Ljava/util/HashSet;

    invoke-direct {v7}, Ljava/util/HashSet;-><init>()V

    .line 378654
    invoke-interface {v0}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v6

    :cond_0
    :goto_0
    invoke-interface {v6}, Ljava/util/Iterator;->hasNext()Z

    move-result v0

    if-eqz v0, :cond_1

    invoke-interface {v6}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Lcom/whatsapp/jid/DeviceJid;

    .line 378655
    iget-object v1, v3, LX/3C4;->A04:LX/0Af;

    invoke-static {v4}, LX/02V;->A0R(Lcom/whatsapp/jid/DeviceJid;)LX/0FL;

    move-result-object v0

    invoke-virtual {v1, v0}, LX/0Af;->A0H(LX/0FL;)Z

    move-result v0

    if-nez v0, :cond_0

    iget-object v0, v3, LX/3C4;->A08:Ljava/util/Set;

    .line 378656
    invoke-interface {v0, v4}, Ljava/util/Set;->contains(Ljava/lang/Object;)Z

    move-result v0

    if-nez v0, :cond_0

    .line 378657
    invoke-virtual {v7, v4}, Ljava/util/HashSet;->add(Ljava/lang/Object;)Z

    goto :goto_0

    .line 378658
    :cond_1
    invoke-virtual {v7}, Ljava/util/HashSet;->isEmpty()Z

    move-result v0

    const/4 v4, 0x0

    if-nez v0, :cond_2

    new-array v0, v4, [Lcom/whatsapp/jid/DeviceJid;

    .line 378659
    invoke-virtual {v7, v0}, Ljava/util/HashSet;->toArray([Ljava/lang/Object;)[Ljava/lang/Object;

    move-result-object v1

    check-cast v1, [Lcom/whatsapp/jid/DeviceJid;

    .line 378660
    iget-object v0, v3, LX/3C4;->A01:LX/0IM;

    invoke-virtual {v0, v1, v4}, LX/0IM;->A03([Lcom/whatsapp/jid/DeviceJid;Z)V

    const/4 v8, 0x0

    :cond_2
    if-eqz v8, :cond_6

    .line 378661
    new-instance v7, Ljava/util/HashMap;

    invoke-direct {v7}, Ljava/util/HashMap;-><init>()V

    .line 378662
    invoke-interface {p1}, Ljava/util/Map;->entrySet()Ljava/util/Set;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v11

    :goto_1
    invoke-interface {v11}, Ljava/util/Iterator;->hasNext()Z

    move-result v0

    if-eqz v0, :cond_5

    invoke-interface {v11}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Ljava/util/Map$Entry;

    .line 378663
    invoke-interface {v0}, Ljava/util/Map$Entry;->getKey()Ljava/lang/Object;

    move-result-object v6

    check-cast v6, Lcom/whatsapp/jid/DeviceJid;

    .line 378664
    invoke-interface {v0}, Ljava/util/Map$Entry;->getValue()Ljava/lang/Object;

    move-result-object v8

    check-cast v8, [B

    .line 378665
    :try_start_0
    sget-object v0, LX/0F8;->A0R:LX/0F8;

    invoke-virtual {v0}, LX/08W;->A06()LX/0Nu;

    move-result-object v9

    check-cast v9, LX/0Q0;

    .line 378666
    iget-object v0, v9, LX/0Nu;->A00:LX/08W;

    check-cast v0, LX/0F8;

    .line 378667
    iget-object v0, v0, LX/0F8;->A02:LX/3fX;

    if-nez v0, :cond_3

    .line 378668
    sget-object v0, LX/3fX;->A02:LX/3fX;

    .line 378669
    :cond_3
    invoke-virtual {v0}, LX/08W;->A06()LX/0Nu;

    move-result-object v10

    check-cast v10, LX/3fW;

    .line 378670
    array-length v1, v8

    invoke-static {v8, v4, v1}, LX/07N;->A01([BII)LX/07N;

    move-result-object v0

    .line 378671
    invoke-virtual {v10}, LX/0Nu;->A02()V

    .line 378672
    iget-object v8, v10, LX/0Nu;->A00:LX/08W;

    check-cast v8, LX/3fX;

    move-object v1, v0

    if-eqz v0, :cond_4

    .line 378673
    iget v0, v8, LX/3fX;->A00:I

    or-int/lit8 v0, v0, 0x1

    iput v0, v8, LX/3fX;->A00:I

    .line 378674
    iput-object v1, v8, LX/3fX;->A01:LX/07N;

    .line 378675
    invoke-virtual {v9}, LX/0Nu;->A02()V

    .line 378676
    iget-object v1, v9, LX/0Nu;->A00:LX/08W;

    check-cast v1, LX/0F8;

    .line 378677
    invoke-virtual {v10}, LX/0Nu;->A01()LX/08W;

    move-result-object v0

    check-cast v0, LX/3fX;

    iput-object v0, v1, LX/0F8;->A02:LX/3fX;

    .line 378678
    iget v0, v1, LX/0F8;->A00:I

    or-int/lit16 v0, v0, 0x200

    iput v0, v1, LX/0F8;->A00:I

    .line 378679
    invoke-virtual {v9}, LX/0Nu;->A01()LX/08W;

    move-result-object v0

    check-cast v0, LX/0F8;

    .line 378680
    new-instance v1, LX/3AY;

    invoke-direct {v1, v3, v6, v0}, LX/3AY;-><init>(LX/3C4;Lcom/whatsapp/jid/DeviceJid;LX/0F8;)V

    .line 378681
    sget-object v0, LX/08J;->A02:Ljava/util/concurrent/ThreadPoolExecutor;

    invoke-virtual {v0, v1}, Ljava/util/concurrent/ThreadPoolExecutor;->submit(Ljava/util/concurrent/Callable;)Ljava/util/concurrent/Future;

    move-result-object v0

    .line 378682
    iput-object v0, v3, LX/3C4;->A09:Ljava/util/concurrent/Future;

    .line 378683
    iget-object v0, v3, LX/3C4;->A09:Ljava/util/concurrent/Future;

    invoke-interface {v0}, Ljava/util/concurrent/Future;->get()Ljava/lang/Object;

    move-result-object v0

    invoke-virtual {v7, v6, v0}, Ljava/util/HashMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
    :try_end_0
    .catch Ljava/util/concurrent/CancellationException; {:try_start_0 .. :try_end_0} :catch_2
    .catch Ljava/lang/InterruptedException; {:try_start_0 .. :try_end_0} :catch_1
    .catch Ljava/util/concurrent/ExecutionException; {:try_start_0 .. :try_end_0} :catch_0
    .catchall {:try_start_0 .. :try_end_0} :catchall_0

    .line 378684
    iput-object v2, v3, LX/3C4;->A09:Ljava/util/concurrent/Future;

    goto :goto_1

    .line 378685
    :cond_4
    :try_start_1
    new-instance v0, Ljava/lang/NullPointerException;

    invoke-direct {v0}, Ljava/lang/NullPointerException;-><init>()V

    throw v0
    :try_end_1
    .catch Ljava/util/concurrent/CancellationException; {:try_start_1 .. :try_end_1} :catch_2
    .catch Ljava/lang/InterruptedException; {:try_start_1 .. :try_end_1} :catch_1
    .catch Ljava/util/concurrent/ExecutionException; {:try_start_1 .. :try_end_1} :catch_0
    .catchall {:try_start_1 .. :try_end_1} :catchall_0

    .line 378686
    :catch_0
    move-exception v1

    .line 378687
    :try_start_2
    new-instance v0, Ljava/lang/AssertionError;

    invoke-direct {v0, v1}, Ljava/lang/AssertionError;-><init>(Ljava/lang/Object;)V

    throw v0

    :catch_1
    move-exception v1

    const-string v0, "voip/encryption/encryptE2EKey interrupted"

    .line 378688
    invoke-static {v0, v1}, Lcom/whatsapp/util/Log;->e(Ljava/lang/String;Ljava/lang/Throwable;)V

    .line 378689
    new-instance v6, Landroid/util/Pair;

    invoke-static {v4}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v0

    invoke-direct {v6, v0, v2}, Landroid/util/Pair;-><init>(Ljava/lang/Object;Ljava/lang/Object;)V

    goto :goto_2
    :try_end_2
    .catchall {:try_start_2 .. :try_end_2} :catchall_0

    .line 378690
    :catch_2
    move-exception v1

    :try_start_3
    const-string v0, "voip/encryption/encryptE2EKey cancelled"

    .line 378691
    invoke-static {v0, v1}, Lcom/whatsapp/util/Log;->e(Ljava/lang/String;Ljava/lang/Throwable;)V

    .line 378692
    new-instance v6, Landroid/util/Pair;

    invoke-direct {v6, v5, v2}, Landroid/util/Pair;-><init>(Ljava/lang/Object;Ljava/lang/Object;)V
    :try_end_3
    .catchall {:try_start_3 .. :try_end_3} :catchall_0

    .line 378693
    iput-object v2, v3, LX/3C4;->A09:Ljava/util/concurrent/Future;

    goto :goto_3

    :catchall_0
    move-exception v0

    iput-object v2, v3, LX/3C4;->A09:Ljava/util/concurrent/Future;

    .line 378694
    throw v0

    .line 378695
    :cond_5
    new-instance v6, Landroid/util/Pair;

    invoke-direct {v6, v5, v7}, Landroid/util/Pair;-><init>(Ljava/lang/Object;Ljava/lang/Object;)V

    goto :goto_3

    .line 378696
    :cond_6
    new-instance v6, Landroid/util/Pair;

    invoke-direct {v6, v5, v2}, Landroid/util/Pair;-><init>(Ljava/lang/Object;Ljava/lang/Object;)V

    goto :goto_3

    .line 378697
    :goto_2
    iput-object v2, v3, LX/3C4;->A09:Ljava/util/concurrent/Future;

    .line 378698
    :goto_3
    iget-object v0, v6, Landroid/util/Pair;->first:Ljava/lang/Object;

    check-cast v0, Ljava/lang/Boolean;

    invoke-virtual {v0}, Ljava/lang/Boolean;->booleanValue()Z

    move-result v0

    if-nez v0, :cond_7

    .line 378699
    sget-object v1, LX/3Ce;->A0C:LX/3Ce;

    invoke-static {v1, v2}, LX/3ZK;->A01(LX/3Ce;Ljava/lang/String;)V

    .line 378700
    :cond_7
    iget-object v0, v6, Landroid/util/Pair;->second:Ljava/lang/Object;

    check-cast v0, Ljava/util/Map;

    return-object v0
.end method

.method public A05()V
    .locals 5

    .line 378701
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voip/service/create "

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, p0}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 378702
    new-instance v1, Landroid/os/Handler;

    new-instance v0, LX/3BH;

    invoke-direct {v0, p0}, LX/3BH;-><init>(LX/3ZK;)V

    invoke-direct {v1, v0}, Landroid/os/Handler;-><init>(Landroid/os/Handler$Callback;)V

    iput-object v1, p0, LX/3ZK;->A0M:Landroid/os/Handler;

    .line 378703
    new-instance v1, Landroid/os/Handler;

    new-instance v0, LX/3BG;

    invoke-direct {v0, p0}, LX/3BG;-><init>(LX/3ZK;)V

    invoke-direct {v1, v0}, Landroid/os/Handler;-><init>(Landroid/os/Handler$Callback;)V

    iput-object v1, p0, LX/3ZK;->A0K:Landroid/os/Handler;

    .line 378704
    new-instance v1, Landroid/os/Handler;

    new-instance v0, LX/3BD;

    invoke-direct {v0, p0}, LX/3BD;-><init>(LX/3ZK;)V

    invoke-direct {v1, v0}, Landroid/os/Handler;-><init>(Landroid/os/Handler$Callback;)V

    iput-object v1, p0, LX/3ZK;->A0N:Landroid/os/Handler;

    .line 378705
    new-instance v1, Landroid/os/Handler;

    new-instance v0, LX/3BI;

    invoke-direct {v0, p0}, LX/3BI;-><init>(LX/3ZK;)V

    invoke-direct {v1, v0}, Landroid/os/Handler;-><init>(Landroid/os/Handler$Callback;)V

    iput-object v1, p0, LX/3ZK;->A0L:Landroid/os/Handler;

    .line 378706
    new-instance v1, LX/3Cc;

    sget-object v0, LX/3B5;->A00:LX/3B5;

    const/4 v4, 0x1

    invoke-direct {v1, v4, v0}, LX/3Cc;-><init>(ILjava/util/concurrent/ThreadFactory;)V

    iput-object v1, p0, LX/3ZK;->A0s:Ljava/util/concurrent/ScheduledExecutorService;

    .line 378707
    new-instance v1, LX/38w;

    iget-object v0, p0, LX/3ZK;->A1Z:LX/011;

    invoke-direct {v1, v0}, LX/38w;-><init>(LX/011;)V

    iput-object v1, p0, LX/3ZK;->A0V:LX/38w;

    .line 378708
    new-instance v0, LX/3CZ;

    invoke-direct {v0, p0}, LX/3CZ;-><init>(LX/3ZK;)V

    iput-object v0, p0, LX/3ZK;->A0Q:Landroid/telephony/PhoneStateListener;

    .line 378709
    new-instance v0, LX/3Ca;

    invoke-direct {v0, p0}, LX/3Ca;-><init>(LX/3ZK;)V

    iput-object v0, p0, LX/3ZK;->A0F:Landroid/content/BroadcastReceiver;

    .line 378710
    new-instance v0, LX/3Cb;

    invoke-direct {v0, p0}, LX/3Cb;-><init>(LX/3ZK;)V

    iput-object v0, p0, LX/3ZK;->A0G:Landroid/content/BroadcastReceiver;

    .line 378711
    new-instance v0, LX/3Yh;

    invoke-direct {v0, p0}, LX/3Yh;-><init>(LX/3ZK;)V

    iput-object v0, p0, LX/3ZK;->A0U:LX/38v;

    .line 378712
    iget-object v3, p0, LX/3ZK;->A1y:LX/3Co;

    const-string v0, "voip/audio_route/init"

    .line 378713
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 378714
    invoke-static {}, Landroid/bluetooth/BluetoothAdapter;->getDefaultAdapter()Landroid/bluetooth/BluetoothAdapter;

    move-result-object v2

    .line 378715
    iput-object v2, v3, LX/3Co;->A02:Landroid/bluetooth/BluetoothAdapter;

    if-eqz v2, :cond_0

    .line 378716
    :try_start_0
    iget-object v1, v3, LX/3Co;->A09:Landroid/content/Context;

    iget-object v0, v3, LX/3Co;->A0F:LX/3Cl;

    invoke-virtual {v2, v1, v0, v4}, Landroid/bluetooth/BluetoothAdapter;->getProfileProxy(Landroid/content/Context;Landroid/bluetooth/BluetoothProfile$ServiceListener;I)Z

    goto :goto_0
    :try_end_0
    .catch Ljava/lang/Exception; {:try_start_0 .. :try_end_0} :catch_0

    .line 378717
    :cond_0
    const-string v0, "voip/audio_route/init failed to get bluetoothAdapter"

    .line 378718
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/String;)V

    goto :goto_0

    .line 378719
    :catch_0
    move-exception v0

    .line 378720
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/Throwable;)V

    .line 378721
    :goto_0
    iget-object v1, v3, LX/3Co;->A0D:LX/3ZC;

    if-eqz v1, :cond_1

    .line 378722
    iget-object v0, v3, LX/3Co;->A0C:LX/3CL;

    invoke-virtual {v1, v0}, LX/00o;->A00(Ljava/lang/Object;)V

    .line 378723
    :cond_1
    iget-object v0, p0, LX/3ZK;->A1t:LX/3C4;

    .line 378724
    iget-object v1, v0, LX/3C4;->A03:LX/0O9;

    iget-object v0, v0, LX/3C4;->A02:LX/07d;

    invoke-virtual {v1, v0}, LX/00o;->A00(Ljava/lang/Object;)V

    .line 378725
    iget-object v1, p0, LX/3ZK;->A1S:LX/0Kn;

    iget-object v0, p0, LX/3ZK;->A1R:LX/0Kv;

    invoke-virtual {v1, v0}, LX/00o;->A00(Ljava/lang/Object;)V

    .line 378726
    new-instance v1, LX/3ZG;

    invoke-direct {v1, p0}, LX/3ZG;-><init>(LX/3ZK;)V

    iput-object v1, p0, LX/3ZK;->A0S:LX/1Z2;

    .line 378727
    iget-object v0, p0, LX/3ZK;->A1L:LX/0Hi;

    .line 378728
    iget-object v0, v0, LX/0Hi;->A0g:Ljava/util/concurrent/CopyOnWriteArrayList;

    invoke-virtual {v0, v1}, Ljava/util/concurrent/CopyOnWriteArrayList;->add(Ljava/lang/Object;)Z

    .line 378729
    sget v1, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v0, 0x1c

    const/4 v4, 0x0

    if-lt v1, v0, :cond_4

    iget-object v1, p0, LX/3ZK;->A1v:LX/3ZC;

    if-eqz v1, :cond_4

    .line 378730
    new-instance v0, LX/3dM;

    invoke-direct {v0, p0}, LX/3dM;-><init>(LX/3ZK;)V

    .line 378731
    iput-object v0, p0, LX/3ZK;->A0Z:LX/3CL;

    .line 378732
    invoke-virtual {v1, v0}, LX/00o;->A00(Ljava/lang/Object;)V

    .line 378733
    :goto_1
    iget-object v0, p0, LX/3ZK;->A1w:Lcom/whatsapp/voipcalling/VoiceService$VoiceServiceEventCallback;

    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->nativeRegisterEventCallback(Lcom/whatsapp/voipcalling/VoipEventCallback;)V

    .line 378734
    sget-object v0, Lcom/whatsapp/voipcalling/Voip;->A00:Lcom/whatsapp/voipcalling/CryptoCallback;

    if-nez v0, :cond_2

    .line 378735
    new-instance v1, Lcom/whatsapp/voipcalling/DefaultCryptoCallback;

    iget-object v0, p0, LX/3ZK;->A1P:LX/01A;

    invoke-direct {v1, v0}, Lcom/whatsapp/voipcalling/DefaultCryptoCallback;-><init>(LX/01A;)V

    .line 378736
    invoke-static {v1}, Lcom/whatsapp/voipcalling/Voip;->nativeRegisterCryptoCallback(Lcom/whatsapp/voipcalling/CryptoCallback;)V

    .line 378737
    sput-object v1, Lcom/whatsapp/voipcalling/Voip;->A00:Lcom/whatsapp/voipcalling/CryptoCallback;

    .line 378738
    :cond_2
    new-instance v3, Lcom/whatsapp/voipcalling/VoiceService$DefaultSignalingXmppCallback;

    iget-object v2, p0, LX/3ZK;->A1a:LX/00T;

    iget-object v1, p0, LX/3ZK;->A1P:LX/01A;

    iget-object v0, p0, LX/3ZK;->A1I:LX/1XX;

    invoke-direct {v3, p0, v2, v1, v0}, Lcom/whatsapp/voipcalling/VoiceService$DefaultSignalingXmppCallback;-><init>(LX/3ZK;LX/00T;LX/01A;LX/1XX;)V

    .line 378739
    invoke-static {v3}, Lcom/whatsapp/voipcalling/Voip;->nativeRegisterSignalingXmppCallback(Lcom/whatsapp/voipcalling/SignalingXmppCallback;)V

    .line 378740
    sget v1, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v0, 0x16

    if-lt v1, v0, :cond_3

    .line 378741
    iget-object v1, p0, LX/3ZK;->A1F:Landroid/content/Context;

    const-string v0, "connectivity"

    .line 378742
    invoke-virtual {v1, v0}, Landroid/content/Context;->getSystemService(Ljava/lang/String;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Landroid/net/ConnectivityManager;

    .line 378743
    new-instance v2, LX/3CH;

    invoke-direct {v2, v0}, LX/3CH;-><init>(Landroid/net/ConnectivityManager;)V

    .line 378744
    iput-object v2, p0, LX/3ZK;->A0Y:LX/3CH;

    .line 378745
    iget-object v1, v2, LX/3CH;->A06:Ljava/util/concurrent/ScheduledExecutorService;

    new-instance v0, LX/3Al;

    invoke-direct {v0, v2}, LX/3Al;-><init>(LX/3CH;)V

    invoke-interface {v1, v0}, Ljava/util/concurrent/ScheduledExecutorService;->execute(Ljava/lang/Runnable;)V

    .line 378746
    :goto_2
    const-string v0, "voip/service/created"

    .line 378747
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    return-void

    .line 378748
    :cond_3
    iput-object v4, p0, LX/3ZK;->A0Y:LX/3CH;

    goto :goto_2

    .line 378749
    :cond_4
    iput-object v4, p0, LX/3ZK;->A0Z:LX/3CL;

    goto :goto_1
.end method

.method public A06()V
    .locals 6

    .line 378750
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voip/service/destroy "

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, p0}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 378751
    :try_start_0
    invoke-virtual {p0}, LX/3ZK;->A0A()V

    goto :goto_0
    :try_end_0
    .catch Ljava/lang/Exception; {:try_start_0 .. :try_end_0} :catch_0

    :catch_0
    move-exception v0

    .line 378752
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/Throwable;)V

    .line 378753
    :goto_0
    invoke-virtual {p0}, LX/3ZK;->A0F()V

    .line 378754
    iget-object v0, p0, LX/3ZK;->A0I:Landroid/media/SoundPool;

    const/4 v3, 0x0

    if-eqz v0, :cond_0

    .line 378755
    iput-object v3, p0, LX/3ZK;->A0i:Ljava/lang/Integer;

    .line 378756
    invoke-virtual {v0}, Landroid/media/SoundPool;->release()V

    .line 378757
    iput-object v3, p0, LX/3ZK;->A0I:Landroid/media/SoundPool;

    .line 378758
    :cond_0
    iget-object v4, p0, LX/3ZK;->A1y:LX/3Co;

    const-string v0, "voip/audio_route/deinit"

    .line 378759
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    const/4 v2, 0x1

    .line 378760
    iput-boolean v2, v4, LX/3Co;->A05:Z

    .line 378761
    iget-object v1, v4, LX/3Co;->A0D:LX/3ZC;

    if-eqz v1, :cond_1

    .line 378762
    iget-object v0, v4, LX/3Co;->A0C:LX/3CL;

    invoke-virtual {v1, v0}, LX/00o;->A01(Ljava/lang/Object;)V

    .line 378763
    :cond_1
    iget-object v0, v4, LX/3Co;->A02:Landroid/bluetooth/BluetoothAdapter;

    if-eqz v0, :cond_2

    iget-object v0, v4, LX/3Co;->A03:Landroid/bluetooth/BluetoothHeadset;

    if-eqz v0, :cond_2

    .line 378764
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voip/audio_route/destroy closing profile proxy for "

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 378765
    iget-object v1, v4, LX/3Co;->A02:Landroid/bluetooth/BluetoothAdapter;

    iget-object v0, v4, LX/3Co;->A03:Landroid/bluetooth/BluetoothHeadset;

    invoke-virtual {v1, v2, v0}, Landroid/bluetooth/BluetoothAdapter;->closeProfileProxy(ILandroid/bluetooth/BluetoothProfile;)V

    .line 378766
    :cond_2
    iput-object v3, v4, LX/3Co;->A02:Landroid/bluetooth/BluetoothAdapter;

    .line 378767
    iput-object v3, v4, LX/3Co;->A03:Landroid/bluetooth/BluetoothHeadset;

    .line 378768
    invoke-virtual {p0}, LX/3ZK;->A0H()V

    .line 378769
    sget v1, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v0, 0x16

    if-lt v1, v0, :cond_3

    .line 378770
    iget-object v2, p0, LX/3ZK;->A0Y:LX/3CH;

    if-eqz v2, :cond_3

    .line 378771
    iget-object v1, v2, LX/3CH;->A06:Ljava/util/concurrent/ScheduledExecutorService;

    new-instance v0, LX/3Ak;

    invoke-direct {v0, v2}, LX/3Ak;-><init>(LX/3CH;)V

    invoke-interface {v1, v0}, Ljava/util/concurrent/ScheduledExecutorService;->execute(Ljava/lang/Runnable;)V

    .line 378772
    iget-object v0, v2, LX/3CH;->A06:Ljava/util/concurrent/ScheduledExecutorService;

    invoke-interface {v0}, Ljava/util/concurrent/ScheduledExecutorService;->shutdown()V

    .line 378773
    iput-object v3, p0, LX/3ZK;->A0Y:LX/3CH;

    .line 378774
    :cond_3
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->nativeUnregisterEventCallback()V

    .line 378775
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->nativeUnregisterSignalingXmppCallback()V

    .line 378776
    iget-object v0, p0, LX/3ZK;->A1t:LX/3C4;

    .line 378777
    iget-object v1, v0, LX/3C4;->A03:LX/0O9;

    iget-object v0, v0, LX/3C4;->A02:LX/07d;

    invoke-virtual {v1, v0}, LX/00o;->A01(Ljava/lang/Object;)V

    .line 378778
    iget-object v1, p0, LX/3ZK;->A1S:LX/0Kn;

    iget-object v0, p0, LX/3ZK;->A1R:LX/0Kv;

    invoke-virtual {v1, v0}, LX/00o;->A01(Ljava/lang/Object;)V

    .line 378779
    iget-object v0, p0, LX/3ZK;->A0s:Ljava/util/concurrent/ScheduledExecutorService;

    if-eqz v0, :cond_4

    .line 378780
    invoke-interface {v0}, Ljava/util/concurrent/ScheduledExecutorService;->shutdown()V

    .line 378781
    iput-object v3, p0, LX/3ZK;->A0s:Ljava/util/concurrent/ScheduledExecutorService;

    .line 378782
    :cond_4
    iget-object v0, p0, LX/3ZK;->A0d:Ljava/lang/Integer;

    const-string v2, "call_offer_ack_timeout"

    if-eqz v0, :cond_5

    invoke-virtual {v0}, Ljava/lang/Integer;->intValue()I

    move-result v0

    if-eqz v0, :cond_5

    .line 378783
    iget-object v1, p0, LX/3ZK;->A1c:LX/00E;

    mul-int/lit16 v0, v0, 0x3e8

    .line 378784
    invoke-static {v1, v2, v0}, LX/007;->A0V(LX/00E;Ljava/lang/String;I)V

    .line 378785
    :goto_1
    const-string v0, "voip/service/destroyed pendingCommands: "

    .line 378786
    invoke-static {v0}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v1

    iget-object v0, p0, LX/3ZK;->A22:Ljava/util/List;

    invoke-interface {v0}, Ljava/util/List;->size()I

    move-result v0

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 378787
    iget-object v0, p0, LX/3ZK;->A22:Ljava/util/List;

    invoke-interface {v0}, Ljava/util/List;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_2
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v0

    if-eqz v0, :cond_6

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v0

    check-cast v0, LX/0dq;

    .line 378788
    invoke-static {v0}, LX/0dr;->A01(LX/0dq;)V

    goto :goto_2

    .line 378789
    :cond_5
    iget-object v0, p0, LX/3ZK;->A1c:LX/00E;

    .line 378790
    invoke-static {v0, v2}, LX/007;->A0U(LX/00E;Ljava/lang/String;)V

    goto :goto_1

    .line 378791
    :cond_6
    iget-object v0, p0, LX/3ZK;->A22:Ljava/util/List;

    invoke-interface {v0}, Ljava/util/List;->clear()V

    .line 378792
    sget v0, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v2, 0x1c

    const/4 v5, 0x0

    if-lt v0, v2, :cond_8

    iget-object v1, p0, LX/3ZK;->A1v:LX/3ZC;

    if-eqz v1, :cond_8

    iget-object v0, p0, LX/3ZK;->A0Z:LX/3CL;

    if-eqz v0, :cond_8

    .line 378793
    invoke-virtual {v1}, LX/3ZC;->A03()I

    move-result v0

    const/4 v1, 0x0

    if-nez v0, :cond_7

    const/4 v1, 0x1

    :cond_7
    const-string v0, "Self managed connections are not disconnected when VoiceService is being destroyed"

    .line 378794
    invoke-static {v1, v0}, LX/00A;->A0A(ZLjava/lang/String;)V

    .line 378795
    iget-object v0, p0, LX/3ZK;->A1v:LX/3ZC;

    invoke-virtual {v0}, LX/3ZC;->A06()V

    .line 378796
    iget-object v1, p0, LX/3ZK;->A1v:LX/3ZC;

    iget-object v0, p0, LX/3ZK;->A0Z:LX/3CL;

    invoke-virtual {v1, v0}, LX/00o;->A01(Ljava/lang/Object;)V

    .line 378797
    iput-object v3, p0, LX/3ZK;->A0Z:LX/3CL;

    .line 378798
    :cond_8
    iget-object v0, p0, LX/3ZK;->A1L:LX/0Hi;

    iget-object v1, p0, LX/3ZK;->A0S:LX/1Z2;

    .line 378799
    iget-object v0, v0, LX/0Hi;->A0g:Ljava/util/concurrent/CopyOnWriteArrayList;

    invoke-virtual {v0, v1}, Ljava/util/concurrent/CopyOnWriteArrayList;->remove(Ljava/lang/Object;)Z

    .line 378800
    iget-object v1, p0, LX/3ZK;->A1F:Landroid/content/Context;

    const-string v0, "notification"

    .line 378801
    invoke-virtual {v1, v0}, Landroid/content/Context;->getSystemService(Ljava/lang/String;)Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Landroid/app/NotificationManager;

    .line 378802
    iget-boolean v0, p0, LX/3ZK;->A12:Z

    if-eqz v0, :cond_a

    if-eqz v1, :cond_a

    sget v0, Landroid/os/Build$VERSION;->SDK_INT:I

    if-lt v0, v2, :cond_a

    .line 378803
    invoke-virtual {v1}, Landroid/app/NotificationManager;->getActiveNotifications()[Landroid/service/notification/StatusBarNotification;

    move-result-object v4

    array-length v3, v4

    :goto_3
    if-ge v5, v3, :cond_a

    aget-object v0, v4, v5

    .line 378804
    invoke-virtual {v0}, Landroid/service/notification/StatusBarNotification;->getId()I

    move-result v1

    const/16 v0, 0x17

    if-ne v1, v0, :cond_9

    .line 378805
    iget-object v2, p0, LX/3ZK;->A1K:LX/009;

    const/4 v1, -0x1

    const-string v0, "voip/orphannotification"

    invoke-virtual {v2, v0, v1}, LX/009;->A02(Ljava/lang/String;I)V

    :cond_9
    add-int/lit8 v5, v5, 0x1

    goto :goto_3

    :cond_a
    return-void
.end method

.method public A07()V
    .locals 8

    .line 378806
    iget-wide v6, p0, LX/3ZK;->A0C:J

    const-wide/16 v4, -0x1

    cmp-long v0, v6, v4

    if-eqz v0, :cond_0

    .line 378807
    iget-wide v2, p0, LX/3ZK;->A0E:J

    invoke-static {}, Ljava/lang/System;->currentTimeMillis()J

    move-result-wide v0

    sub-long/2addr v0, v6

    add-long/2addr v0, v2

    iput-wide v0, p0, LX/3ZK;->A0E:J

    .line 378808
    iput-wide v4, p0, LX/3ZK;->A0C:J

    const-string v0, "VoiceService:onExitPictureInPicture"

    .line 378809
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    :cond_0
    return-void
.end method

.method public A08()V
    .locals 2

    const-string v0, "voip/restoreProximitySensor"

    .line 378810
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 378811
    iget-boolean v0, p0, LX/3ZK;->A0x:Z

    if-eqz v0, :cond_0

    const/4 v0, 0x0

    .line 378812
    iput-boolean v0, p0, LX/3ZK;->A0x:Z

    .line 378813
    iget-object v0, p0, LX/3ZK;->A0L:Landroid/os/Handler;

    const/16 v1, 0xe

    invoke-virtual {v0, v1}, Landroid/os/Handler;->removeMessages(I)V

    .line 378814
    iget-object v0, p0, LX/3ZK;->A0L:Landroid/os/Handler;

    invoke-virtual {v0, v1}, Landroid/os/Handler;->sendEmptyMessage(I)Z

    :cond_0
    return-void
.end method

.method public A09()V
    .locals 4

    .line 378815
    invoke-virtual {p0}, LX/3ZK;->A0J()V

    .line 378816
    iget-object v1, p0, LX/3ZK;->A21:Lcom/whatsapp/voipcalling/camera/VoipCameraManager;

    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 378817
    invoke-virtual {v0}, LX/0Zd;->A02()Ljava/lang/String;

    move-result-object v0

    .line 378818
    invoke-virtual {v1, v0}, Lcom/whatsapp/voipcalling/camera/VoipCameraManager;->setRequestedCamera2SupportLevel(Ljava/lang/String;)V

    .line 378819
    iget-object v0, p0, LX/3ZK;->A0L:Landroid/os/Handler;

    const/16 v3, 0x17

    invoke-virtual {v0, v3}, Landroid/os/Handler;->removeMessages(I)V

    .line 378820
    iget-object v2, p0, LX/3ZK;->A0L:Landroid/os/Handler;

    const-wide/32 v0, 0xafc8

    invoke-virtual {v2, v3, v0, v1}, Landroid/os/Handler;->sendEmptyMessageDelayed(IJ)Z

    .line 378821
    iget-object v1, p0, LX/3ZK;->A0s:Ljava/util/concurrent/ScheduledExecutorService;

    sget-object v0, LX/3Ao;->A00:LX/3Ao;

    invoke-interface {v1, v0}, Ljava/util/concurrent/ScheduledExecutorService;->execute(Ljava/lang/Runnable;)V

    return-void
.end method

.method public A0A()V
    .locals 3

    .line 378822
    iget-object v0, p0, LX/3ZK;->A1E:[J

    const/4 v2, 0x0

    if-eqz v0, :cond_0

    const-string v0, "voip/vibrate/stop"

    .line 378823
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 378824
    iget-object v1, p0, LX/3ZK;->A1F:Landroid/content/Context;

    const-string v0, "vibrator"

    .line 378825
    invoke-virtual {v1, v0}, Landroid/content/Context;->getSystemService(Ljava/lang/String;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Landroid/os/Vibrator;

    .line 378826
    invoke-static {v0}, LX/00A;->A05(Ljava/lang/Object;)V

    .line 378827
    invoke-virtual {v0}, Landroid/os/Vibrator;->cancel()V

    .line 378828
    iput-object v2, p0, LX/3ZK;->A1E:[J

    .line 378829
    :cond_0
    iput-object v2, p0, LX/3ZK;->A0J:Landroid/net/Uri;

    .line 378830
    iget-object v0, p0, LX/3ZK;->A0X:LX/0mR;

    if-eqz v0, :cond_1

    .line 378831
    const/4 v1, 0x1

    .line 378832
    iget-object v0, v0, LX/0NO;->A00:LX/0Zu;

    invoke-virtual {v0, v1}, Landroid/os/AsyncTask;->cancel(Z)Z

    .line 378833
    iput-object v2, p0, LX/3ZK;->A0X:LX/0mR;

    .line 378834
    :cond_1
    iget-object v0, p0, LX/3ZK;->A0H:Landroid/media/Ringtone;

    if-eqz v0, :cond_2

    const-string v0, "voip/ringtone/stop"

    .line 378835
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 378836
    iget-object v0, p0, LX/3ZK;->A0H:Landroid/media/Ringtone;

    invoke-virtual {v0}, Landroid/media/Ringtone;->stop()V

    .line 378837
    iput-object v2, p0, LX/3ZK;->A0H:Landroid/media/Ringtone;

    :cond_2
    return-void
.end method

.method public final A0B()V
    .locals 4

    .line 378838
    iget-object v0, p0, LX/3ZK;->A0N:Landroid/os/Handler;

    const/4 v3, 0x0

    invoke-virtual {v0, v3}, Landroid/os/Handler;->removeMessages(I)V

    .line 378839
    iget-object v2, p0, LX/3ZK;->A0N:Landroid/os/Handler;

    const-wide/16 v0, 0x3a98

    invoke-virtual {v2, v3, v0, v1}, Landroid/os/Handler;->sendEmptyMessageDelayed(IJ)Z

    return-void
.end method

.method public final A0C()V
    .locals 5

    .line 378840
    iget-object v0, p0, LX/3ZK;->A0J:Landroid/net/Uri;

    if-eqz v0, :cond_0

    .line 378841
    iget-object v0, p0, LX/3ZK;->A0H:Landroid/media/Ringtone;

    const/4 v4, 0x0

    const/4 v3, 0x1

    if-nez v0, :cond_1

    .line 378842
    iget-object v0, p0, LX/3ZK;->A0X:LX/0mR;

    if-nez v0, :cond_0

    .line 378843
    new-instance v2, LX/0mR;

    iget-object v1, p0, LX/3ZK;->A1F:Landroid/content/Context;

    iget-object v0, p0, LX/3ZK;->A0W:LX/3CD;

    invoke-direct {v2, v1, v0}, LX/0mR;-><init>(Landroid/content/Context;LX/3CD;)V

    iput-object v2, p0, LX/3ZK;->A0X:LX/0mR;

    .line 378844
    new-array v1, v3, [Landroid/net/Uri;

    iget-object v0, p0, LX/3ZK;->A0J:Landroid/net/Uri;

    aput-object v0, v1, v4

    invoke-static {v2, v1}, LX/00V;->A01(LX/0NO;[Ljava/lang/Object;)V

    .line 378845
    :cond_0
    return-void

    .line 378846
    :cond_1
    :try_start_0
    invoke-virtual {v0}, Landroid/media/Ringtone;->isPlaying()Z

    move-result v0

    if-nez v0, :cond_0

    .line 378847
    iget-object v0, p0, LX/3ZK;->A0H:Landroid/media/Ringtone;

    invoke-virtual {v0}, Landroid/media/Ringtone;->play()V

    return-void
    :try_end_0
    .catch Ljava/lang/NullPointerException; {:try_start_0 .. :try_end_0} :catch_0

    :catch_0
    move-exception v2

    .line 378848
    sget v1, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v0, 0x16

    if-ne v1, v0, :cond_2

    sget-object v1, Landroid/os/Build;->MANUFACTURER:Ljava/lang/String;

    const-string v0, "oppo"

    invoke-virtual {v0, v1}, Ljava/lang/String;->equalsIgnoreCase(Ljava/lang/String;)Z

    move-result v0

    if-eqz v0, :cond_2

    const/4 v4, 0x1

    :cond_2
    if-eqz v4, :cond_3

    const-string v0, "voip/loadAndPlayRingtone error while playing existing ringtone"

    .line 378849
    invoke-static {v0, v2}, Lcom/whatsapp/util/Log;->e(Ljava/lang/String;Ljava/lang/Throwable;)V

    return-void

    .line 378850
    :cond_3
    throw v2
.end method

.method public final A0D()V
    .locals 3

    const-string v0, "voip/ear-far"

    .line 378851
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 378852
    invoke-static {}, LX/00A;->A01()V

    const/4 v2, 0x0

    .line 378853
    iput-boolean v2, p0, LX/3ZK;->A0y:Z

    .line 378854
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v1

    if-eqz v1, :cond_1

    .line 378855
    invoke-virtual {v1}, Lcom/whatsapp/voipcalling/CallInfo;->isEitherSideRequestingUpgrade()Z

    move-result v0

    if-eqz v0, :cond_1

    .line 378856
    iget-object v0, p0, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_0

    .line 378857
    invoke-interface {v0, v1}, LX/0WA;->ANt(Lcom/whatsapp/voipcalling/CallInfo;)V

    .line 378858
    :cond_0
    iget-object v0, p0, LX/3ZK;->A1y:LX/3Co;

    invoke-virtual {v0, v1}, LX/3Co;->A02(Lcom/whatsapp/voipcalling/CallInfo;)V

    .line 378859
    :cond_1
    iget-object v0, p0, LX/3ZK;->A0P:Landroid/os/PowerManager$WakeLock;

    if-eqz v0, :cond_2

    sget v1, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v0, 0x15

    if-lt v1, v0, :cond_2

    return-void

    .line 378860
    :cond_2
    iget-object v0, p0, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_3

    .line 378861
    invoke-interface {v0, v2}, LX/0WA;->AH2(Z)V

    :cond_3
    return-void
.end method

.method public final A0E()V
    .locals 5

    const-string v0, "voip/ear-near"

    .line 378862
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 378863
    invoke-static {}, LX/00A;->A01()V

    const/4 v4, 0x1

    .line 378864
    iput-boolean v4, p0, LX/3ZK;->A0y:Z

    .line 378865
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v3

    .line 378866
    iget-boolean v0, p0, LX/3ZK;->A19:Z

    if-nez v0, :cond_0

    if-eqz v3, :cond_3

    .line 378867
    invoke-virtual {v3}, Lcom/whatsapp/voipcalling/CallInfo;->isEitherSideRequestingUpgrade()Z

    move-result v0

    if-eqz v0, :cond_3

    .line 378868
    :cond_0
    iget-object v2, p0, LX/3ZK;->A1y:LX/3Co;

    .line 378869
    iget v0, v2, LX/3Co;->A00:I

    const/4 v1, 0x1

    if-eq v0, v4, :cond_1

    const/4 v1, 0x0

    .line 378870
    :cond_1
    const/4 v0, 0x0

    if-eqz v1, :cond_2

    .line 378871
    invoke-virtual {v2, v0, v3}, LX/3Co;->A06(ZLcom/whatsapp/voipcalling/CallInfo;)V

    .line 378872
    :cond_2
    iput-boolean v0, p0, LX/3ZK;->A19:Z

    .line 378873
    :cond_3
    iget-object v0, p0, LX/3ZK;->A0P:Landroid/os/PowerManager$WakeLock;

    if-eqz v0, :cond_4

    sget v1, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v0, 0x15

    if-lt v1, v0, :cond_4

    return-void

    .line 378874
    :cond_4
    iget-object v0, p0, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_5

    .line 378875
    invoke-interface {v0, v4}, LX/0WA;->AH2(Z)V

    :cond_5
    return-void
.end method

.method public final A0F()V
    .locals 4

    .line 378876
    iget-object v0, p0, LX/3ZK;->A0n:Ljava/lang/Object;

    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A07(Ljava/lang/Object;)V

    const/4 v3, 0x0

    .line 378877
    iput-object v3, p0, LX/3ZK;->A0n:Ljava/lang/Object;

    .line 378878
    iget-object v1, p0, LX/3ZK;->A0o:Ljava/lang/Object;

    const/16 v2, 0x10

    if-eqz v1, :cond_0

    .line 378879
    sget v0, Landroid/os/Build$VERSION;->SDK_INT:I

    if-lt v0, v2, :cond_0

    .line 378880
    :try_start_0
    check-cast v1, Landroid/media/audiofx/AutomaticGainControl;

    .line 378881
    invoke-virtual {v1}, Landroid/media/audiofx/AutomaticGainControl;->release()V

    goto :goto_0
    :try_end_0
    .catchall {:try_start_0 .. :try_end_0} :catchall_0

    :catchall_0
    move-exception v0

    .line 378882
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/Throwable;)V

    .line 378883
    :cond_0
    :goto_0
    iput-object v3, p0, LX/3ZK;->A0o:Ljava/lang/Object;

    .line 378884
    iget-object v1, p0, LX/3ZK;->A0p:Ljava/lang/Object;

    if-eqz v1, :cond_1

    .line 378885
    sget v0, Landroid/os/Build$VERSION;->SDK_INT:I

    if-lt v0, v2, :cond_1

    .line 378886
    :try_start_1
    check-cast v1, Landroid/media/audiofx/NoiseSuppressor;

    .line 378887
    invoke-virtual {v1}, Landroid/media/audiofx/NoiseSuppressor;->release()V

    goto :goto_1
    :try_end_1
    .catchall {:try_start_1 .. :try_end_1} :catchall_1

    :catchall_1
    move-exception v0

    .line 378888
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/Throwable;)V

    .line 378889
    :cond_1
    :goto_1
    iput-object v3, p0, LX/3ZK;->A0p:Ljava/lang/Object;

    return-void
.end method

.method public final A0G()V
    .locals 2

    .line 378890
    invoke-static {}, LX/00A;->A01()V

    const/4 v1, 0x0

    .line 378891
    :try_start_0
    iget-object v0, p0, LX/3ZK;->A0P:Landroid/os/PowerManager$WakeLock;

    if-eqz v0, :cond_0

    const-string v0, "voip/service/releaseProximityWakeLock"

    .line 378892
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 378893
    iget-object v0, p0, LX/3ZK;->A0P:Landroid/os/PowerManager$WakeLock;

    invoke-virtual {v0}, Landroid/os/PowerManager$WakeLock;->release()V

    .line 378894
    iput-object v1, p0, LX/3ZK;->A0P:Landroid/os/PowerManager$WakeLock;

    goto :goto_0
    :try_end_0
    .catch Ljava/lang/Exception; {:try_start_0 .. :try_end_0} :catch_0

    :catch_0
    move-exception v0

    .line 378895
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/Throwable;)V

    .line 378896
    iput-object v1, p0, LX/3ZK;->A0P:Landroid/os/PowerManager$WakeLock;

    .line 378897
    :cond_0
    :goto_0
    iget-object v0, p0, LX/3ZK;->A0V:LX/38w;

    invoke-virtual {v0, v1}, LX/38w;->A00(LX/38v;)V

    return-void
.end method

.method public final A0H()V
    .locals 2

    .line 378898
    invoke-virtual {p0}, LX/3ZK;->A0G()V

    .line 378899
    invoke-static {}, LX/00A;->A01()V

    const/4 v1, 0x0

    .line 378900
    :try_start_0
    iget-object v0, p0, LX/3ZK;->A0O:Landroid/os/PowerManager$WakeLock;

    if-eqz v0, :cond_0

    const-string v0, "voip/service/releasePartialWakeLock"

    .line 378901
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 378902
    iget-object v0, p0, LX/3ZK;->A0O:Landroid/os/PowerManager$WakeLock;

    invoke-virtual {v0}, Landroid/os/PowerManager$WakeLock;->release()V

    .line 378903
    iput-object v1, p0, LX/3ZK;->A0O:Landroid/os/PowerManager$WakeLock;

    return-void
    :try_end_0
    .catch Ljava/lang/Exception; {:try_start_0 .. :try_end_0} :catch_0

    :catch_0
    move-exception v0

    .line 378904
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/Throwable;)V

    .line 378905
    iput-object v1, p0, LX/3ZK;->A0O:Landroid/os/PowerManager$WakeLock;

    :cond_0
    return-void
.end method

.method public final A0I()V
    .locals 3

    .line 378906
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voip/service/resetAudioManager "

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, p0}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 378907
    iget-object v1, p0, LX/3ZK;->A1y:LX/3Co;

    .line 378908
    iget-object v0, v1, LX/3Co;->A0A:LX/011;

    invoke-virtual {v0}, LX/011;->A08()Landroid/media/AudioManager;

    move-result-object v0

    const/4 v2, 0x0

    if-eqz v0, :cond_0

    .line 378909
    invoke-virtual {v0, v2}, Landroid/media/AudioManager;->setSpeakerphoneOn(Z)V

    :cond_0
    const/4 v0, 0x0

    .line 378910
    invoke-virtual {v1, v2, v0}, LX/3Co;->A05(ZLcom/whatsapp/voipcalling/CallInfo;)V

    const/4 v0, 0x2

    .line 378911
    iput v0, v1, LX/3Co;->A00:I

    .line 378912
    iget-object v0, p0, LX/3ZK;->A1Z:LX/011;

    invoke-virtual {v0}, LX/011;->A08()Landroid/media/AudioManager;

    move-result-object v1

    if-eqz v1, :cond_1

    .line 378913
    :try_start_0
    invoke-virtual {v1, v2}, Landroid/media/AudioManager;->setMode(I)V

    goto :goto_0
    :try_end_0
    .catch Ljava/lang/Exception; {:try_start_0 .. :try_end_0} :catch_0

    :catch_0
    move-exception v0

    .line 378914
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/Throwable;)V

    :cond_1
    :goto_0
    if-eqz v1, :cond_2

    .line 378915
    sget-object v0, LX/3ZK;->A2E:Ljava/lang/Object;

    check-cast v0, Landroid/media/AudioManager$OnAudioFocusChangeListener;

    invoke-virtual {v1, v0}, Landroid/media/AudioManager;->abandonAudioFocus(Landroid/media/AudioManager$OnAudioFocusChangeListener;)I

    :cond_2
    return-void
.end method

.method public final A0J()V
    .locals 3

    .line 378916
    new-instance v2, Landroid/graphics/Point;

    invoke-direct {v2}, Landroid/graphics/Point;-><init>()V

    .line 378917
    iget-object v1, p0, LX/3ZK;->A1F:Landroid/content/Context;

    const-string v0, "window"

    .line 378918
    invoke-virtual {v1, v0}, Landroid/content/Context;->getSystemService(Ljava/lang/String;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Landroid/view/WindowManager;

    .line 378919
    invoke-static {v0}, LX/00A;->A05(Ljava/lang/Object;)V

    .line 378920
    invoke-interface {v0}, Landroid/view/WindowManager;->getDefaultDisplay()Landroid/view/Display;

    move-result-object v0

    invoke-virtual {v0, v2}, Landroid/view/Display;->getSize(Landroid/graphics/Point;)V

    .line 378921
    iget v1, v2, Landroid/graphics/Point;->x:I

    iget v0, v2, Landroid/graphics/Point;->y:I

    invoke-static {v1, v0}, Lcom/whatsapp/voipcalling/Voip;->setScreenSize(II)I

    return-void
.end method

.method public A0K(J)V
    .locals 2

    const-string v0, "VoiceService/delayShowingIncomingCall delay = "

    .line 378922
    invoke-static {v0, p1, p2}, LX/007;->A0i(Ljava/lang/String;J)V

    .line 378923
    iget-object v0, p0, LX/3ZK;->A0L:Landroid/os/Handler;

    const/4 v1, 0x1

    invoke-virtual {v0, v1}, Landroid/os/Handler;->removeMessages(I)V

    .line 378924
    iget-object v0, p0, LX/3ZK;->A0L:Landroid/os/Handler;

    invoke-virtual {v0, v1, p1, p2}, Landroid/os/Handler;->sendEmptyMessageDelayed(IJ)Z

    return-void
.end method

.method public final A0L(Lcom/whatsapp/fieldstats/events/WamCall;Lcom/whatsapp/jid/UserJid;Ljava/lang/Long;Ljava/lang/Integer;Ljava/lang/Integer;Ljava/lang/Integer;Ljava/lang/String;Ljava/lang/String;)V
    .locals 9

    .line 378925
    iget-object v0, p0, LX/3ZK;->A1Y:LX/03a;

    const/4 v7, 0x1

    .line 378926
    invoke-virtual {v0, v7}, LX/03a;->A03(Z)I

    move-result v1

    const/4 v2, 0x2

    const/4 v8, 0x3

    if-nez v1, :cond_4

    const/4 v0, 0x3

    .line 378927
    :cond_0
    :goto_0
    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v0

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->callNetwork:Ljava/lang/Integer;

    .line 378928
    iget-object v0, p0, LX/3ZK;->A1Y:LX/03a;

    invoke-virtual {v0}, LX/03a;->A04()Landroid/net/NetworkInfo;

    move-result-object v0

    if-eqz v0, :cond_1

    .line 378929
    invoke-virtual {v0}, Landroid/net/NetworkInfo;->getSubtype()I

    move-result v0

    int-to-long v0, v0

    invoke-static {v0, v1}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v0

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->callNetworkSubtype:Ljava/lang/Long;

    .line 378930
    :cond_1
    iget-object v1, p0, LX/3ZK;->A1W:LX/0BJ;

    .line 378931
    iget-boolean v0, v1, LX/0BJ;->A02:Z

    if-eqz v0, :cond_2

    .line 378932
    invoke-static {v8}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v0

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->xmppStatus:Ljava/lang/Integer;

    .line 378933
    :goto_1
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->A08()Z

    move-result v0

    invoke-static {v0}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v0

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->builtinAecAvailable:Ljava/lang/Boolean;

    .line 378934
    sget v0, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v2, 0x10

    const/4 v1, 0x0

    if-lt v0, v2, :cond_5

    goto :goto_2

    .line 378935
    :cond_2
    iget-boolean v0, v1, LX/0BJ;->A03:Z

    if-eqz v0, :cond_3

    .line 378936
    invoke-static {v2}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v0

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->xmppStatus:Ljava/lang/Integer;

    goto :goto_1

    .line 378937
    :cond_3
    invoke-static {v7}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v0

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->xmppStatus:Ljava/lang/Integer;

    goto :goto_1

    .line 378938
    :cond_4
    const/4 v0, 0x1

    if-ne v1, v7, :cond_0

    const/4 v0, 0x2

    goto :goto_0

    .line 378939
    :goto_2
    :try_start_0
    invoke-static {}, Landroid/media/audiofx/AutomaticGainControl;->isAvailable()Z

    move-result v0

    goto :goto_3
    :try_end_0
    .catchall {:try_start_0 .. :try_end_0} :catchall_0

    :catchall_0
    move-exception v0

    .line 378940
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/Throwable;)V

    :cond_5
    const/4 v0, 0x0

    .line 378941
    :goto_3
    invoke-static {v0}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v0

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->builtinAgcAvailable:Ljava/lang/Boolean;

    .line 378942
    sget v0, Landroid/os/Build$VERSION;->SDK_INT:I

    if-lt v0, v2, :cond_6

    .line 378943
    :try_start_1
    invoke-static {}, Landroid/media/audiofx/NoiseSuppressor;->isAvailable()Z

    move-result v1

    goto :goto_4
    :try_end_1
    .catchall {:try_start_1 .. :try_end_1} :catchall_1

    :catchall_1
    move-exception v0

    .line 378944
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/Throwable;)V

    .line 378945
    :cond_6
    :goto_4
    invoke-static {v1}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v0

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->builtinNsAvailable:Ljava/lang/Boolean;

    .line 378946
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 378947
    iget-object v1, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    const/4 v2, 0x0

    const-string v0, "aec_implementor"

    invoke-interface {v1, v0, v2}, Landroid/content/SharedPreferences;->getString(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    .line 378948
    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->builtinAecImplementor:Ljava/lang/String;

    .line 378949
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 378950
    iget-object v1, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    const-string v0, "aec_uuid"

    invoke-interface {v1, v0, v2}, Landroid/content/SharedPreferences;->getString(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v0

    .line 378951
    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->builtinAecUuid:Ljava/lang/String;

    .line 378952
    iput-object p3, p1, Lcom/whatsapp/fieldstats/events/WamCall;->callOfferElapsedT:Ljava/lang/Long;

    .line 378953
    iput-object p4, p1, Lcom/whatsapp/fieldstats/events/WamCall;->callFromUi:Ljava/lang/Integer;

    .line 378954
    iput-object p6, p1, Lcom/whatsapp/fieldstats/events/WamCall;->callWakeupSource:Ljava/lang/Integer;

    .line 378955
    move-object/from16 v0, p7

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->callPeerPlatform:Ljava/lang/String;

    .line 378956
    move-object/from16 v0, p8

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->callPeerAppVersion:Ljava/lang/String;

    const-wide/16 v5, 0x0

    if-eqz p2, :cond_b

    .line 378957
    iget-object v0, p0, LX/3ZK;->A1Q:LX/0IR;

    .line 378958
    iget-object v0, v0, LX/0IR;->A04:Ljava/util/HashMap;

    invoke-virtual {v0, p2}, Ljava/util/HashMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, LX/1bq;

    if-nez v0, :cond_a

    const-wide/16 v3, 0x0

    .line 378959
    :goto_5
    cmp-long v0, v3, v5

    if-nez v0, :cond_8

    const/4 v0, 0x4

    .line 378960
    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v0

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->peerXmppStatus:Ljava/lang/Integer;

    .line 378961
    :goto_6
    if-eqz p5, :cond_7

    .line 378962
    invoke-virtual {p5}, Ljava/lang/Integer;->longValue()J

    move-result-wide v0

    invoke-static {v0, v1}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v0

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->callAndroidAudioMode:Ljava/lang/Long;

    .line 378963
    :cond_7
    sget-boolean v0, LX/00e;->A1u:Z

    invoke-static {v0}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v0

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->longConnect:Ljava/lang/Boolean;

    goto :goto_7

    .line 378964
    :cond_8
    const-wide/16 v5, 0x1

    cmp-long v0, v3, v5

    if-nez v0, :cond_9

    .line 378965
    invoke-static {v8}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v0

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->peerXmppStatus:Ljava/lang/Integer;

    goto :goto_6

    .line 378966
    :cond_9
    invoke-static {v7}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v0

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->peerXmppStatus:Ljava/lang/Integer;

    goto :goto_6

    .line 378967
    :cond_a
    iget-wide v3, v0, LX/1bq;->A02:J

    goto :goto_5

    .line 378968
    :cond_b
    const-wide/16 v3, 0x0

    goto :goto_5

    .line 378969
    :goto_7
    :try_start_2
    invoke-static {}, Ljava/lang/Runtime;->getRuntime()Ljava/lang/Runtime;

    move-result-object v0

    invoke-virtual {v0}, Ljava/lang/Runtime;->availableProcessors()I

    move-result v0

    int-to-long v0, v0

    invoke-static {v0, v1}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v0

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->numberOfProcessors:Ljava/lang/Long;

    goto :goto_8
    :try_end_2
    .catchall {:try_start_2 .. :try_end_2} :catchall_2

    .line 378970
    :catchall_2
    iput-object v2, p1, Lcom/whatsapp/fieldstats/events/WamCall;->numberOfProcessors:Ljava/lang/Long;

    .line 378971
    :goto_8
    sget-boolean v0, LX/00e;->A1y:Z

    invoke-static {v0}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v0

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->callAndrGcmFgEnabled:Ljava/lang/Boolean;

    .line 378972
    sget v0, Landroid/os/Build$VERSION;->SDK_INT:I

    int-to-long v0, v0

    invoke-static {v0, v1}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v0

    iput-object v0, p1, Lcom/whatsapp/fieldstats/events/WamCall;->androidApiLevel:Ljava/lang/Long;

    return-void
.end method

.method public final A0M(Lcom/whatsapp/jid/DeviceJid;)V
    .locals 3

    .line 378973
    iget-object v0, p0, LX/3ZK;->A25:Ljava/util/Map;

    invoke-interface {v0, p1}, Ljava/util/Map;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v2

    check-cast v2, Ljava/lang/String;

    if-eqz v2, :cond_0

    .line 378974
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voip/sendOfferRetryRequest for jid:"

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 378975
    invoke-static {p1, v2}, Lcom/whatsapp/voipcalling/Voip;->resendOfferOnDecryptionFailure(Lcom/whatsapp/jid/DeviceJid;Ljava/lang/String;)V

    .line 378976
    iget-object v0, p0, LX/3ZK;->A25:Ljava/util/Map;

    invoke-interface {v0, p1}, Ljava/util/Map;->remove(Ljava/lang/Object;)Ljava/lang/Object;

    :cond_0
    return-void
.end method

.method public final A0N(Lcom/whatsapp/jid/DeviceJid;)V
    .locals 4

    .line 378977
    iget-object v0, p0, LX/3ZK;->A26:Ljava/util/Map;

    invoke-interface {v0, p1}, Ljava/util/Map;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Ljava/lang/Byte;

    if-eqz v3, :cond_0

    .line 378978
    invoke-virtual {v3}, Ljava/lang/Byte;->byteValue()B

    move-result v2

    if-ltz v2, :cond_0

    const/4 v0, 0x4

    if-gt v2, v0, :cond_0

    .line 378979
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voip/sendPendingRekeyRequest for jid:"

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v0, ", retry:"

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 378980
    invoke-static {p1}, LX/3ZK;->A00(Lcom/whatsapp/jid/Jid;)Ljava/lang/String;

    move-result-object v0

    invoke-static {v0, v2}, Lcom/whatsapp/voipcalling/Voip;->sendRekeyRequest(Ljava/lang/String;I)V

    :cond_0
    return-void
.end method

.method public final A0O(Lcom/whatsapp/jid/Jid;Ljava/lang/String;Z)V
    .locals 6

    if-eqz p2, :cond_0

    .line 378981
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voip/sendPendingCallOfferStanza jid="

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v0, " callId="

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, p2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v0, " callTerminated="

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, p3}, Ljava/lang/StringBuilder;->append(Z)Ljava/lang/StringBuilder;

    const-string v0, " pendingCallOfferStanza=("

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    iget-object v0, p0, LX/3ZK;->A29:LX/3Bx;

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v0, "), this = "

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, p0}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 378982
    :cond_0
    iget-object v5, p0, LX/3ZK;->A29:LX/3Bx;

    if-eqz v5, :cond_3

    .line 378983
    iget-object v0, v5, LX/3Bx;->A04:Ljava/lang/String;

    invoke-virtual {v0, p2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_3

    .line 378984
    iget-object v1, v5, LX/3Bx;->A01:Lcom/whatsapp/jid/Jid;

    instance-of v0, v1, Lcom/whatsapp/jid/DeviceJid;

    if-eqz v0, :cond_1

    check-cast v1, Lcom/whatsapp/jid/DeviceJid;

    .line 378985
    iget-object v1, v1, Lcom/whatsapp/jid/DeviceJid;->userJid:Lcom/whatsapp/jid/UserJid;

    .line 378986
    :cond_1
    instance-of v0, p1, Lcom/whatsapp/jid/DeviceJid;

    if-eqz v0, :cond_2

    check-cast p1, Lcom/whatsapp/jid/DeviceJid;

    .line 378987
    iget-object p1, p1, Lcom/whatsapp/jid/DeviceJid;->userJid:Lcom/whatsapp/jid/UserJid;

    .line 378988
    :cond_2
    invoke-virtual {v1, p1}, Lcom/whatsapp/jid/Jid;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_3

    const/4 v4, 0x0

    if-eqz p3, :cond_4

    .line 378989
    invoke-static {v5, v4}, LX/0OQ;->A0E(LX/3Bx;Ljava/util/Map;)Lcom/whatsapp/protocol/VoipStanzaChildNode;

    move-result-object v3

    .line 378990
    new-instance v2, LX/3Bx;

    iget-object v1, v5, LX/3Bx;->A01:Lcom/whatsapp/jid/Jid;

    iget-object v0, v5, LX/3Bx;->A04:Ljava/lang/String;

    .line 378991
    invoke-direct {v2, v1, v0, v3, v4}, LX/3Bx;-><init>(Lcom/whatsapp/jid/Jid;Ljava/lang/String;Lcom/whatsapp/protocol/VoipStanzaChildNode;Ljava/lang/String;)V

    .line 378992
    :goto_0
    iput-object v4, p0, LX/3ZK;->A29:LX/3Bx;

    .line 378993
    invoke-virtual {p0, v2}, LX/3ZK;->A0W(LX/3Bx;)V

    :cond_3
    return-void

    .line 378994
    :cond_4
    move-object v2, v5

    goto :goto_0
.end method

.method public final A0P(Lcom/whatsapp/jid/UserJid;ILjava/lang/String;)V
    .locals 3

    .line 378995
    new-instance v2, Ljava/util/ArrayList;

    const/4 v0, 0x1

    invoke-direct {v2, v0}, Ljava/util/ArrayList;-><init>(I)V

    .line 378996
    invoke-virtual {v2, p1}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z

    .line 378997
    iget-object v0, p0, LX/3ZK;->A1O:LX/04f;

    new-instance v1, LX/3B7;

    invoke-direct {v1, p0, v2, p2, p3}, LX/3B7;-><init>(LX/3ZK;Ljava/util/ArrayList;ILjava/lang/String;)V

    .line 378998
    iget-object v0, v0, LX/04f;->A02:Landroid/os/Handler;

    invoke-virtual {v0, v1}, Landroid/os/Handler;->post(Ljava/lang/Runnable;)Z

    return-void
.end method

.method public final A0Q(Lcom/whatsapp/jid/UserJid;[JZ)V
    .locals 7

    const-string v0, "voip/vibrate"

    .line 378999
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    if-nez p1, :cond_0

    const-string v0, "voip/vibrate/error/peer_jid_is_null call must have been finished"

    .line 379000
    invoke-static {v0}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;)V

    return-void

    .line 379001
    :cond_0
    iget-object v0, p0, LX/3ZK;->A1E:[J

    if-eqz v0, :cond_1

    return-void

    .line 379002
    :cond_1
    iget-object v0, p0, LX/3ZK;->A1h:LX/04y;

    invoke-virtual {v0, p1}, LX/04y;->A0B(LX/01W;)LX/052;

    move-result-object v1

    .line 379003
    iget-object v0, p0, LX/3ZK;->A1n:LX/0Cy;

    invoke-virtual {v0, v1}, LX/0Cy;->A0G(LX/052;)Z

    move-result v0

    if-eqz v0, :cond_2

    const-string v0, "VoiceService/playRingtone Silencing vibration for DND"

    .line 379004
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    return-void

    .line 379005
    :cond_2
    iget-object v0, p0, LX/3ZK;->A1Z:LX/011;

    invoke-virtual {v0}, LX/011;->A08()Landroid/media/AudioManager;

    move-result-object v1

    if-eqz v1, :cond_5

    .line 379006
    invoke-virtual {v1}, Landroid/media/AudioManager;->getRingerMode()I

    move-result v0

    const/4 v5, 0x1

    const/4 v2, 0x2

    if-eq v0, v2, :cond_3

    .line 379007
    invoke-virtual {v1}, Landroid/media/AudioManager;->getRingerMode()I

    move-result v0

    if-ne v0, v5, :cond_5

    .line 379008
    :cond_3
    iget-object v0, p0, LX/3ZK;->A1J:LX/0Cl;

    invoke-virtual {v0, p1}, LX/0Cl;->A07(LX/01W;)LX/0Cq;

    move-result-object v0

    .line 379009
    invoke-virtual {v0}, LX/0Cq;->A03()Ljava/lang/String;

    move-result-object v4

    if-eqz v4, :cond_5

    const-string v0, "0"

    .line 379010
    invoke-virtual {v4, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-nez v0, :cond_5

    const/4 v1, -0x1

    const/4 v3, 0x0

    if-eqz p2, :cond_6

    .line 379011
    iput-object p2, p0, LX/3ZK;->A1E:[J

    .line 379012
    :goto_0
    iget-object v0, p0, LX/3ZK;->A1E:[J

    if-eqz v0, :cond_5

    .line 379013
    iget-object v2, p0, LX/3ZK;->A1F:Landroid/content/Context;

    const-string v0, "vibrator"

    .line 379014
    invoke-virtual {v2, v0}, Landroid/content/Context;->getSystemService(Ljava/lang/String;)Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Landroid/os/Vibrator;

    .line 379015
    invoke-static {v3}, LX/00A;->A05(Ljava/lang/Object;)V

    .line 379016
    sget v2, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v0, 0x1a

    if-lt v2, v0, :cond_b

    .line 379017
    new-instance v2, Landroid/media/AudioAttributes$Builder;

    invoke-direct {v2}, Landroid/media/AudioAttributes$Builder;-><init>()V

    const/4 v0, 0x4

    .line 379018
    invoke-virtual {v2, v0}, Landroid/media/AudioAttributes$Builder;->setContentType(I)Landroid/media/AudioAttributes$Builder;

    move-result-object v2

    const/4 v0, 0x6

    .line 379019
    invoke-virtual {v2, v0}, Landroid/media/AudioAttributes$Builder;->setUsage(I)Landroid/media/AudioAttributes$Builder;

    move-result-object v0

    .line 379020
    invoke-virtual {v0}, Landroid/media/AudioAttributes$Builder;->build()Landroid/media/AudioAttributes;

    move-result-object v2

    .line 379021
    iget-object v0, p0, LX/3ZK;->A1E:[J

    if-eqz p3, :cond_4

    const/4 v1, 0x0

    :cond_4
    invoke-static {v0, v1}, Landroid/os/VibrationEffect;->createWaveform([JI)Landroid/os/VibrationEffect;

    move-result-object v0

    .line 379022
    invoke-virtual {v3, v0, v2}, Landroid/os/Vibrator;->vibrate(Landroid/os/VibrationEffect;Landroid/media/AudioAttributes;)V

    .line 379023
    :cond_5
    return-void

    .line 379024
    :cond_6
    invoke-virtual {v4}, Ljava/lang/String;->hashCode()I

    move-result v0

    packed-switch v0, :pswitch_data_0

    :goto_1
    const/4 v6, -0x1

    :cond_7
    const/4 v0, 0x3

    if-eqz v6, :cond_a

    if-eq v6, v5, :cond_9

    if-eq v6, v2, :cond_8

    const-string v0, "voip/ringtone/vibrate/UNKNOWN"

    .line 379025
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/String;)V

    .line 379026
    new-instance v2, Ljava/lang/StringBuilder;

    const-string v0, "unknown vibrate preference "

    invoke-direct {v2, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v2, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    .line 379027
    invoke-static {v3, v0}, LX/00A;->A0A(ZLjava/lang/String;)V

    goto :goto_0

    .line 379028
    :pswitch_0
    const-string v0, "1"

    invoke-virtual {v4, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    const/4 v6, 0x0

    if-nez v0, :cond_7

    goto :goto_1

    :pswitch_1
    const-string v0, "2"

    invoke-virtual {v4, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    const/4 v6, 0x1

    if-nez v0, :cond_7

    goto :goto_1

    :pswitch_2
    const-string v0, "3"

    invoke-virtual {v4, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    const/4 v6, 0x2

    if-nez v0, :cond_7

    goto :goto_1

    .line 379029
    :cond_8
    new-array v0, v0, [J

    .line 379030
    fill-array-data v0, :array_0

    iput-object v0, p0, LX/3ZK;->A1E:[J

    const-string v0, "voip/ringtone/vibrate/LONG"

    .line 379031
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    goto/16 :goto_0

    :cond_9
    new-array v0, v0, [J

    .line 379032
    fill-array-data v0, :array_1

    iput-object v0, p0, LX/3ZK;->A1E:[J

    const-string v0, "voip/ringtone/vibrate/SHORT"

    .line 379033
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    goto/16 :goto_0

    :cond_a
    new-array v0, v0, [J

    .line 379034
    fill-array-data v0, :array_2

    iput-object v0, p0, LX/3ZK;->A1E:[J

    const-string v0, "voip/ringtone/vibrate/DEFAULT"

    .line 379035
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    goto/16 :goto_0

    .line 379036
    :cond_b
    iget-object v0, p0, LX/3ZK;->A1E:[J

    if-eqz p3, :cond_c

    const/4 v1, 0x0

    :cond_c
    invoke-virtual {v3, v0, v1}, Landroid/os/Vibrator;->vibrate([JI)V

    return-void

    :array_0
    .array-data 8
        0x0
        0x2ee
        0xfa
    .end array-data

    :array_1
    .array-data 8
        0x0
        0x12c
        0xc8
    .end array-data

    :array_2
    .array-data 8
        0x0
        0x2ee
        0x5dc
    .end array-data

    :pswitch_data_0
    .packed-switch 0x31
        :pswitch_0
        :pswitch_1
        :pswitch_2
    .end packed-switch
.end method

.method public final A0R(Lcom/whatsapp/voipcalling/CallInfo;)V
    .locals 5

    .line 379037
    iget-boolean v0, p0, LX/3ZK;->A0x:Z

    const/4 v4, 0x0

    if-eqz v0, :cond_0

    iget-boolean v0, p0, LX/3ZK;->A0y:Z

    const/4 v3, 0x1

    if-eqz v0, :cond_1

    :cond_0
    const/4 v3, 0x0

    :cond_1
    iput-boolean v3, p0, LX/3ZK;->A0x:Z

    .line 379038
    iget-object v0, p0, LX/3ZK;->A1y:LX/3Co;

    .line 379039
    iget v2, v0, LX/3Co;->A00:I

    const/4 v1, 0x2

    const/4 v0, 0x0

    if-ne v2, v1, :cond_2

    const/4 v0, 0x1

    :cond_2
    if-eqz v0, :cond_4

    .line 379040
    invoke-static {p1}, LX/0OQ;->A0p(Lcom/whatsapp/voipcalling/CallInfo;)Z

    move-result v0

    if-nez v0, :cond_4

    if-nez v3, :cond_4

    .line 379041
    iget-boolean v0, p1, Lcom/whatsapp/voipcalling/CallInfo;->isCaller:Z

    .line 379042
    if-nez v0, :cond_3

    .line 379043
    iget-object v1, p1, Lcom/whatsapp/voipcalling/CallInfo;->callState:Lcom/whatsapp/voipcalling/Voip$CallState;

    .line 379044
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->RECEIVED_CALL:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-eq v1, v0, :cond_4

    .line 379045
    :cond_3
    invoke-virtual {p1}, Lcom/whatsapp/voipcalling/CallInfo;->isSelfRequestingUpgrade()Z

    move-result v0

    if-nez v0, :cond_4

    const/4 v4, 0x1

    .line 379046
    :cond_4
    invoke-virtual {p1}, Lcom/whatsapp/voipcalling/CallInfo;->isPeerRequestingUpgrade()Z

    move-result v0

    if-nez v0, :cond_5

    iget-boolean v0, p0, LX/3ZK;->A19:Z

    if-eqz v0, :cond_6

    :cond_5
    const/4 v4, 0x1

    :cond_6
    if-eqz v4, :cond_b

    .line 379047
    invoke-static {}, LX/00A;->A01()V

    .line 379048
    iget-object v0, p0, LX/3ZK;->A0P:Landroid/os/PowerManager$WakeLock;

    if-nez v0, :cond_a

    const/4 v2, 0x0

    .line 379049
    :try_start_0
    sget v1, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v0, 0x15

    const/4 v4, -0x1

    if-lt v1, v0, :cond_7

    const/16 v3, 0x20

    goto :goto_1
    :try_end_0
    .catch Ljava/lang/Exception; {:try_start_0 .. :try_end_0} :catch_2

    .line 379050
    :cond_7
    :try_start_1
    const-class v1, Landroid/os/PowerManager;

    const-string v0, "PROXIMITY_SCREEN_OFF_WAKE_LOCK"

    .line 379051
    invoke-virtual {v1, v0}, Ljava/lang/Class;->getDeclaredField(Ljava/lang/String;)Ljava/lang/reflect/Field;

    move-result-object v0

    .line 379052
    invoke-virtual {v0, v2}, Ljava/lang/reflect/Field;->getInt(Ljava/lang/Object;)I

    move-result v3

    goto :goto_1
    :try_end_1
    .catch Ljava/lang/NoSuchFieldException; {:try_start_1 .. :try_end_1} :catch_1
    .catch Ljava/lang/IllegalAccessException; {:try_start_1 .. :try_end_1} :catch_0
    .catch Ljava/lang/Exception; {:try_start_1 .. :try_end_1} :catch_2

    :catch_0
    move-exception v1

    :try_start_2
    const-string v0, "unable to access PROXIMITY_SCREEN_OFF_WAKE_LOCK field in PowerManager"

    .line 379053
    invoke-static {v0, v1}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;Ljava/lang/Throwable;)V

    goto :goto_0

    :catch_1
    move-exception v1

    const-string v0, "no PROXIMITY_SCREEN_OFF_WAKE_LOCK field in PowerManager"

    .line 379054
    invoke-static {v0, v1}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;Ljava/lang/Throwable;)V

    :goto_0
    const/4 v3, -0x1

    .line 379055
    :goto_1
    iget-object v0, p0, LX/3ZK;->A1Z:LX/011;

    invoke-virtual {v0}, LX/011;->A0B()Landroid/os/PowerManager;

    move-result-object v1

    if-nez v1, :cond_8

    const-string v0, "voip/service/acquireProximityWakeLock pm=null"

    .line 379056
    invoke-static {v0}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;)V

    goto :goto_2

    .line 379057
    :cond_8
    iget-object v0, p0, LX/3ZK;->A0P:Landroid/os/PowerManager$WakeLock;

    if-nez v0, :cond_9

    if-eq v3, v4, :cond_9

    const-string v0, "VoiceService Proximity"

    .line 379058
    invoke-static {v1, v3, v0}, LX/02V;->A0L(Landroid/os/PowerManager;ILjava/lang/String;)Landroid/os/PowerManager$WakeLock;

    move-result-object v0

    iput-object v0, p0, LX/3ZK;->A0P:Landroid/os/PowerManager$WakeLock;

    .line 379059
    if-eqz v0, :cond_9

    .line 379060
    invoke-virtual {v0}, Landroid/os/PowerManager$WakeLock;->acquire()V

    const-string v0, "voip/service/acquireProximityWakeLock acquired"

    .line 379061
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    goto :goto_2
    :try_end_2
    .catch Ljava/lang/Exception; {:try_start_2 .. :try_end_2} :catch_2

    :catch_2
    move-exception v0

    .line 379062
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/Throwable;)V

    .line 379063
    iput-object v2, p0, LX/3ZK;->A0P:Landroid/os/PowerManager$WakeLock;

    .line 379064
    :cond_9
    :goto_2
    iget-object v1, p0, LX/3ZK;->A0V:LX/38w;

    iget-object v0, p0, LX/3ZK;->A0U:LX/38v;

    invoke-virtual {v1, v0}, LX/38w;->A00(LX/38v;)V

    :cond_a
    const-string v0, "voip/adjustProximitySensor: on"

    .line 379065
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379066
    return-void

    .line 379067
    :cond_b
    invoke-virtual {p0}, LX/3ZK;->A0G()V

    const-string v0, "voip/adjustProximitySensor: off"

    .line 379068
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    return-void
.end method

.method public final A0S(Lcom/whatsapp/voipcalling/CallInfo;)V
    .locals 12

    .line 379069
    invoke-static {}, LX/00A;->A01()V

    .line 379070
    invoke-static {p1}, Lcom/whatsapp/voipcalling/Voip;->A09(Lcom/whatsapp/voipcalling/CallInfo;)Z

    move-result v0

    const/4 v3, 0x1

    invoke-static {v3}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v10

    if-nez v0, :cond_0

    const-string v0, "voip/commonHandler/HANDLER_WHAT_START_ACTIVITY_FOR_INCOMING_CALL no active call"

    .line 379071
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/String;)V

    return-void

    :cond_0
    const-string v0, "voip/service/startActivityForIncomingCall Enter"

    .line 379072
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379073
    iget-object v0, p1, Lcom/whatsapp/voipcalling/CallInfo;->callWaitingInfo:LX/20k;

    .line 379074
    iget v0, v0, LX/20k;->A01:I

    const/4 v2, 0x0

    const/4 v5, 0x0

    if-ne v0, v3, :cond_1

    const/4 v5, 0x1

    .line 379075
    :cond_1
    iget-object v4, p1, Lcom/whatsapp/voipcalling/CallInfo;->initialPeerJid:Lcom/whatsapp/jid/UserJid;

    .line 379076
    sget v1, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v0, 0x17

    if-lt v1, v0, :cond_7

    if-nez v5, :cond_6

    const/16 v0, 0x1d

    if-ge v1, v0, :cond_6

    .line 379077
    iget-object v0, p0, LX/3ZK;->A1h:LX/04y;

    invoke-virtual {v0, v4}, LX/04y;->A0A(LX/01W;)LX/052;

    move-result-object v1

    .line 379078
    iget-object v0, p0, LX/3ZK;->A1J:LX/0Cl;

    .line 379079
    invoke-virtual {v0, v4}, LX/0Cl;->A07(LX/01W;)LX/0Cq;

    move-result-object v0

    invoke-virtual {v0}, LX/0Cq;->A0A()Z

    move-result v0

    if-nez v0, :cond_2

    .line 379080
    invoke-virtual {p0, v1}, LX/3ZK;->A0n(LX/052;)Z

    move-result v1

    const/4 v0, 0x0

    if-eqz v1, :cond_3

    :cond_2
    const/4 v0, 0x1

    :cond_3
    if-nez v0, :cond_4

    .line 379081
    iget-object v0, p0, LX/3ZK;->A1G:LX/0DK;

    .line 379082
    iget-boolean v0, v0, LX/0DK;->A00:Z

    const/4 v4, 0x0

    if-eqz v0, :cond_5

    :cond_4
    const/4 v4, 0x1

    :cond_5
    :goto_0
    if-nez v4, :cond_b

    .line 379083
    iget-object v1, p0, LX/3ZK;->A1H:LX/0J7;

    const-string v0, "voip/notifyShowingIncomingCallUI"

    .line 379084
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379085
    invoke-static {}, LX/00A;->A01()V

    .line 379086
    iget-object v0, v1, LX/00o;->A00:LX/00p;

    invoke-virtual {v0}, LX/00p;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_1
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v0

    if-eqz v0, :cond_8

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v0

    check-cast v0, LX/0O8;

    .line 379087
    invoke-virtual {v0}, LX/0O8;->A00()V

    goto :goto_1

    .line 379088
    :cond_6
    const/4 v4, 0x1

    goto :goto_0

    :cond_7
    const/4 v4, 0x0

    goto :goto_0

    .line 379089
    :cond_8
    iget-object v6, p0, LX/3ZK;->A1F:Landroid/content/Context;

    const/4 v7, 0x0

    iget-object v0, p0, LX/3ZK;->A1G:LX/0DK;

    .line 379090
    iget-boolean v0, v0, LX/0DK;->A00:Z

    xor-int/2addr v0, v3

    .line 379091
    invoke-static {v0}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v8

    const/4 v9, 0x0

    .line 379092
    move-object v11, v10

    invoke-static/range {v6 .. v11}, Lcom/whatsapp/voipcalling/VoipActivityV2;->A05(Landroid/content/Context;Ljava/util/List;Ljava/lang/Boolean;Ljava/lang/Boolean;Ljava/lang/Boolean;Ljava/lang/Boolean;)Landroid/content/Intent;

    move-result-object v3

    if-eqz v5, :cond_10

    .line 379093
    iget-object v0, p1, Lcom/whatsapp/voipcalling/CallInfo;->callWaitingInfo:LX/20k;

    .line 379094
    iget-object v0, v0, LX/20k;->A02:Ljava/lang/String;

    :goto_2
    const-string v1, "call_id"

    .line 379095
    invoke-virtual {v3, v1, v0}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Ljava/lang/String;)Landroid/content/Intent;

    if-nez v5, :cond_9

    .line 379096
    iget-boolean v0, p0, LX/3ZK;->A0u:Z

    const/4 v1, 0x1

    if-nez v0, :cond_a

    :cond_9
    const/4 v1, 0x0

    :cond_a
    const-string v0, "callAccepted"

    invoke-virtual {v3, v0, v1}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Z)Landroid/content/Intent;

    .line 379097
    iget-object v0, p0, LX/3ZK;->A1F:Landroid/content/Context;

    invoke-virtual {v0, v3}, Landroid/content/Context;->startActivity(Landroid/content/Intent;)V

    :cond_b
    if-nez v5, :cond_c

    .line 379098
    iget-object v1, p1, Lcom/whatsapp/voipcalling/CallInfo;->peerJid:Lcom/whatsapp/jid/UserJid;

    .line 379099
    iget-object v0, p1, Lcom/whatsapp/voipcalling/CallInfo;->callId:Ljava/lang/String;

    .line 379100
    invoke-virtual {p0, v2, v1, v0}, LX/3ZK;->A0j(ZLcom/whatsapp/jid/UserJid;Ljava/lang/String;)V

    .line 379101
    iget-object v0, p0, LX/3ZK;->A1y:LX/3Co;

    invoke-virtual {v0, p1}, LX/3Co;->A01(Lcom/whatsapp/voipcalling/CallInfo;)V

    :cond_c
    const/4 v1, 0x2

    if-eqz v4, :cond_d

    const/4 v1, 0x1

    :cond_d
    if-eqz v5, :cond_e

    const/4 v0, 0x1

    if-nez v4, :cond_f

    :cond_e
    const/4 v0, 0x0

    .line 379102
    :cond_f
    invoke-virtual {p0, p1, v1, v0, v2}, LX/3ZK;->A0T(Lcom/whatsapp/voipcalling/CallInfo;IZZ)V

    const-string v0, "voip/service/startActivityForIncomingCall Exit"

    .line 379103
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    return-void

    .line 379104
    :cond_10
    iget-object v0, p1, Lcom/whatsapp/voipcalling/CallInfo;->callId:Ljava/lang/String;

    goto :goto_2
.end method

.method public final A0T(Lcom/whatsapp/voipcalling/CallInfo;IZZ)V
    .locals 7

    .line 379105
    invoke-static {}, LX/00A;->A01()V

    if-eqz p1, :cond_2

    .line 379106
    iget-boolean v0, p1, Lcom/whatsapp/voipcalling/CallInfo;->callEnding:Z

    .line 379107
    if-nez v0, :cond_2

    .line 379108
    iget-object v0, p1, Lcom/whatsapp/voipcalling/CallInfo;->callWaitingInfo:LX/20k;

    .line 379109
    iget v1, v0, LX/20k;->A01:I

    const/4 v0, 0x1

    if-ne v1, v0, :cond_0

    const/4 v0, 0x2

    if-ne p2, v0, :cond_0

    return-void

    .line 379110
    :cond_0
    iget-boolean v0, p0, LX/3ZK;->A13:Z

    invoke-static {p1, v0}, LX/3Bw;->A00(Lcom/whatsapp/voipcalling/CallInfo;Z)LX/3Bw;

    move-result-object v2

    .line 379111
    iget-object v1, p0, LX/3ZK;->A1s:LX/3Bv;

    iget-object v0, p0, LX/3ZK;->A1F:Landroid/content/Context;

    .line 379112
    invoke-virtual {v1, v0, p2, v2, p4}, LX/3Bv;->A02(Landroid/content/Context;ILX/3Bw;Z)Landroid/app/Notification;

    move-result-object v5

    .line 379113
    iget-boolean v0, p0, LX/3ZK;->A12:Z

    if-eqz v0, :cond_1

    const-string v0, "VoiceService/startForegroundService Background restrictions on"

    .line 379114
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379115
    iget-object v2, p0, LX/3ZK;->A1b:LX/02S;

    const/16 v1, 0x17

    const/4 v0, 0x0

    .line 379116
    invoke-virtual {v2, v0, v1, v5}, LX/02S;->A02(LX/01W;ILandroid/app/Notification;)V

    .line 379117
    return-void

    .line 379118
    :cond_1
    move-object v6, p0

    monitor-enter v6

    .line 379119
    :try_start_0
    iget-object v1, p0, LX/3ZK;->A1x:LX/0dr;

    .line 379120
    iget-object v0, v1, LX/0dr;->A01:LX/00K;

    .line 379121
    iget-object v4, v0, LX/00K;->A00:Landroid/app/Application;

    .line 379122
    iget-object v3, v1, LX/0dr;->A02:LX/0H7;

    .line 379123
    const/16 v2, 0x17

    .line 379124
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voicefgservice/start-service notifcation:"

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379125
    new-instance v1, Landroid/content/Intent;

    const-string v0, "com.whatsapp.service.VoiceFgService.START"

    invoke-direct {v1, v0}, Landroid/content/Intent;-><init>(Ljava/lang/String;)V

    const-string v0, "com.whatsapp.service.VoiceFgService.EXTRA_NOTIFICATION_ID"

    .line 379126
    invoke-virtual {v1, v0, v2}, Landroid/content/Intent;->putExtra(Ljava/lang/String;I)Landroid/content/Intent;

    move-result-object v1

    const-string v0, "com.whatsapp.service.VoiceFgService.EXTRA_STOP_FOREGROUND_STATE"

    .line 379127
    invoke-virtual {v1, v0, p3}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Z)Landroid/content/Intent;

    move-result-object v1

    .line 379128
    sput-object v5, Lcom/whatsapp/voipcalling/VoiceFGService;->A00:Landroid/app/Notification;

    .line 379129
    const-class v0, Lcom/whatsapp/voipcalling/VoiceFGService;

    invoke-virtual {v3, v4, v0, v1}, LX/0H7;->A03(Landroid/content/Context;Ljava/lang/Class;Landroid/content/Intent;)V

    .line 379130
    const/4 v0, 0x1

    .line 379131
    iput-boolean v0, p0, LX/3ZK;->A0z:Z
    :try_end_0
    .catchall {:try_start_0 .. :try_end_0} :catchall_0

    .line 379132
    monitor-exit v6

    return-void

    :catchall_0
    move-exception v0

    monitor-exit v6

    throw v0

    .line 379133
    :cond_2
    const-string v0, "do not create notification, we are not in a active call"

    .line 379134
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/String;)V

    return-void
.end method

.method public final A0U(Lcom/whatsapp/voipcalling/CallInfo;Z)V
    .locals 4

    .line 379135
    invoke-static {}, LX/00A;->A01()V

    .line 379136
    new-instance v3, Ljava/lang/StringBuilder;

    const-string v0, "voip/phone-call-in-progress-changed: "

    invoke-direct {v3, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v3, p2}, Ljava/lang/StringBuilder;->append(Z)Ljava/lang/StringBuilder;

    const/4 v2, 0x0

    if-nez p1, :cond_3

    move-object v0, v2

    .line 379137
    :goto_0
    invoke-static {v3, v0}, LX/007;->A13(Ljava/lang/StringBuilder;Ljava/lang/String;)V

    if-eqz p1, :cond_1

    .line 379138
    iget-object v1, p1, Lcom/whatsapp/voipcalling/CallInfo;->callState:Lcom/whatsapp/voipcalling/Voip$CallState;

    .line 379139
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->NONE:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-eq v1, v0, :cond_1

    if-eqz p2, :cond_2

    .line 379140
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->CALLING:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-eq v1, v0, :cond_4

    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->PRE_ACCEPT_RECEIVED:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-eq v1, v0, :cond_4

    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->RECEIVED_CALL:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-eq v1, v0, :cond_4

    .line 379141
    iget-object v0, p0, LX/3ZK;->A1y:LX/3Co;

    invoke-virtual {v0, p1}, LX/3Co;->A03(Lcom/whatsapp/voipcalling/CallInfo;)V

    .line 379142
    :goto_1
    iget-object v1, p1, Lcom/whatsapp/voipcalling/CallInfo;->callId:Ljava/lang/String;

    .line 379143
    invoke-virtual {p0, v1}, LX/3ZK;->A03(Ljava/lang/String;)LX/3CJ;

    move-result-object v1

    const/4 v0, 0x0

    if-eqz v1, :cond_0

    const/4 v0, 0x1

    .line 379144
    :cond_0
    xor-int/lit8 v0, v0, 0x1

    .line 379145
    invoke-static {p2, v0}, Lcom/whatsapp/voipcalling/Voip;->onCallInterrupted(ZZ)V

    :cond_1
    return-void

    .line 379146
    :cond_2
    iget-object v0, p0, LX/3ZK;->A1y:LX/3Co;

    invoke-virtual {v0, p1}, LX/3Co;->A02(Lcom/whatsapp/voipcalling/CallInfo;)V

    goto :goto_1

    .line 379147
    :cond_3
    const-string v0, ", call state: "

    invoke-static {v0}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v1

    .line 379148
    iget-object v0, p1, Lcom/whatsapp/voipcalling/CallInfo;->callState:Lcom/whatsapp/voipcalling/Voip$CallState;

    .line 379149
    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    goto :goto_0

    .line 379150
    :cond_4
    sget-object v0, LX/3Ce;->A08:LX/3Ce;

    invoke-static {v0, v2}, LX/3ZK;->A01(LX/3Ce;Ljava/lang/String;)V

    return-void
.end method

.method public final A0V(LX/20n;Z)V
    .locals 25

    move-object/from16 v6, p0

    .line 379151
    iget-object v2, v6, LX/3ZK;->A1g:LX/07h;

    .line 379152
    iget-object v1, v2, LX/07h;->A08:LX/0AF;

    .line 379153
    move-object/from16 v3, p1

    iget-object v0, v3, LX/20n;->A06:LX/20m;

    iget-object v0, v0, LX/20m;->A01:Lcom/whatsapp/jid/UserJid;

    .line 379154
    invoke-virtual {v1, v0}, LX/0AF;->A04(LX/01W;)LX/0N3;

    move-result-object v0

    if-eqz v0, :cond_2

    .line 379155
    new-instance v12, LX/0g3;

    iget-object v9, v2, LX/07h;->A04:LX/00T;

    iget-object v7, v2, LX/07h;->A03:LX/01A;

    .line 379156
    iget-object v0, v3, LX/20n;->A06:LX/20m;

    iget-object v5, v0, LX/20m;->A01:Lcom/whatsapp/jid/UserJid;

    const/4 v8, 0x0

    .line 379157
    new-instance v4, LX/054;

    invoke-static {v9, v7}, LX/0Eo;->A07(LX/00T;LX/01A;)Ljava/lang/String;

    move-result-object v0

    invoke-direct {v4, v5, v8, v0}, LX/054;-><init>(LX/01W;ZLjava/lang/String;)V

    .line 379158
    iget-wide v0, v3, LX/20n;->A05:J

    invoke-direct {v12, v4, v0, v1}, LX/0g3;-><init>(LX/054;J)V

    .line 379159
    new-instance v5, Ljava/util/ArrayList;

    invoke-direct {v5}, Ljava/util/ArrayList;-><init>()V

    .line 379160
    iget-object v7, v12, LX/053;->A0h:LX/054;

    .line 379161
    iget-object v1, v7, LX/054;->A00:LX/01W;

    .line 379162
    invoke-static {v1}, Lcom/whatsapp/jid/UserJid;->of(Lcom/whatsapp/jid/Jid;)Lcom/whatsapp/jid/UserJid;

    move-result-object v4

    .line 379163
    invoke-static {v4}, LX/01R;->A0R(Lcom/whatsapp/jid/Jid;)Z

    move-result v0

    if-nez v0, :cond_3

    const-string v0, "CallLog/fromFMessageMissedCall bad UserJid: "

    .line 379164
    invoke-static {v0}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v0

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/String;)V

    const/4 v4, 0x0

    .line 379165
    :cond_0
    if-eqz v4, :cond_1

    .line 379166
    invoke-virtual {v5, v4}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z

    .line 379167
    :cond_1
    invoke-virtual {v12, v5}, LX/0g6;->A10(Ljava/util/List;)V

    .line 379168
    iget-object v0, v2, LX/07h;->A09:LX/0B2;

    invoke-virtual {v0, v12}, LX/0B2;->A0J(LX/053;)V

    .line 379169
    :cond_2
    iget-object v1, v6, LX/3ZK;->A1H:LX/0J7;

    const-string v0, "voip/notifyCallMissed"

    .line 379170
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379171
    invoke-static {}, LX/00A;->A01()V

    .line 379172
    iget-object v0, v1, LX/00o;->A00:LX/00p;

    invoke-virtual {v0}, LX/00p;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_0
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v0

    if-eqz v0, :cond_4

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v0

    check-cast v0, LX/0O8;

    .line 379173
    move/from16 v2, p2

    invoke-virtual {v0, v3, v2}, LX/0O8;->A05(LX/20n;Z)V

    goto :goto_0

    .line 379174
    :cond_3
    new-instance v10, LX/20n;

    new-instance v11, LX/20m;

    iget-boolean v1, v7, LX/054;->A02:Z

    iget-object v0, v7, LX/054;->A01:Ljava/lang/String;

    invoke-direct {v11, v4, v1, v0, v8}, LX/20m;-><init>(Lcom/whatsapp/jid/UserJid;ZLjava/lang/String;I)V

    const-wide/16 v13, -0x1

    iget-wide v0, v12, LX/053;->A0E:J

    iget-boolean v7, v3, LX/20n;->A0A:Z

    const/16 v18, 0x0

    const/16 v19, 0x2

    .line 379175
    invoke-static {}, Ljava/util/Collections;->emptyList()Ljava/util/List;

    move-result-object v24

    move-object v4, v10

    const-wide/16 v20, 0x0

    const/16 v22, 0x0

    const/16 v23, 0x1

    move-wide v15, v0

    move/from16 v17, v7

    invoke-direct/range {v10 .. v24}, LX/20n;-><init>(LX/20m;LX/0g6;JJZIIJZZLjava/util/Collection;)V

    .line 379176
    iget-object v0, v3, LX/20n;->A07:Ljava/util/Map;

    invoke-interface {v0}, Ljava/util/Map;->values()Ljava/util/Collection;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/Collection;->iterator()Ljava/util/Iterator;

    move-result-object v11

    :goto_1
    invoke-interface {v11}, Ljava/util/Iterator;->hasNext()Z

    move-result v0

    if-eqz v0, :cond_0

    invoke-interface {v11}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v0

    check-cast v0, LX/20o;

    .line 379177
    iget-object v10, v4, LX/20n;->A07:Ljava/util/Map;

    iget-object v9, v0, LX/20o;->A02:Lcom/whatsapp/jid/UserJid;

    new-instance v8, LX/20o;

    .line 379178
    iget v7, v0, LX/20o;->A00:I

    invoke-direct {v8, v13, v14, v9, v7}, LX/20o;-><init>(JLcom/whatsapp/jid/UserJid;I)V

    .line 379179
    invoke-interface {v10, v9, v8}, Ljava/util/Map;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    goto :goto_1

    .line 379180
    :cond_4
    return-void
.end method

.method public final A0W(LX/3Bx;)V
    .locals 14

    .line 379181
    move-object v10, p1

    iget-object v7, p1, LX/3Bx;->A01:Lcom/whatsapp/jid/Jid;

    .line 379182
    iget-object v8, p1, LX/3Bx;->A04:Ljava/lang/String;

    .line 379183
    iget-object v11, p1, LX/3Bx;->A03:Lcom/whatsapp/protocol/VoipStanzaChildNode;

    .line 379184
    iget-object v12, p1, LX/3Bx;->A05:Ljava/lang/String;

    .line 379185
    invoke-static {v12}, Landroid/text/TextUtils;->isEmpty(Ljava/lang/CharSequence;)Z

    move-result v0

    const/4 v2, 0x1

    xor-int/lit8 v13, v0, 0x1

    if-nez v13, :cond_0

    .line 379186
    iget-object v1, p0, LX/3ZK;->A1a:LX/00T;

    iget-object v0, p0, LX/3ZK;->A1P:LX/01A;

    .line 379187
    invoke-static {v1, v0}, LX/0Eo;->A07(LX/00T;LX/01A;)Ljava/lang/String;

    move-result-object v12

    .line 379188
    :cond_0
    new-instance v9, Ljava/util/HashMap;

    invoke-direct {v9}, Ljava/util/HashMap;-><init>()V

    .line 379189
    iget-object v0, p1, LX/3Bx;->A06:Ljava/util/Map;

    invoke-interface {v0}, Ljava/util/Map;->entrySet()Ljava/util/Set;

    move-result-object v0

    invoke-interface {v0}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v4

    :cond_1
    :goto_0
    invoke-interface {v4}, Ljava/util/Iterator;->hasNext()Z

    move-result v0

    if-eqz v0, :cond_2

    invoke-interface {v4}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Ljava/util/Map$Entry;

    .line 379190
    invoke-interface {v3}, Ljava/util/Map$Entry;->getKey()Ljava/lang/Object;

    move-result-object v1

    check-cast v1, Lcom/whatsapp/jid/DeviceJid;

    .line 379191
    invoke-interface {v3}, Ljava/util/Map$Entry;->getValue()Ljava/lang/Object;

    move-result-object v0

    if-eqz v0, :cond_1

    .line 379192
    invoke-interface {v3}, Ljava/util/Map$Entry;->getValue()Ljava/lang/Object;

    move-result-object v0

    invoke-virtual {v9, v1, v0}, Ljava/util/HashMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    goto :goto_0

    .line 379193
    :cond_2
    invoke-virtual {v9}, Ljava/util/HashMap;->keySet()Ljava/util/Set;

    move-result-object v1

    .line 379194
    invoke-interface {v1}, Ljava/util/Set;->isEmpty()Z

    move-result v0

    xor-int/lit8 v6, v0, 0x1

    if-eqz v6, :cond_4

    .line 379195
    invoke-interface {v1}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :cond_3
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v0

    if-eqz v0, :cond_4

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v3

    check-cast v3, Lcom/whatsapp/jid/DeviceJid;

    .line 379196
    iget-object v0, p0, LX/3ZK;->A1t:LX/3C4;

    .line 379197
    iget-object v0, v0, LX/3C4;->A08:Ljava/util/Set;

    invoke-interface {v0, v3}, Ljava/util/Set;->contains(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_3

    .line 379198
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "VoiceService:sendPendingCallOfferStanza waiting for PreKey job finishes with "

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379199
    iput-object p1, p0, LX/3ZK;->A29:LX/3Bx;

    return-void

    .line 379200
    :cond_4
    new-instance v4, LX/3B2;

    move-object v5, p0

    invoke-direct/range {v4 .. v13}, LX/3B2;-><init>(LX/3ZK;ZLcom/whatsapp/jid/Jid;Ljava/lang/String;Ljava/util/Map;LX/3Bx;Lcom/whatsapp/protocol/VoipStanzaChildNode;Ljava/lang/String;Z)V

    if-eqz v6, :cond_6

    .line 379201
    iput-object p1, p0, LX/3ZK;->A29:LX/3Bx;

    .line 379202
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379203
    iget-object v3, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    const/4 v1, 0x0

    const-string v0, "call_start_delay"

    invoke-interface {v3, v0, v1}, Landroid/content/SharedPreferences;->getInt(Ljava/lang/String;I)I

    move-result v0

    .line 379204
    iput v0, p0, LX/3ZK;->A03:I

    .line 379205
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v1

    .line 379206
    iget v3, p0, LX/3ZK;->A03:I

    if-lez v3, :cond_5

    const/16 v0, 0xbb8

    if-ge v3, v0, :cond_5

    if-eqz v1, :cond_5

    .line 379207
    iget-object v1, v1, Lcom/whatsapp/voipcalling/CallInfo;->callState:Lcom/whatsapp/voipcalling/Voip$CallState;

    .line 379208
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->CALLING:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-ne v1, v0, :cond_5

    iget-byte v0, p1, LX/3Bx;->A00:B

    if-nez v0, :cond_5

    const-string v0, "VoiceService:sendOfferStanza with "

    .line 379209
    invoke-static {v0}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v1

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    const-string v0, " ms delay"

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379210
    iput-boolean v2, p0, LX/3ZK;->A2C:Z

    .line 379211
    iget-object v3, p0, LX/3ZK;->A0s:Ljava/util/concurrent/ScheduledExecutorService;

    iget v0, p0, LX/3ZK;->A03:I

    int-to-long v1, v0

    sget-object v0, Ljava/util/concurrent/TimeUnit;->MILLISECONDS:Ljava/util/concurrent/TimeUnit;

    invoke-interface {v3, v4, v1, v2, v0}, Ljava/util/concurrent/ScheduledExecutorService;->schedule(Ljava/lang/Runnable;JLjava/util/concurrent/TimeUnit;)Ljava/util/concurrent/ScheduledFuture;

    .line 379212
    return-void

    .line 379213
    :cond_5
    const-string v0, "VoiceService:sendOfferStanza without delay"

    .line 379214
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379215
    iget-object v0, p0, LX/3ZK;->A0s:Ljava/util/concurrent/ScheduledExecutorService;

    invoke-interface {v0, v4}, Ljava/util/concurrent/ScheduledExecutorService;->execute(Ljava/lang/Runnable;)V

    return-void

    .line 379216
    :cond_6
    invoke-virtual {v4}, LX/3B2;->run()V

    return-void
.end method

.method public final A0X(LX/3Ce;Ljava/lang/String;)V
    .locals 8

    .line 379217
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v5

    if-nez v5, :cond_0

    const-string v0, "voip/call/end without call info"

    .line 379218
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    return-void

    .line 379219
    :cond_0
    invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J

    move-result-wide v6

    .line 379220
    invoke-static {}, LX/00A;->A01()V

    .line 379221
    sget-object v0, LX/3Ce;->A0A:LX/3Ce;

    if-eq p1, v0, :cond_7

    sget-object v0, LX/3Ce;->A0B:LX/3Ce;

    if-eq p1, v0, :cond_7

    .line 379222
    invoke-static {p2}, Landroid/text/TextUtils;->isEmpty(Ljava/lang/CharSequence;)Z

    move-result v0

    if-eqz v0, :cond_5

    .line 379223
    iget-boolean v0, v5, Lcom/whatsapp/voipcalling/CallInfo;->isCaller:Z

    .line 379224
    if-eqz v0, :cond_5

    .line 379225
    iget-object v1, v5, Lcom/whatsapp/voipcalling/CallInfo;->callState:Lcom/whatsapp/voipcalling/Voip$CallState;

    .line 379226
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->CALLING:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-ne v1, v0, :cond_5

    iget-boolean v0, p0, LX/3ZK;->A0v:Z

    if-nez v0, :cond_5

    .line 379227
    invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J

    move-result-wide v3

    iget-wide v0, p0, LX/3ZK;->A0A:J

    sub-long/2addr v3, v0

    const-wide/16 v1, 0x2710

    cmp-long v0, v3, v1

    if-lez v0, :cond_5

    .line 379228
    iget-object v1, p0, LX/3ZK;->A1d:LX/01Q;

    const v0, 0x7f120e1f

    invoke-virtual {v1, v0}, LX/01Q;->A05(I)Ljava/lang/String;

    move-result-object p2

    .line 379229
    :cond_1
    :goto_0
    if-eqz p2, :cond_2

    .line 379230
    iget-object v0, p0, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_2

    .line 379231
    invoke-interface {v0, p2}, LX/0WA;->ALe(Ljava/lang/String;)V

    const/4 v0, -0x1

    .line 379232
    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v0

    iput-object v0, p0, LX/3ZK;->A2B:Ljava/lang/Integer;

    .line 379233
    :cond_2
    iget-boolean v0, v5, Lcom/whatsapp/voipcalling/CallInfo;->isCaller:Z

    .line 379234
    if-eqz v0, :cond_4

    .line 379235
    iget-object v1, v5, Lcom/whatsapp/voipcalling/CallInfo;->callState:Lcom/whatsapp/voipcalling/Voip$CallState;

    .line 379236
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->CALLING:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-ne v1, v0, :cond_4

    iget-boolean v0, p0, LX/3ZK;->A2C:Z

    if-eqz v0, :cond_4

    .line 379237
    sget-object v0, LX/3Ce;->A05:LX/3Ce;

    iput-object v0, p0, LX/3ZK;->A2A:LX/3Ce;

    .line 379238
    :goto_1
    const-string v1, "voip/call/end without text="

    const-string v0, ", reason="

    .line 379239
    invoke-static {v1, p2, v0}, LX/007;->A0Q(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v1

    iget-object v0, p0, LX/3ZK;->A2A:LX/3Ce;

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379240
    iget-object v0, p0, LX/3ZK;->A1t:LX/3C4;

    .line 379241
    iget-object v1, v0, LX/3C4;->A09:Ljava/util/concurrent/Future;

    if-eqz v1, :cond_3

    const/4 v0, 0x1

    .line 379242
    invoke-interface {v1, v0}, Ljava/util/concurrent/Future;->cancel(Z)Z

    .line 379243
    :cond_3
    iget-object v1, p0, LX/3ZK;->A0s:Ljava/util/concurrent/ScheduledExecutorService;

    new-instance v0, LX/3B3;

    invoke-direct {v0, p0, p1}, LX/3B3;-><init>(LX/3ZK;LX/3Ce;)V

    invoke-interface {v1, v0}, Ljava/util/concurrent/ScheduledExecutorService;->execute(Ljava/lang/Runnable;)V

    .line 379244
    invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J

    move-result-wide v2

    sub-long/2addr v2, v6

    .line 379245
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voip/call/end elapsed "

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, v2, v3}, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;

    const-string v0, " ms"

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    return-void

    .line 379246
    :cond_4
    iput-object p1, p0, LX/3ZK;->A2A:LX/3Ce;

    goto :goto_1

    .line 379247
    :cond_5
    invoke-static {p2}, Landroid/text/TextUtils;->isEmpty(Ljava/lang/CharSequence;)Z

    move-result v0

    if-eqz v0, :cond_1

    sget-object v0, LX/3Ce;->A0C:LX/3Ce;

    if-ne p1, v0, :cond_1

    .line 379248
    iget-wide v3, v5, Lcom/whatsapp/voipcalling/CallInfo;->callDuration:J

    .line 379249
    const-wide/16 v1, 0x0

    cmp-long v0, v3, v1

    if-lez v0, :cond_6

    .line 379250
    iget-object v1, p0, LX/3ZK;->A1d:LX/01Q;

    const v0, 0x7f120e19

    invoke-virtual {v1, v0}, LX/01Q;->A05(I)Ljava/lang/String;

    move-result-object p2

    goto/16 :goto_0

    .line 379251
    :cond_6
    iget-object v1, p0, LX/3ZK;->A1d:LX/01Q;

    const v0, 0x7f120e27

    invoke-virtual {v1, v0}, LX/01Q;->A05(I)Ljava/lang/String;

    move-result-object p2

    goto/16 :goto_0

    :cond_7
    const/4 p2, 0x0

    goto/16 :goto_0
.end method

.method public A0Y(LX/0dq;)V
    .locals 28

    move-object/from16 v0, p0

    .line 379252
    move-object/from16 v8, p1

    iget-object v1, v8, LX/0dq;->A02:Ljava/lang/String;

    .line 379253
    new-instance v3, Ljava/lang/StringBuilder;

    const-string v2, "voip/service/cmd command="

    invoke-direct {v3, v2}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v3, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    invoke-static {v2}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379254
    iget-boolean v2, v0, LX/3ZK;->A17:Z

    const-string v12, "start_web_relay"

    const-string v11, "hangup_call"

    const-string v10, "start_call"

    const-string v9, "receive_message"

    if-nez v2, :cond_0

    .line 379255
    invoke-virtual {v9, v1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v2

    if-nez v2, :cond_0

    .line 379256
    invoke-virtual {v10, v1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v2

    if-nez v2, :cond_0

    .line 379257
    invoke-virtual {v11, v1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v2

    if-nez v2, :cond_0

    .line 379258
    invoke-virtual {v12, v1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v2

    if-nez v2, :cond_0

    const-string v0, "voip/service/cmd/not-started"

    .line 379259
    invoke-static {v0}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;)V

    return-void

    .line 379260
    :cond_0
    iget-boolean v2, v0, LX/3ZK;->A18:Z

    if-eqz v2, :cond_1

    const-string v1, "voip/service/cmd VoiceService is stopping, restart the service with the same command later."

    .line 379261
    invoke-static {v1}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;)V

    .line 379262
    iget-object v0, v0, LX/3ZK;->A22:Ljava/util/List;

    invoke-interface {v0, v8}, Ljava/util/List;->add(Ljava/lang/Object;)Z

    return-void

    .line 379263
    :cond_1
    iget-object v7, v8, LX/0dq;->A00:Landroid/os/Bundle;

    if-nez v7, :cond_2

    .line 379264
    new-instance v7, Landroid/os/Bundle;

    invoke-direct {v7}, Landroid/os/Bundle;-><init>()V

    .line 379265
    :cond_2
    invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J

    move-result-wide v17

    .line 379266
    invoke-virtual {v1}, Ljava/lang/String;->hashCode()I

    move-result v4

    const/4 v6, -0x1

    const/4 v5, 0x2

    const/4 v3, 0x1

    const/4 v2, 0x0

    sparse-switch v4, :sswitch_data_0

    :goto_0
    const/4 v10, -0x1

    :cond_3
    const/4 v9, 0x0

    packed-switch v10, :pswitch_data_0

    const-string v0, "voip/service/cmd/unknown-action"

    .line 379267
    invoke-static {v0}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;)V

    .line 379268
    :cond_4
    :goto_1
    invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J

    move-result-wide v2

    sub-long v2, v2, v17

    .line 379269
    new-instance v4, Ljava/lang/StringBuilder;

    const-string v0, "voip/service/cmd/"

    invoke-direct {v4, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v4, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v0, " elapsed "

    invoke-virtual {v4, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4, v2, v3}, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;

    const-string v0, " ms"

    invoke-static {v4, v0}, LX/007;->A13(Ljava/lang/StringBuilder;Ljava/lang/String;)V

    .line 379270
    invoke-static {}, LX/0Ho;->A01()Z

    move-result v0

    if-nez v0, :cond_5

    .line 379271
    invoke-virtual/range {p0 .. p0}, LX/3ZK;->A0B()V

    :cond_5
    return-void

    .line 379272
    :pswitch_0
    iget-boolean v4, v0, LX/3ZK;->A15:Z

    if-eqz v4, :cond_6

    invoke-static {}, LX/0Ho;->A01()Z

    move-result v4

    if-eqz v4, :cond_6

    .line 379273
    iget-object v5, v0, LX/3ZK;->A1F:Landroid/content/Context;

    const/4 v6, 0x0

    iget-object v4, v0, LX/3ZK;->A1G:LX/0DK;

    .line 379274
    iget-boolean v4, v4, LX/0DK;->A00:Z

    xor-int/2addr v4, v3

    .line 379275
    invoke-static {v4}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v7

    const/4 v8, 0x0

    .line 379276
    invoke-static {v3}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v9

    const/4 v10, 0x0

    .line 379277
    invoke-static/range {v5 .. v10}, Lcom/whatsapp/voipcalling/VoipActivityV2;->A05(Landroid/content/Context;Ljava/util/List;Ljava/lang/Boolean;Ljava/lang/Boolean;Ljava/lang/Boolean;Ljava/lang/Boolean;)Landroid/content/Intent;

    move-result-object v3

    .line 379278
    invoke-virtual {v5, v3}, Landroid/content/Context;->startActivity(Landroid/content/Intent;)V

    .line 379279
    :cond_6
    iput-boolean v2, v0, LX/3ZK;->A15:Z

    goto :goto_1

    .line 379280
    :pswitch_1
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v4

    const-string v3, "notification_type"

    .line 379281
    invoke-virtual {v7, v3, v5}, Landroid/os/Bundle;->getInt(Ljava/lang/String;I)I

    move-result v3

    .line 379282
    invoke-virtual {v0, v4, v3, v2, v2}, LX/3ZK;->A0T(Lcom/whatsapp/voipcalling/CallInfo;IZZ)V

    goto :goto_1

    .line 379283
    :pswitch_2
    iget-object v4, v8, LX/0dq;->A01:Landroid/os/Message;

    invoke-static {v4}, LX/00A;->A05(Ljava/lang/Object;)V

    .line 379284
    iget-object v7, v4, Landroid/os/Message;->obj:Ljava/lang/Object;

    check-cast v7, LX/3T5;

    invoke-static {v7}, LX/00A;->A05(Ljava/lang/Object;)V

    .line 379285
    iget-object v8, v7, LX/1zY;->A01:Lcom/whatsapp/protocol/VoipStanzaChildNode;

    .line 379286
    iget-object v9, v8, Lcom/whatsapp/protocol/VoipStanzaChildNode;->tag:Ljava/lang/String;

    .line 379287
    invoke-virtual {v9}, Ljava/lang/String;->hashCode()I

    move-result v5

    const v4, 0x64c1a5c

    if-eq v5, v4, :cond_8

    const v4, 0x3f5c5fa7

    if-ne v5, v4, :cond_7

    const-string v4, "enc_rekey"

    invoke-virtual {v9, v4}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v4

    if-eqz v4, :cond_7

    const/4 v6, 0x1

    :cond_7
    :goto_2
    if-eqz v6, :cond_a

    if-eq v6, v3, :cond_9

    const-string v0, "stanza type not supported!"

    .line 379288
    invoke-static {v2, v0}, LX/00A;->A0A(ZLjava/lang/String;)V

    return-void

    .line 379289
    :cond_8
    const-string v4, "offer"

    invoke-virtual {v9, v4}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v4

    if-eqz v4, :cond_7

    const/4 v6, 0x0

    goto :goto_2

    .line 379290
    :cond_9
    iget-object v4, v7, LX/1zY;->A03:Ljava/lang/String;

    iget-object v2, v7, LX/1zY;->A00:Lcom/whatsapp/jid/Jid;

    check-cast v2, Lcom/whatsapp/jid/UserJid;

    .line 379291
    invoke-virtual {v2}, Lcom/whatsapp/jid/UserJid;->getPrimaryDevice()Lcom/whatsapp/jid/DeviceJid;

    move-result-object v8

    iget-object v3, v7, LX/1zY;->A02:Ljava/lang/String;

    iget-object v2, v7, LX/1zY;->A01:Lcom/whatsapp/protocol/VoipStanzaChildNode;

    const/4 v11, 0x1

    .line 379292
    move-object v6, v0

    move-object v7, v4

    move-object v9, v3

    move-object v10, v2

    invoke-virtual/range {v6 .. v11}, LX/3ZK;->A0e(Ljava/lang/String;Lcom/whatsapp/jid/DeviceJid;Ljava/lang/String;Lcom/whatsapp/protocol/VoipStanzaChildNode;Z)V

    goto/16 :goto_1

    .line 379293
    :cond_a
    new-instance v5, LX/3Bx;

    iget-object v4, v7, LX/1zY;->A00:Lcom/whatsapp/jid/Jid;

    iget-object v3, v7, LX/1zY;->A02:Ljava/lang/String;

    iget-object v2, v7, LX/1zY;->A03:Ljava/lang/String;

    invoke-direct {v5, v4, v3, v8, v2}, LX/3Bx;-><init>(Lcom/whatsapp/jid/Jid;Ljava/lang/String;Lcom/whatsapp/protocol/VoipStanzaChildNode;Ljava/lang/String;)V

    invoke-virtual {v0, v5}, LX/3ZK;->A0W(LX/3Bx;)V

    goto/16 :goto_1

    :pswitch_3
    const-string v2, "end_call_string"

    .line 379294
    invoke-virtual {v7, v2}, Landroid/os/Bundle;->getString(Ljava/lang/String;)Ljava/lang/String;

    move-result-object v3

    const-string v2, "end_call_reason"

    .line 379295
    invoke-virtual {v7, v2}, Landroid/os/Bundle;->getSerializable(Ljava/lang/String;)Ljava/io/Serializable;

    move-result-object v2

    check-cast v2, LX/3Ce;

    .line 379296
    invoke-virtual {v0, v2, v3}, LX/3ZK;->A0X(LX/3Ce;Ljava/lang/String;)V

    goto/16 :goto_1

    :pswitch_4
    const-string v3, "call_id"

    .line 379297
    invoke-virtual {v7, v3}, Landroid/os/Bundle;->getString(Ljava/lang/String;)Ljava/lang/String;

    move-result-object v4

    const-string v3, "call_ui_action"

    .line 379298
    invoke-virtual {v7, v3, v2}, Landroid/os/Bundle;->getInt(Ljava/lang/String;I)I

    move-result v2

    .line 379299
    invoke-virtual {v0, v4, v9, v2}, LX/3ZK;->A0g(Ljava/lang/String;Ljava/lang/String;I)V

    .line 379300
    iget-object v2, v0, LX/3ZK;->A1b:LX/02S;

    const/4 v0, 0x7

    .line 379301
    invoke-virtual {v2, v9, v0}, LX/02S;->A03(Ljava/lang/String;I)V

    goto/16 :goto_1

    .line 379302
    :pswitch_5
    sget-object v2, LX/3ZK;->A2G:Ljava/util/concurrent/atomic/AtomicInteger;

    invoke-virtual {v2}, Ljava/util/concurrent/atomic/AtomicInteger;->getAndIncrement()I

    .line 379303
    iget-object v4, v8, LX/0dq;->A01:Landroid/os/Message;

    invoke-static {v4}, LX/00A;->A05(Ljava/lang/Object;)V

    .line 379304
    iget-object v3, v0, LX/3ZK;->A0s:Ljava/util/concurrent/ScheduledExecutorService;

    new-instance v2, LX/3B6;

    invoke-direct {v2, v0, v4}, LX/3B6;-><init>(LX/3ZK;Landroid/os/Message;)V

    invoke-interface {v3, v2}, Ljava/util/concurrent/ScheduledExecutorService;->execute(Ljava/lang/Runnable;)V

    goto/16 :goto_1

    .line 379305
    :pswitch_6
    iget-object v4, v8, LX/0dq;->A01:Landroid/os/Message;

    invoke-static {v4}, LX/00A;->A05(Ljava/lang/Object;)V

    .line 379306
    iget-object v9, v4, Landroid/os/Message;->obj:Ljava/lang/Object;

    check-cast v9, LX/3CM;

    .line 379307
    invoke-static {v9}, LX/00A;->A05(Ljava/lang/Object;)V

    .line 379308
    iget v4, v9, LX/3CM;->A01:I

    invoke-static {v4}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A0c:Ljava/lang/Integer;

    .line 379309
    iget-boolean v4, v9, LX/3CM;->A06:Z

    iput-boolean v4, v0, LX/3ZK;->A16:Z

    .line 379310
    iget-wide v4, v9, LX/3CM;->A00:J

    const-wide/16 v7, 0x0

    cmp-long v6, v4, v7

    if-lez v6, :cond_b

    .line 379311
    invoke-static {v4, v5}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v4

    iput-object v4, v0, LX/3ZK;->A0k:Ljava/lang/Long;

    .line 379312
    :cond_b
    iget-object v6, v9, LX/3CM;->A03:Ljava/lang/String;

    iget-object v10, v9, LX/3CM;->A04:Ljava/util/LinkedHashMap;

    iget-boolean v8, v9, LX/3CM;->A05:Z

    iget-object v9, v9, LX/3CM;->A02:Lcom/whatsapp/jid/GroupJid;

    .line 379313
    new-instance v5, Ljava/util/ArrayList;

    invoke-virtual {v10}, Ljava/util/LinkedHashMap;->keySet()Ljava/util/Set;

    move-result-object v4

    invoke-direct {v5, v4}, Ljava/util/ArrayList;-><init>(Ljava/util/Collection;)V

    .line 379314
    invoke-virtual {v5}, Ljava/util/ArrayList;->isEmpty()Z

    move-result v7

    xor-int/2addr v7, v3

    const-string v4, "Trying start a call with empty list of jids"

    invoke-static {v7, v4}, LX/00A;->A0A(ZLjava/lang/String;)V

    .line 379315
    new-instance v7, Ljava/lang/StringBuilder;

    const-string v4, "voip/actionStartNewOutgoingCall callId: "

    invoke-direct {v7, v4}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v7, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v7}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v4

    invoke-static {v4}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379316
    invoke-virtual {v5, v2}, Ljava/util/ArrayList;->get(I)Ljava/lang/Object;

    move-result-object v7

    check-cast v7, Lcom/whatsapp/jid/UserJid;

    .line 379317
    invoke-virtual {v0, v3, v7, v6}, LX/3ZK;->A0j(ZLcom/whatsapp/jid/UserJid;Ljava/lang/String;)V

    .line 379318
    iget-boolean v4, v0, LX/3ZK;->A17:Z

    if-eqz v4, :cond_4

    if-eqz v8, :cond_c

    .line 379319
    invoke-virtual/range {p0 .. p0}, LX/3ZK;->A0J()V

    .line 379320
    iget-object v11, v0, LX/3ZK;->A21:Lcom/whatsapp/voipcalling/camera/VoipCameraManager;

    iget-object v4, v0, LX/3ZK;->A20:LX/0Zd;

    .line 379321
    invoke-virtual {v4}, LX/0Zd;->A02()Ljava/lang/String;

    move-result-object v4

    .line 379322
    invoke-virtual {v11, v4}, Lcom/whatsapp/voipcalling/camera/VoipCameraManager;->setRequestedCamera2SupportLevel(Ljava/lang/String;)V

    .line 379323
    :cond_c
    iget-object v4, v0, LX/3ZK;->A1a:LX/00T;

    .line 379324
    invoke-virtual {v4}, LX/00T;->A01()J

    move-result-wide v24

    .line 379325
    iget-object v4, v0, LX/3ZK;->A1g:LX/07h;

    .line 379326
    invoke-static {v6}, LX/0OQ;->A0G(Ljava/lang/String;)Ljava/lang/String;

    move-result-object v22

    const/16 v27, 0x0

    const/16 v21, 0x1

    const/16 v23, -0x1

    .line 379327
    move-object/from16 v19, v4

    move-object/from16 v20, v7

    move/from16 v26, v8

    invoke-virtual/range {v19 .. v27}, LX/07h;->A02(Lcom/whatsapp/jid/UserJid;ZLjava/lang/String;IJZLjava/util/List;)LX/20n;

    .line 379328
    invoke-virtual {v10}, Ljava/util/LinkedHashMap;->size()I

    move-result v13

    new-array v12, v13, [Lcom/whatsapp/voipcalling/CallParticipantJid;

    .line 379329
    invoke-virtual {v10}, Ljava/util/LinkedHashMap;->entrySet()Ljava/util/Set;

    move-result-object v4

    invoke-interface {v4}, Ljava/util/Set;->iterator()Ljava/util/Iterator;

    move-result-object v16

    const/4 v15, 0x0

    :goto_3
    invoke-interface/range {v16 .. v16}, Ljava/util/Iterator;->hasNext()Z

    move-result v4

    if-eqz v4, :cond_d

    invoke-interface/range {v16 .. v16}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v14

    check-cast v14, Ljava/util/Map$Entry;

    .line 379330
    invoke-interface {v14}, Ljava/util/Map$Entry;->getValue()Ljava/lang/Object;

    move-result-object v7

    check-cast v7, Ljava/util/Set;

    new-array v4, v2, [Lcom/whatsapp/jid/DeviceJid;

    invoke-interface {v7, v4}, Ljava/util/Set;->toArray([Ljava/lang/Object;)[Ljava/lang/Object;

    move-result-object v11

    check-cast v11, [Lcom/whatsapp/jid/DeviceJid;

    add-int/lit8 v10, v15, 0x1

    .line 379331
    new-instance v7, Lcom/whatsapp/voipcalling/CallParticipantJid;

    invoke-interface {v14}, Ljava/util/Map$Entry;->getKey()Ljava/lang/Object;

    move-result-object v4

    check-cast v4, Lcom/whatsapp/jid/UserJid;

    invoke-direct {v7, v4, v11}, Lcom/whatsapp/voipcalling/CallParticipantJid;-><init>(Lcom/whatsapp/jid/UserJid;[Lcom/whatsapp/jid/DeviceJid;)V

    aput-object v7, v12, v15

    move v15, v10

    goto :goto_3

    .line 379332
    :cond_d
    if-ne v13, v3, :cond_f

    .line 379333
    aget-object v4, v12, v2

    invoke-static {v6, v4, v8}, Lcom/whatsapp/voipcalling/Voip;->startCall(Ljava/lang/String;Lcom/whatsapp/voipcalling/CallParticipantJid;Z)I

    move-result v4

    .line 379334
    :goto_4
    if-eqz v4, :cond_10

    const-string v2, "voip/actionStartNewOutgoingCall failed to start call "

    .line 379335
    invoke-static {v2, v6}, LX/007;->A0p(Ljava/lang/String;Ljava/lang/String;)V

    .line 379336
    sget v3, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v2, 0x1c

    if-lt v3, v2, :cond_e

    .line 379337
    invoke-virtual {v0, v6}, LX/3ZK;->A03(Ljava/lang/String;)LX/3CJ;

    move-result-object v3

    if-eqz v3, :cond_e

    const/16 v2, 0x9

    .line 379338
    invoke-virtual {v3, v2}, LX/3CJ;->A00(I)V

    :cond_e
    const v2, 0xa3931

    if-eq v4, v2, :cond_4

    .line 379339
    sget-object v3, Lcom/whatsapp/voipcalling/Voip$CallState;->NONE:Lcom/whatsapp/voipcalling/Voip$CallState;

    const/4 v2, 0x0

    invoke-virtual {v0, v3, v2}, LX/3ZK;->A0a(Lcom/whatsapp/voipcalling/Voip$CallState;Lcom/whatsapp/voipcalling/CallInfo;)V

    goto/16 :goto_1

    .line 379340
    :cond_f
    new-instance v4, Lcom/whatsapp/voipcalling/CallMetadata;

    invoke-direct {v4, v9}, Lcom/whatsapp/voipcalling/CallMetadata;-><init>(Lcom/whatsapp/jid/GroupJid;)V

    .line 379341
    invoke-static {v6, v12, v8, v4}, Lcom/whatsapp/voipcalling/Voip;->startGroupCall(Ljava/lang/String;[Lcom/whatsapp/voipcalling/CallParticipantJid;ZLcom/whatsapp/voipcalling/CallMetadata;)I

    move-result v4

    goto :goto_4

    .line 379342
    :cond_10
    iget-object v7, v0, LX/3ZK;->A1F:Landroid/content/Context;

    iget-object v4, v0, LX/3ZK;->A1G:LX/0DK;

    .line 379343
    iget-boolean v4, v4, LX/0DK;->A00:Z

    xor-int/2addr v4, v3

    .line 379344
    invoke-static {v4}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v9

    .line 379345
    invoke-static {v8}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v10

    .line 379346
    invoke-static {v3}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v11

    .line 379347
    move-object v12, v11

    .line 379348
    move-object v8, v5

    invoke-static/range {v7 .. v12}, Lcom/whatsapp/voipcalling/VoipActivityV2;->A05(Landroid/content/Context;Ljava/util/List;Ljava/lang/Boolean;Ljava/lang/Boolean;Ljava/lang/Boolean;Ljava/lang/Boolean;)Landroid/content/Intent;

    move-result-object v3

    .line 379349
    invoke-virtual {v7, v3}, Landroid/content/Context;->startActivity(Landroid/content/Intent;)V

    .line 379350
    iget-object v4, v0, LX/3ZK;->A0s:Ljava/util/concurrent/ScheduledExecutorService;

    new-instance v3, LX/3BJ;

    invoke-direct {v3, v0, v6, v5}, LX/3BJ;-><init>(LX/3ZK;Ljava/lang/String;Ljava/util/List;)V

    invoke-interface {v4, v3}, Ljava/util/concurrent/ScheduledExecutorService;->execute(Ljava/lang/Runnable;)V

    .line 379351
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v4

    const/4 v3, 0x2

    .line 379352
    invoke-virtual {v0, v4, v3, v2, v2}, LX/3ZK;->A0T(Lcom/whatsapp/voipcalling/CallInfo;IZZ)V

    goto/16 :goto_1

    .line 379353
    :sswitch_0
    invoke-virtual {v1, v11}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v4

    const/4 v10, 0x3

    if-nez v4, :cond_3

    goto/16 :goto_0

    :sswitch_1
    invoke-virtual {v1, v12}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v4

    const/4 v10, 0x4

    if-nez v4, :cond_3

    goto/16 :goto_0

    :sswitch_2
    invoke-virtual {v1, v9}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v4

    const/4 v10, 0x1

    if-nez v4, :cond_3

    goto/16 :goto_0

    :sswitch_3
    const-string v4, "show_voip_activity"

    invoke-virtual {v1, v4}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v4

    const/4 v10, 0x6

    if-nez v4, :cond_3

    goto/16 :goto_0

    :sswitch_4
    const-string v4, "reject_call"

    invoke-virtual {v1, v4}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v4

    const/4 v10, 0x2

    if-nez v4, :cond_3

    goto/16 :goto_0

    :sswitch_5
    const-string v4, "refresh_notification"

    invoke-virtual {v1, v4}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v4

    const/4 v10, 0x5

    if-nez v4, :cond_3

    goto/16 :goto_0

    :sswitch_6
    invoke-virtual {v1, v10}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v4

    const/4 v10, 0x0

    if-nez v4, :cond_3

    goto/16 :goto_0

    :sswitch_data_0
    .sparse-switch
        -0x5dcc23e5 -> :sswitch_6
        0x4c601bcf -> :sswitch_5
        0x4f622afe -> :sswitch_4
        0x5221d50c -> :sswitch_3
        0x561986ab -> :sswitch_2
        0x720e8e49 -> :sswitch_1
        0x7f7e48d0 -> :sswitch_0
    .end sparse-switch

    :pswitch_data_0
    .packed-switch 0x0
        :pswitch_6
        :pswitch_5
        :pswitch_4
        :pswitch_3
        :pswitch_2
        :pswitch_1
        :pswitch_0
    .end packed-switch
.end method

.method public A0Z(Lcom/whatsapp/voipcalling/Voip$CallState;)V
    .locals 4

    .line 379354
    iget-object v0, p0, LX/3ZK;->A1Z:LX/011;

    invoke-virtual {v0}, LX/011;->A08()Landroid/media/AudioManager;

    move-result-object v3

    .line 379355
    invoke-virtual {p1}, Ljava/lang/Enum;->ordinal()I

    move-result v0

    packed-switch v0, :pswitch_data_0

    .line 379356
    :cond_0
    :pswitch_0
    return-void

    .line 379357
    :pswitch_1
    if-eqz v3, :cond_0

    .line 379358
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCurrentCallId()Ljava/lang/String;

    move-result-object v0

    .line 379359
    invoke-virtual {p0, v0}, LX/3ZK;->A03(Ljava/lang/String;)LX/3CJ;

    move-result-object v1

    const/4 v0, 0x0

    if-eqz v1, :cond_1

    const/4 v0, 0x1

    .line 379360
    :cond_1
    if-nez v0, :cond_0

    .line 379361
    invoke-virtual {v3}, Landroid/media/AudioManager;->getMode()I

    move-result v1

    .line 379362
    iget-object v0, p0, LX/3ZK;->A0b:Ljava/lang/Integer;

    if-eqz v0, :cond_3

    .line 379363
    invoke-virtual {v0}, Ljava/lang/Integer;->intValue()I

    move-result v2

    :goto_0
    if-eq v1, v2, :cond_2

    .line 379364
    invoke-virtual {v3, v2}, Landroid/media/AudioManager;->setMode(I)V

    .line 379365
    :cond_2
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voip/updateAudioModeForCallState "

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v0, " to "

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    return-void

    .line 379366
    :cond_3
    const/4 v2, 0x3

    goto :goto_0

    nop

    :pswitch_data_0
    .packed-switch 0x1
        :pswitch_1
        :pswitch_1
        :pswitch_0
        :pswitch_1
        :pswitch_1
        :pswitch_1
    .end packed-switch
.end method

.method public final A0a(Lcom/whatsapp/voipcalling/Voip$CallState;Lcom/whatsapp/voipcalling/CallInfo;)V
    .locals 18

    move-object/from16 v3, p0

    .line 379367
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voip/service/stop "

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379368
    invoke-static {}, LX/00A;->A01()V

    .line 379369
    monitor-enter v3

    .line 379370
    :try_start_0
    iget-boolean v0, v3, LX/3ZK;->A0z:Z

    if-eqz v0, :cond_0

    .line 379371
    iget-object v1, v3, LX/3ZK;->A1x:LX/0dr;

    .line 379372
    iget-object v0, v1, LX/0dr;->A01:LX/00K;

    .line 379373
    iget-object v2, v0, LX/00K;->A00:Landroid/app/Application;

    .line 379374
    iget-object v1, v1, LX/0dr;->A02:LX/0H7;

    .line 379375
    const-string v0, "voicefgservice/stop-service"

    .line 379376
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379377
    const-class v0, Lcom/whatsapp/voipcalling/VoiceFGService;

    invoke-virtual {v1, v2, v0}, LX/0H7;->A02(Landroid/content/Context;Ljava/lang/Class;)V

    .line 379378
    const/4 v0, 0x0

    .line 379379
    iput-boolean v0, v3, LX/3ZK;->A0z:Z

    goto :goto_0

    .line 379380
    :cond_0
    iget-boolean v0, v3, LX/3ZK;->A12:Z

    if-eqz v0, :cond_1

    const-string v0, "VoiceService/stopForegroundService Background restriction on"

    .line 379381
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379382
    iget-object v2, v3, LX/3ZK;->A1b:LX/02S;

    const/16 v1, 0x17

    const/4 v0, 0x0

    .line 379383
    invoke-virtual {v2, v0, v1}, LX/02S;->A03(Ljava/lang/String;I)V
    :try_end_0
    .catchall {:try_start_0 .. :try_end_0} :catchall_0

    .line 379384
    :cond_1
    :goto_0
    monitor-exit v3

    .line 379385
    iget-boolean v0, v3, LX/3ZK;->A17:Z

    if-nez v0, :cond_2

    return-void

    .line 379386
    :cond_2
    invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J

    move-result-wide v9

    const/4 v2, 0x0

    .line 379387
    iput-boolean v2, v3, LX/3ZK;->A17:Z

    const-wide/16 v6, 0x0

    .line 379388
    iput-wide v6, v3, LX/3ZK;->A0D:J

    const/4 v4, 0x0

    .line 379389
    iput-object v4, v3, LX/3ZK;->A0k:Ljava/lang/Long;

    .line 379390
    iput-boolean v2, v3, LX/3ZK;->A0u:Z

    .line 379391
    iput-boolean v2, v3, LX/3ZK;->A0y:Z

    .line 379392
    iput-boolean v2, v3, LX/3ZK;->A13:Z

    .line 379393
    iput-object v4, v3, LX/3ZK;->A2B:Ljava/lang/Integer;

    .line 379394
    iput-object v4, v3, LX/3ZK;->A0T:Lcom/whatsapp/fieldstats/events/WamCall;

    .line 379395
    iput-object v4, v3, LX/3ZK;->A0b:Ljava/lang/Integer;

    const/16 v0, 0x5dc

    .line 379396
    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v0

    iput-object v0, v3, LX/3ZK;->A0f:Ljava/lang/Integer;

    .line 379397
    iput-object v4, v3, LX/3ZK;->A0J:Landroid/net/Uri;

    .line 379398
    iput-object v4, v3, LX/3ZK;->A0e:Ljava/lang/Integer;

    .line 379399
    iput-object v4, v3, LX/3ZK;->A0c:Ljava/lang/Integer;

    .line 379400
    iput-object v4, v3, LX/3ZK;->A0j:Ljava/lang/Long;

    .line 379401
    iput-boolean v2, v3, LX/3ZK;->A0w:Z

    .line 379402
    iput-wide v6, v3, LX/3ZK;->A0B:J

    .line 379403
    iput-object v4, v3, LX/3ZK;->A0r:Ljava/lang/String;

    .line 379404
    iput-object v4, v3, LX/3ZK;->A0q:Ljava/lang/String;

    const/4 v5, 0x1

    .line 379405
    iput-boolean v5, v3, LX/3ZK;->A1A:Z

    .line 379406
    iput-object v4, v3, LX/3ZK;->A0h:Ljava/lang/Integer;

    .line 379407
    iput-object v4, v3, LX/3ZK;->A0g:Ljava/lang/Integer;

    .line 379408
    iput-boolean v2, v3, LX/3ZK;->A0v:Z

    .line 379409
    iput-wide v6, v3, LX/3ZK;->A0A:J

    .line 379410
    iput-boolean v2, v3, LX/3ZK;->A11:Z

    .line 379411
    iput-short v2, v3, LX/3ZK;->A0t:S

    .line 379412
    iput v2, v3, LX/3ZK;->A09:I

    .line 379413
    iput-boolean v2, v3, LX/3ZK;->A16:Z

    .line 379414
    iput-object v4, v3, LX/3ZK;->A2A:LX/3Ce;

    .line 379415
    iput-object v4, v3, LX/3ZK;->A29:LX/3Bx;

    .line 379416
    iget-object v0, v3, LX/3ZK;->A25:Ljava/util/Map;

    invoke-interface {v0}, Ljava/util/Map;->clear()V

    .line 379417
    iget-object v0, v3, LX/3ZK;->A26:Ljava/util/Map;

    invoke-interface {v0}, Ljava/util/Map;->clear()V

    .line 379418
    iget-object v0, v3, LX/3ZK;->A1t:LX/3C4;

    .line 379419
    iget-object v0, v0, LX/3C4;->A08:Ljava/util/Set;

    invoke-interface {v0}, Ljava/util/Set;->clear()V

    .line 379420
    iget-object v0, v3, LX/3ZK;->A24:Ljava/util/Map;

    invoke-interface {v0}, Ljava/util/Map;->clear()V

    .line 379421
    iput-boolean v2, v3, LX/3ZK;->A14:Z

    .line 379422
    iput-boolean v2, v3, LX/3ZK;->A0x:Z

    const/16 v0, 0x1e

    .line 379423
    iput v0, v3, LX/3ZK;->A05:I

    .line 379424
    iput v2, v3, LX/3ZK;->A03:I

    .line 379425
    iput-boolean v2, v3, LX/3ZK;->A2C:Z

    .line 379426
    iget-object v8, v3, LX/3ZK;->A1r:LX/3Br;

    .line 379427
    iput-wide v6, v8, LX/3Br;->A02:J

    const-wide/high16 v0, 0x7ff8000000000000L    # NaN

    .line 379428
    iput-wide v0, v8, LX/3Br;->A01:D

    .line 379429
    iput-wide v0, v8, LX/3Br;->A00:D

    .line 379430
    iput-wide v6, v3, LX/3ZK;->A0E:J

    const-wide/16 v0, -0x1

    .line 379431
    iput-wide v0, v3, LX/3ZK;->A0C:J

    .line 379432
    iput-object v4, v3, LX/3ZK;->A0l:Ljava/lang/Long;

    .line 379433
    iput-boolean v2, v3, LX/3ZK;->A10:Z

    .line 379434
    iget-object v1, v3, LX/3ZK;->A0R:Landroid/telephony/TelephonyManager;

    if-nez v1, :cond_5

    const-string v0, "voip/service/stop telephonyManager=null"

    .line 379435
    invoke-static {v0}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;)V

    .line 379436
    :goto_1
    iget-object v1, v3, LX/3ZK;->A1F:Landroid/content/Context;

    iget-object v0, v3, LX/3ZK;->A0F:Landroid/content/BroadcastReceiver;

    invoke-virtual {v1, v0}, Landroid/content/Context;->unregisterReceiver(Landroid/content/BroadcastReceiver;)V

    .line 379437
    iget-object v6, v3, LX/3ZK;->A1y:LX/3Co;

    const-string v0, "voip/audio_route/onCallStop using telecom:"

    .line 379438
    invoke-static {v0}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v1

    iget-boolean v0, v6, LX/3Co;->A07:Z

    invoke-static {v1, v0}, LX/007;->A17(Ljava/lang/StringBuilder;Z)V

    .line 379439
    iget-boolean v0, v6, LX/3Co;->A07:Z

    if-nez v0, :cond_3

    .line 379440
    iget-object v0, v6, LX/3Co;->A0B:LX/3CA;

    invoke-interface {v0}, LX/3CA;->stop()V

    .line 379441
    iget-object v1, v6, LX/3Co;->A09:Landroid/content/Context;

    iget-object v0, v6, LX/3Co;->A0E:LX/3Ck;

    invoke-virtual {v1, v0}, Landroid/content/Context;->unregisterReceiver(Landroid/content/BroadcastReceiver;)V

    .line 379442
    iget-object v1, v6, LX/3Co;->A09:Landroid/content/Context;

    iget-object v0, v6, LX/3Co;->A0G:LX/3Cm;

    invoke-virtual {v1, v0}, Landroid/content/Context;->unregisterReceiver(Landroid/content/BroadcastReceiver;)V

    .line 379443
    :cond_3
    sget v1, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v0, 0x15

    if-lt v1, v0, :cond_4

    .line 379444
    iget-object v1, v3, LX/3ZK;->A1F:Landroid/content/Context;

    iget-object v0, v3, LX/3ZK;->A0G:Landroid/content/BroadcastReceiver;

    invoke-virtual {v1, v0}, Landroid/content/Context;->unregisterReceiver(Landroid/content/BroadcastReceiver;)V

    .line 379445
    :cond_4
    invoke-virtual/range {p0 .. p0}, LX/3ZK;->A0D()V

    .line 379446
    invoke-virtual/range {p0 .. p0}, LX/3ZK;->A0H()V

    goto :goto_2

    .line 379447
    :cond_5
    iget-object v0, v3, LX/3ZK;->A0Q:Landroid/telephony/PhoneStateListener;

    invoke-virtual {v1, v0, v2}, Landroid/telephony/TelephonyManager;->listen(Landroid/telephony/PhoneStateListener;I)V

    goto :goto_1

    .line 379448
    :goto_2
    :try_start_1
    iget-object v0, v3, LX/3ZK;->A1Z:LX/011;

    invoke-virtual {v0}, LX/011;->A0B()Landroid/os/PowerManager;

    move-result-object v6

    if-nez v6, :cond_6

    const-string v0, "voice/service/turn-on-screen pm=null"

    .line 379449
    invoke-static {v0}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;)V

    goto :goto_3

    .line 379450
    :cond_6
    invoke-virtual {v6}, Landroid/os/PowerManager;->isScreenOn()Z

    move-result v0

    if-nez v0, :cond_7

    const v1, 0x1000000a

    const-string v0, "VoiceService end call"

    .line 379451
    invoke-static {v6, v1, v0}, LX/02V;->A0L(Landroid/os/PowerManager;ILjava/lang/String;)Landroid/os/PowerManager$WakeLock;

    move-result-object v6

    if-eqz v6, :cond_7

    const-wide/16 v0, 0x1

    .line 379452
    invoke-virtual {v6, v0, v1}, Landroid/os/PowerManager$WakeLock;->acquire(J)V

    .line 379453
    invoke-virtual {v6}, Landroid/os/PowerManager$WakeLock;->release()V

    goto :goto_3
    :try_end_1
    .catch Ljava/lang/Exception; {:try_start_1 .. :try_end_1} :catch_0

    :catch_0
    move-exception v0

    .line 379454
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/Throwable;)V

    .line 379455
    :cond_7
    :goto_3
    invoke-virtual/range {p0 .. p0}, LX/3ZK;->A0A()V

    .line 379456
    iget-object v0, v3, LX/3ZK;->A0I:Landroid/media/SoundPool;

    if-eqz v0, :cond_c

    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->NONE:Lcom/whatsapp/voipcalling/Voip$CallState;

    move-object/from16 v1, p1

    if-eq v1, v0, :cond_c

    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->RECEIVED_CALL:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-eq v1, v0, :cond_c

    move-object/from16 v0, p2

    if-eqz p2, :cond_c

    .line 379457
    iget-object v0, v0, Lcom/whatsapp/voipcalling/CallInfo;->callWaitingInfo:LX/20k;

    .line 379458
    iget v0, v0, LX/20k;->A01:I

    if-nez v0, :cond_c

    .line 379459
    iget-object v1, v3, LX/3ZK;->A1F:Landroid/content/Context;

    const v0, 0x7f110002

    invoke-static {v1, v0}, Landroid/media/MediaPlayer;->create(Landroid/content/Context;I)Landroid/media/MediaPlayer;

    move-result-object v0

    if-nez v0, :cond_b

    const/16 v6, 0x1f4

    .line 379460
    :goto_4
    const-string v0, "voip/service/playEndCallTone duration: "

    .line 379461
    invoke-static {v0, v6}, LX/007;->A0e(Ljava/lang/String;I)V

    .line 379462
    iget-object v0, v3, LX/3ZK;->A1y:LX/3Co;

    .line 379463
    iget v1, v0, LX/3Co;->A00:I

    const/4 v0, 0x2

    if-ne v1, v0, :cond_8

    const/4 v2, 0x1

    :cond_8
    const/high16 v13, 0x3f000000    # 0.5f

    if-eqz v2, :cond_9

    const/high16 v13, 0x3f800000    # 1.0f

    .line 379464
    :cond_9
    iget-object v0, v3, LX/3ZK;->A0i:Ljava/lang/Integer;

    if-eqz v0, :cond_a

    .line 379465
    iget-object v11, v3, LX/3ZK;->A0I:Landroid/media/SoundPool;

    invoke-virtual {v0}, Ljava/lang/Integer;->intValue()I

    move-result v12

    const/4 v15, 0x0

    const/16 v16, 0x0

    const/high16 v17, 0x3f800000    # 1.0f

    move v14, v13

    invoke-virtual/range {v11 .. v17}, Landroid/media/SoundPool;->play(IFFIIF)I

    .line 379466
    :cond_a
    iget-object v0, v3, LX/3ZK;->A0N:Landroid/os/Handler;

    invoke-virtual {v0, v5}, Landroid/os/Handler;->removeMessages(I)V

    .line 379467
    iget-object v2, v3, LX/3ZK;->A0N:Landroid/os/Handler;

    add-int/lit8 v0, v6, 0x64

    int-to-long v0, v0

    invoke-virtual {v2, v5, v0, v1}, Landroid/os/Handler;->sendEmptyMessageDelayed(IJ)Z

    .line 379468
    :goto_5
    iget-object v0, v3, LX/3ZK;->A0M:Landroid/os/Handler;

    invoke-virtual {v0, v4}, Landroid/os/Handler;->removeCallbacksAndMessages(Ljava/lang/Object;)V

    .line 379469
    iget-object v1, v3, LX/3ZK;->A1c:LX/00E;

    const-string v0, "voip_call_id"

    .line 379470
    invoke-static {v1, v0}, LX/007;->A0U(LX/00E;Ljava/lang/String;)V

    .line 379471
    iget-object v0, v3, LX/3ZK;->A1c:LX/00E;

    .line 379472
    iget-object v0, v0, LX/00E;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v1

    .line 379473
    const-string v0, "voip_call_ab_test_bucket"

    invoke-interface {v1, v0}, Landroid/content/SharedPreferences$Editor;->remove(Ljava/lang/String;)Landroid/content/SharedPreferences$Editor;

    invoke-interface {v1}, Landroid/content/SharedPreferences$Editor;->apply()V

    .line 379474
    invoke-virtual/range {p0 .. p0}, LX/3ZK;->A0B()V

    .line 379475
    invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J

    move-result-wide v2

    sub-long/2addr v2, v9

    .line 379476
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voip/service/stop elapsed "

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, v2, v3}, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;

    const-string v0, " ms"

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379477
    return-void

    .line 379478
    :cond_b
    invoke-virtual {v0}, Landroid/media/MediaPlayer;->getDuration()I

    move-result v6

    goto :goto_4

    .line 379479
    :cond_c
    invoke-virtual/range {p0 .. p0}, LX/3ZK;->A0I()V

    goto :goto_5

    .line 379480
    :catchall_0
    move-exception v0

    monitor-exit v3

    throw v0
.end method

.method public A0b(LX/0WA;)V
    .locals 2

    .line 379481
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voip/service/resetVoipUiIfEquals "

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, p0}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379482
    iget-object v0, p0, LX/3ZK;->A0a:LX/0WA;

    if-ne v0, p1, :cond_0

    const/4 v0, 0x0

    .line 379483
    iput-object v0, p0, LX/3ZK;->A0a:LX/0WA;

    :cond_0
    return-void
.end method

.method public final A0c(Ljava/lang/String;)V
    .locals 3

    if-eqz p1, :cond_0

    .line 379484
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCurrentCallId()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {p1, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-nez v0, :cond_0

    .line 379485
    invoke-static {p1}, Lcom/whatsapp/voipcalling/Voip;->clearVoipParam(Ljava/lang/String;)V

    .line 379486
    return-void

    :cond_0
    sget-object v2, LX/3Ce;->A06:LX/3Ce;

    iget-object v1, p0, LX/3ZK;->A1d:LX/01Q;

    const v0, 0x7f120e1f

    .line 379487
    invoke-virtual {v1, v0}, LX/01Q;->A05(I)Ljava/lang/String;

    move-result-object v0

    .line 379488
    invoke-static {v2, v0}, LX/3ZK;->A01(LX/3Ce;Ljava/lang/String;)V

    return-void
.end method

.method public A0d(Ljava/lang/String;I)V
    .locals 6

    .line 379489
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v4

    .line 379490
    invoke-static {v4}, Lcom/whatsapp/voipcalling/Voip;->A09(Lcom/whatsapp/voipcalling/CallInfo;)Z

    move-result v0

    if-nez v0, :cond_0

    const-string v0, "voip/service/acceptCall No active call"

    .line 379491
    invoke-static {v0}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;)V

    return-void

    .line 379492
    :cond_0
    iget-object v0, v4, Lcom/whatsapp/voipcalling/CallInfo;->callWaitingInfo:LX/20k;

    .line 379493
    iget-object v0, v0, LX/20k;->A02:Ljava/lang/String;

    invoke-virtual {p1, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v5

    if-eqz p2, :cond_1

    .line 379494
    iget-object v1, p0, LX/3ZK;->A23:Ljava/util/Map;

    invoke-static {p2}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v0

    invoke-interface {v1, p1, v0}, Ljava/util/Map;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    :cond_1
    if-nez v5, :cond_4

    const/4 v3, 0x1

    .line 379495
    iput-boolean v3, p0, LX/3ZK;->A0u:Z

    .line 379496
    invoke-virtual {p0}, LX/3ZK;->A0A()V

    .line 379497
    iget-object v2, p0, LX/3ZK;->A1y:LX/3Co;

    .line 379498
    iget v1, v2, LX/3Co;->A00:I

    const/4 v0, 0x1

    if-eq v1, v3, :cond_2

    const/4 v0, 0x0

    .line 379499
    :cond_2
    if-eqz v0, :cond_3

    .line 379500
    const/4 v0, 0x0

    invoke-virtual {v2, v0, v4}, LX/3Co;->A06(ZLcom/whatsapp/voipcalling/CallInfo;)V

    .line 379501
    :cond_3
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->ACCEPT_SENT:Lcom/whatsapp/voipcalling/Voip$CallState;

    invoke-virtual {p0, v0}, LX/3ZK;->A0Z(Lcom/whatsapp/voipcalling/Voip$CallState;)V

    .line 379502
    :cond_4
    new-instance v4, LX/3BE;

    invoke-direct {v4, p0, v5, p1}, LX/3BE;-><init>(LX/3ZK;ZLjava/lang/String;)V

    .line 379503
    iget-object v3, p0, LX/3ZK;->A0s:Ljava/util/concurrent/ScheduledExecutorService;

    const-wide/16 v1, 0x64

    sget-object v0, Ljava/util/concurrent/TimeUnit;->MILLISECONDS:Ljava/util/concurrent/TimeUnit;

    invoke-interface {v3, v4, v1, v2, v0}, Ljava/util/concurrent/ScheduledExecutorService;->schedule(Ljava/lang/Runnable;JLjava/util/concurrent/TimeUnit;)Ljava/util/concurrent/ScheduledFuture;

    return-void
.end method

.method public final A0e(Ljava/lang/String;Lcom/whatsapp/jid/DeviceJid;Ljava/lang/String;Lcom/whatsapp/protocol/VoipStanzaChildNode;Z)V
    .locals 10

    .line 379504
    const-string v0, "enc"

    .line 379505
    invoke-static {p4, v0}, LX/0OQ;->A0D(Lcom/whatsapp/protocol/VoipStanzaChildNode;Ljava/lang/String;)Lcom/whatsapp/protocol/VoipStanzaChildNode;

    move-result-object v2

    .line 379506
    const/4 v1, 0x0

    if-nez v2, :cond_0

    const-string v0, "invalid enc node!"

    .line 379507
    invoke-static {v1, v0}, LX/00A;->A0A(ZLjava/lang/String;)V

    return-void

    .line 379508
    :cond_0
    invoke-static {v2}, LX/0OQ;->A0F(Lcom/whatsapp/protocol/VoipStanzaChildNode;)Ljava/lang/Byte;

    move-result-object v0

    if-nez v0, :cond_1

    const-string v0, "invalid retry count!"

    .line 379509
    invoke-static {v1, v0}, LX/00A;->A0A(ZLjava/lang/String;)V

    return-void

    .line 379510
    :cond_1
    invoke-virtual {v2}, Lcom/whatsapp/protocol/VoipStanzaChildNode;->getDataCopy()[B

    move-result-object v2

    if-nez v2, :cond_2

    const-string v0, "VoiceService:sendReKeyStanza, e2e key is empty"

    .line 379511
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/String;)V

    const-string v0, "e2e key is empty!"

    .line 379512
    invoke-static {v1, v0}, LX/00A;->A0A(ZLjava/lang/String;)V

    return-void

    .line 379513
    :cond_2
    invoke-virtual {v0}, Ljava/lang/Byte;->byteValue()B

    move-result v3

    .line 379514
    iget-object v1, p0, LX/3ZK;->A26:Ljava/util/Map;

    invoke-static {v3}, Ljava/lang/Byte;->valueOf(B)Ljava/lang/Byte;

    move-result-object v0

    move-object v6, p2

    invoke-interface {v1, p2, v0}, Ljava/util/Map;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    .line 379515
    new-instance v0, Ljava/util/HashMap;

    invoke-direct {v0}, Ljava/util/HashMap;-><init>()V

    .line 379516
    invoke-virtual {v0, p2, v2}, Ljava/util/HashMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    .line 379517
    invoke-virtual {p0, v0}, LX/3ZK;->A04(Ljava/util/Map;)Ljava/util/Map;

    move-result-object v0

    const/4 v2, 0x0

    if-eqz v0, :cond_5

    .line 379518
    invoke-interface {v0, p2}, Ljava/util/Map;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v1

    check-cast v1, LX/0FV;

    :goto_0
    move-object v7, p3

    if-eqz v1, :cond_3

    .line 379519
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCurrentCallId()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {p3, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-nez v0, :cond_4

    .line 379520
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "VoiceService:rekeyEncryptionTask("

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, p3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v0, ", "

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, p2}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v0, ", the call has ended, do nothing)"

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;)V

    .line 379521
    :cond_3
    :goto_1
    if-nez v2, :cond_6

    return-void

    .line 379522
    :cond_4
    iget-object v0, p0, LX/3ZK;->A26:Ljava/util/Map;

    invoke-interface {v0, p2}, Ljava/util/Map;->remove(Ljava/lang/Object;)Ljava/lang/Object;

    move-object v2, v1

    goto :goto_1

    .line 379523
    :cond_5
    move-object v1, v2

    goto :goto_0

    .line 379524
    :cond_6
    invoke-static {p4, v2, v3}, LX/0OQ;->A0C(Lcom/whatsapp/protocol/VoipStanzaChildNode;LX/0FV;B)Lcom/whatsapp/protocol/VoipStanzaChildNode;

    move-result-object v8

    .line 379525
    iget-object v0, p0, LX/3ZK;->A1I:LX/1XX;

    new-instance v4, LX/1zY;

    move-object v5, p1

    move v9, p5

    invoke-direct/range {v4 .. v9}, LX/1zY;-><init>(Ljava/lang/String;Lcom/whatsapp/jid/Jid;Ljava/lang/String;Lcom/whatsapp/protocol/VoipStanzaChildNode;Z)V

    .line 379526
    iget-object v3, v0, LX/1XX;->A01:LX/0BG;

    .line 379527
    const/4 v2, 0x0

    const/4 v1, 0x0

    const/16 v0, 0xce

    .line 379528
    invoke-static {v1, v2, v0, v2, v4}, Landroid/os/Message;->obtain(Landroid/os/Handler;IIILjava/lang/Object;)Landroid/os/Message;

    move-result-object v2

    .line 379529
    iget-object v1, v4, LX/1zY;->A03:Ljava/lang/String;

    const/4 v0, 0x1

    .line 379530
    invoke-virtual {v3, v2, v1, v0}, LX/0BG;->A09(Landroid/os/Message;Ljava/lang/String;Z)V

    return-void
.end method

.method public final A0f(Ljava/lang/String;LX/20n;IJLjava/lang/Integer;Ljava/lang/String;Ljava/lang/String;ZLcom/whatsapp/voipcalling/CallGroupInfo;Z)V
    .locals 14

    .line 379531
    move-object/from16 v9, p2

    iget-object v0, v9, LX/20n;->A06:LX/20m;

    iget-boolean v1, v0, LX/20m;->A03:Z

    const/4 v13, 0x1

    xor-int/2addr v1, v13

    const-string v0, "processMissedIncomingCall should only be called on callee side"

    .line 379532
    invoke-static {v1, v0}, LX/00A;->A0A(ZLjava/lang/String;)V

    .line 379533
    sget-object v0, Lcom/whatsapp/voipcalling/Voip;->A01:LX/03W;

    .line 379534
    invoke-virtual {v0, p1}, LX/03W;->A01(Ljava/lang/String;)V

    const-string v0, "test.name"

    .line 379535
    invoke-static {v0, p1}, Lcom/whatsapp/voipcalling/Voip;->getVoipParamForCall(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v4

    if-eqz v4, :cond_0

    .line 379536
    invoke-virtual {v4}, Ljava/lang/String;->isEmpty()Z

    move-result v0

    if-eqz v0, :cond_1

    :cond_0
    const/4 v4, 0x0

    .line 379537
    :cond_1
    invoke-static {p1}, Lcom/whatsapp/voipcalling/Voip;->clearVoipParam(Ljava/lang/String;)V

    const/4 v5, 0x2

    .line 379538
    invoke-virtual {v9, v5}, LX/20n;->A03(I)V

    const/4 v10, 0x5

    const/4 v8, 0x0

    move-object/from16 v0, p10

    if-eqz p10, :cond_3

    .line 379539
    iget-object v12, v0, Lcom/whatsapp/voipcalling/CallGroupInfo;->participants:[Lcom/whatsapp/voipcalling/CallParticipant;

    array-length v11, v12

    if-lez v11, :cond_3

    .line 379540
    const/4 v7, 0x0

    const/4 v1, 0x0

    :goto_0
    if-ge v7, v11, :cond_4

    aget-object v6, v12, v7

    .line 379541
    iget-object v2, v6, Lcom/whatsapp/voipcalling/CallParticipant;->state:Ljava/lang/String;

    const-string v0, "connected"

    invoke-virtual {v0, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_2

    .line 379542
    iget-object v0, v6, Lcom/whatsapp/voipcalling/CallParticipant;->jid:Lcom/whatsapp/jid/UserJid;

    invoke-virtual {v9, v0, v10}, LX/20n;->A06(Lcom/whatsapp/jid/UserJid;I)V

    add-int/lit8 v1, v1, 0x1

    :cond_2
    add-int/lit8 v7, v7, 0x1

    goto :goto_0

    :cond_3
    const/4 v1, 0x0

    .line 379543
    :cond_4
    iget-object v0, p0, LX/3ZK;->A1g:LX/07h;

    invoke-virtual {v0, v9}, LX/07h;->A08(LX/20n;)V

    .line 379544
    iget-object v0, p0, LX/3ZK;->A0L:Landroid/os/Handler;

    move/from16 v2, p11

    invoke-static {v0, v10, v2, v8, v9}, Landroid/os/Message;->obtain(Landroid/os/Handler;IIILjava/lang/Object;)Landroid/os/Message;

    move-result-object v0

    .line 379545
    invoke-virtual {v0}, Landroid/os/Message;->sendToTarget()V

    .line 379546
    iget-object v0, v9, LX/20n;->A06:LX/20m;

    iget-object v7, v0, LX/20m;->A01:Lcom/whatsapp/jid/UserJid;

    .line 379547
    new-instance v6, Lcom/whatsapp/fieldstats/events/WamCall;

    invoke-direct {v6}, Lcom/whatsapp/fieldstats/events/WamCall;-><init>()V

    .line 379548
    invoke-static/range {p3 .. p3}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v0

    iput-object v0, v6, Lcom/whatsapp/fieldstats/events/WamCall;->callResult:Ljava/lang/Integer;

    .line 379549
    invoke-static {v5}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v2

    iput-object v2, v6, Lcom/whatsapp/fieldstats/events/WamCall;->callSide:Ljava/lang/Integer;

    if-lez v1, :cond_5

    .line 379550
    invoke-static {v13}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v0

    iput-object v0, v6, Lcom/whatsapp/fieldstats/events/WamCall;->groupCallIsLastSegment:Ljava/lang/Boolean;

    .line 379551
    iput-object v0, v6, Lcom/whatsapp/fieldstats/events/WamCall;->groupCallIsGroupCallInvitee:Ljava/lang/Boolean;

    int-to-long v0, v1

    .line 379552
    invoke-static {v0, v1}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v0

    iput-object v0, v6, Lcom/whatsapp/fieldstats/events/WamCall;->numConnectedParticipants:Ljava/lang/Long;

    .line 379553
    iput-object v2, v6, Lcom/whatsapp/fieldstats/events/WamCall;->fieldStatsRowType:Ljava/lang/Integer;

    .line 379554
    :cond_5
    iput-object v4, v6, Lcom/whatsapp/fieldstats/events/WamCall;->callTestBucket:Ljava/lang/String;

    .line 379555
    iget-object v0, p0, LX/3ZK;->A23:Ljava/util/Map;

    invoke-interface {v0, p1}, Ljava/util/Map;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Ljava/lang/Integer;

    iput-object v0, v6, Lcom/whatsapp/fieldstats/events/WamCall;->incomingCallUiAction:Ljava/lang/Integer;

    .line 379556
    invoke-static/range {p4 .. p5}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v8

    const/4 v9, 0x0

    const/4 v10, 0x0

    move-object v5, p0

    .line 379557
    move-object/from16 v12, p7

    move-object/from16 v11, p6

    move-object/from16 v13, p8

    invoke-virtual/range {v5 .. v13}, LX/3ZK;->A0L(Lcom/whatsapp/fieldstats/events/WamCall;Lcom/whatsapp/jid/UserJid;Ljava/lang/Long;Ljava/lang/Integer;Ljava/lang/Integer;Ljava/lang/Integer;Ljava/lang/String;Ljava/lang/String;)V

    .line 379558
    iget-object v0, p0, LX/3ZK;->A1k:LX/0Ex;

    move/from16 v1, p9

    invoke-virtual {v0, v6, v1}, LX/0Ex;->A06(Lcom/whatsapp/fieldstats/events/WamCall;Z)V

    return-void
.end method

.method public A0g(Ljava/lang/String;Ljava/lang/String;I)V
    .locals 2

    const-string v0, "voip/call/reject"

    .line 379559
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    if-eqz p3, :cond_0

    .line 379560
    iget-object v1, p0, LX/3ZK;->A23:Ljava/util/Map;

    invoke-static {p3}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v0

    invoke-interface {v1, p1, v0}, Ljava/util/Map;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

    .line 379561
    :cond_0
    iget-object v1, p0, LX/3ZK;->A0s:Ljava/util/concurrent/ScheduledExecutorService;

    new-instance v0, LX/3B1;

    invoke-direct {v0, p1, p2}, LX/3B1;-><init>(Ljava/lang/String;Ljava/lang/String;)V

    invoke-interface {v1, v0}, Ljava/util/concurrent/ScheduledExecutorService;->execute(Ljava/lang/Runnable;)V

    return-void
.end method

.method public final A0h(Ljava/util/List;I)V
    .locals 3

    .line 379562
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v2

    const/4 v1, 0x1

    if-eq p2, v1, :cond_1

    const/4 v0, 0x2

    if-ne p2, v0, :cond_2

    if-eqz v2, :cond_2

    .line 379563
    iget-object v0, v2, Lcom/whatsapp/voipcalling/CallInfo;->participants:Ljava/util/Map;

    .line 379564
    invoke-interface {v0}, Ljava/util/Map;->size()I

    move-result v0

    .line 379565
    invoke-static {p1, v0, v1}, Lcom/whatsapp/voipcalling/VoipErrorDialogFragment;->A00(Ljava/util/List;IZ)Lcom/whatsapp/voipcalling/VoipErrorDialogFragment;

    move-result-object v1

    .line 379566
    :goto_0
    iget-object v0, p0, LX/3ZK;->A1O:LX/04f;

    .line 379567
    iget-object v0, v0, LX/04f;->A00:LX/05Y;

    if-eqz v0, :cond_0

    if-eqz v1, :cond_0

    .line 379568
    invoke-interface {v0, v1}, LX/05Y;->AMk(Landroidx/fragment/app/DialogFragment;)V

    :cond_0
    return-void

    .line 379569
    :cond_1
    if-eqz v2, :cond_2

    .line 379570
    iget-object v0, v2, Lcom/whatsapp/voipcalling/CallInfo;->participants:Ljava/util/Map;

    .line 379571
    invoke-interface {v0}, Ljava/util/Map;->size()I

    move-result v1

    const/4 v0, 0x0

    .line 379572
    invoke-static {p1, v1, v0}, Lcom/whatsapp/voipcalling/VoipErrorDialogFragment;->A00(Ljava/util/List;IZ)Lcom/whatsapp/voipcalling/VoipErrorDialogFragment;

    move-result-object v1

    goto :goto_0

    .line 379573
    :cond_2
    const/4 v1, 0x0

    goto :goto_0
.end method

.method public final A0i(Z)V
    .locals 5

    const-string v0, "options.spam_call_threshold_seconds"

    .line 379574
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A01(Ljava/lang/String;)Ljava/lang/Integer;

    move-result-object v0

    if-eqz v0, :cond_0

    .line 379575
    invoke-virtual {v0}, Ljava/lang/Integer;->intValue()I

    move-result v0

    iput v0, p0, LX/3ZK;->A05:I

    :cond_0
    const-string v0, "options.offer_ack_timeout"

    .line 379576
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A01(Ljava/lang/String;)Ljava/lang/Integer;

    move-result-object v0

    iput-object v0, p0, LX/3ZK;->A0d:Ljava/lang/Integer;

    const-string v0, "options.android_audio_mode_in_call"

    .line 379577
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A01(Ljava/lang/String;)Ljava/lang/Integer;

    move-result-object v0

    iput-object v0, p0, LX/3ZK;->A0b:Ljava/lang/Integer;

    const-string v0, "options.audio_level_adjust"

    .line 379578
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A01(Ljava/lang/String;)Ljava/lang/Integer;

    move-result-object v0

    if-eqz v0, :cond_1

    .line 379579
    invoke-virtual {v0}, Ljava/lang/Integer;->intValue()I

    move-result v0

    iput v0, p0, LX/3ZK;->A09:I

    :cond_1
    const-string v0, "options.call_start_delay"

    .line 379580
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A01(Ljava/lang/String;)Ljava/lang/Integer;

    move-result-object v1

    const-string v2, "call_start_delay"

    if-eqz v1, :cond_11

    .line 379581
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    invoke-virtual {v1}, Ljava/lang/Integer;->intValue()I

    move-result v1

    .line 379582
    iget-object v0, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v0

    .line 379583
    invoke-interface {v0, v2, v1}, Landroid/content/SharedPreferences$Editor;->putInt(Ljava/lang/String;I)Landroid/content/SharedPreferences$Editor;

    invoke-interface {v0}, Landroid/content/SharedPreferences$Editor;->apply()V

    .line 379584
    :cond_2
    :goto_0
    const-string v0, "vid_driver.camera_width"

    .line 379585
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A01(Ljava/lang/String;)Ljava/lang/Integer;

    move-result-object v2

    const-string v0, "vid_driver.camera_height"

    .line 379586
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A01(Ljava/lang/String;)Ljava/lang/Integer;

    move-result-object v1

    const-string v4, "video_call_front_camera_height"

    const-string v3, "video_call_front_camera_width"

    if-eqz v2, :cond_e

    if-eqz v1, :cond_e

    .line 379587
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    invoke-virtual {v2}, Ljava/lang/Integer;->intValue()I

    move-result v2

    invoke-virtual {v1}, Ljava/lang/Integer;->intValue()I

    move-result v1

    .line 379588
    iget-object v0, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v0

    .line 379589
    invoke-interface {v0, v3, v2}, Landroid/content/SharedPreferences$Editor;->putInt(Ljava/lang/String;I)Landroid/content/SharedPreferences$Editor;

    .line 379590
    invoke-interface {v0, v4, v1}, Landroid/content/SharedPreferences$Editor;->putInt(Ljava/lang/String;I)Landroid/content/SharedPreferences$Editor;

    .line 379591
    invoke-interface {v0}, Landroid/content/SharedPreferences$Editor;->apply()V

    .line 379592
    :cond_3
    :goto_1
    const-string v0, "vid_driver.back_camera_width"

    .line 379593
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A01(Ljava/lang/String;)Ljava/lang/Integer;

    move-result-object v2

    const-string v0, "vid_driver.back_camera_height"

    .line 379594
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A01(Ljava/lang/String;)Ljava/lang/Integer;

    move-result-object v1

    const-string v4, "video_call_back_camera_height"

    const-string v3, "video_call_back_camera_width"

    if-eqz v2, :cond_b

    if-eqz v1, :cond_b

    .line 379595
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    invoke-virtual {v2}, Ljava/lang/Integer;->intValue()I

    move-result v2

    invoke-virtual {v1}, Ljava/lang/Integer;->intValue()I

    move-result v1

    .line 379596
    iget-object v0, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v0

    .line 379597
    invoke-interface {v0, v3, v2}, Landroid/content/SharedPreferences$Editor;->putInt(Ljava/lang/String;I)Landroid/content/SharedPreferences$Editor;

    .line 379598
    invoke-interface {v0, v4, v1}, Landroid/content/SharedPreferences$Editor;->putInt(Ljava/lang/String;I)Landroid/content/SharedPreferences$Editor;

    .line 379599
    invoke-interface {v0}, Landroid/content/SharedPreferences$Editor;->apply()V

    .line 379600
    :cond_4
    :goto_2
    const-string v0, "options.portrait_mode_threshold"

    .line 379601
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A01(Ljava/lang/String;)Ljava/lang/Integer;

    move-result-object v1

    const-string v2, "portrait_mode_threshold"

    if-eqz v1, :cond_a

    .line 379602
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    invoke-virtual {v1}, Ljava/lang/Integer;->intValue()I

    move-result v1

    .line 379603
    iget-object v0, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v0

    .line 379604
    invoke-interface {v0, v2, v1}, Landroid/content/SharedPreferences$Editor;->putInt(Ljava/lang/String;I)Landroid/content/SharedPreferences$Editor;

    invoke-interface {v0}, Landroid/content/SharedPreferences$Editor;->apply()V

    .line 379605
    :goto_3
    const-string v0, "options.landscape_mode_threshold"

    .line 379606
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A01(Ljava/lang/String;)Ljava/lang/Integer;

    move-result-object v1

    const-string v2, "landscape_mode_threshold"

    if-eqz v1, :cond_9

    .line 379607
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    invoke-virtual {v1}, Ljava/lang/Integer;->intValue()I

    move-result v1

    .line 379608
    iget-object v0, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v0

    .line 379609
    invoke-interface {v0, v2, v1}, Landroid/content/SharedPreferences$Editor;->putInt(Ljava/lang/String;I)Landroid/content/SharedPreferences$Editor;

    invoke-interface {v0}, Landroid/content/SharedPreferences$Editor;->apply()V

    .line 379610
    :goto_4
    const-string v0, "options.enable_callee_message_buffer"

    .line 379611
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A01(Ljava/lang/String;)Ljava/lang/Integer;

    move-result-object v3

    const-string v2, "call_enable_callee_message_buffer"

    if-eqz v3, :cond_8

    .line 379612
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379613
    iget-object v0, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v1

    .line 379614
    invoke-virtual {v3}, Ljava/lang/Integer;->intValue()I

    move-result v0

    invoke-interface {v1, v2, v0}, Landroid/content/SharedPreferences$Editor;->putInt(Ljava/lang/String;I)Landroid/content/SharedPreferences$Editor;

    invoke-interface {v1}, Landroid/content/SharedPreferences$Editor;->apply()V

    .line 379615
    :goto_5
    const-string v0, "options.enable_caller_message_buffer"

    .line 379616
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A01(Ljava/lang/String;)Ljava/lang/Integer;

    move-result-object v3

    const-string v2, "call_enable_caller_message_buffer"

    if-eqz v3, :cond_7

    .line 379617
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379618
    iget-object v0, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v1

    .line 379619
    invoke-virtual {v3}, Ljava/lang/Integer;->intValue()I

    move-result v0

    invoke-interface {v1, v2, v0}, Landroid/content/SharedPreferences$Editor;->putInt(Ljava/lang/String;I)Landroid/content/SharedPreferences$Editor;

    invoke-interface {v1}, Landroid/content/SharedPreferences$Editor;->apply()V

    .line 379620
    :goto_6
    const-string v0, "options.enable_touch_near_ear_fix"

    .line 379621
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A00(Ljava/lang/String;)Ljava/lang/Boolean;

    move-result-object v1

    const-string v2, "enable_touch_near_ear_fix"

    if-eqz v1, :cond_6

    .line 379622
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    invoke-virtual {v1}, Ljava/lang/Boolean;->booleanValue()Z

    move-result v1

    .line 379623
    iget-object v0, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v0

    .line 379624
    invoke-interface {v0, v2, v1}, Landroid/content/SharedPreferences$Editor;->putBoolean(Ljava/lang/String;Z)Landroid/content/SharedPreferences$Editor;

    invoke-interface {v0}, Landroid/content/SharedPreferences$Editor;->apply()V

    .line 379625
    :goto_7
    const-string v0, "options.android_telecom_framework_caller"

    .line 379626
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A00(Ljava/lang/String;)Ljava/lang/Boolean;

    move-result-object v1

    const-string v2, "enable_telecom_framework_caller"

    if-eqz v1, :cond_5

    .line 379627
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    invoke-virtual {v1}, Ljava/lang/Boolean;->booleanValue()Z

    move-result v1

    .line 379628
    iget-object v0, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v0

    .line 379629
    invoke-interface {v0, v2, v1}, Landroid/content/SharedPreferences$Editor;->putBoolean(Ljava/lang/String;Z)Landroid/content/SharedPreferences$Editor;

    invoke-interface {v0}, Landroid/content/SharedPreferences$Editor;->apply()V

    .line 379630
    :goto_8
    const-string v0, "vid_rc.dyn_vpx_lib_state"

    .line 379631
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A01(Ljava/lang/String;)Ljava/lang/Integer;

    move-result-object v1

    .line 379632
    sget-boolean v0, LX/3ZK;->A2D:Z

    if-nez v0, :cond_12

    if-eqz v1, :cond_12

    invoke-virtual {v1}, Ljava/lang/Integer;->intValue()I

    move-result v0

    if-eqz v0, :cond_12

    const/4 v0, 0x1

    .line 379633
    sput-boolean v0, LX/3ZK;->A2D:Z

    goto/16 :goto_9

    .line 379634
    :cond_5
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379635
    invoke-static {v0, v2}, LX/3ZK;->A02(LX/0Zd;Ljava/lang/String;)V

    goto :goto_8

    .line 379636
    :cond_6
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379637
    invoke-static {v0, v2}, LX/3ZK;->A02(LX/0Zd;Ljava/lang/String;)V

    goto :goto_7

    .line 379638
    :cond_7
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379639
    invoke-static {v0, v2}, LX/3ZK;->A02(LX/0Zd;Ljava/lang/String;)V

    goto :goto_6

    .line 379640
    :cond_8
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379641
    invoke-static {v0, v2}, LX/3ZK;->A02(LX/0Zd;Ljava/lang/String;)V

    goto/16 :goto_5

    .line 379642
    :cond_9
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379643
    invoke-static {v0, v2}, LX/3ZK;->A02(LX/0Zd;Ljava/lang/String;)V

    goto/16 :goto_4

    .line 379644
    :cond_a
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379645
    invoke-static {v0, v2}, LX/3ZK;->A02(LX/0Zd;Ljava/lang/String;)V

    goto/16 :goto_3

    .line 379646
    :cond_b
    iget-object v2, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379647
    iget-object v1, v2, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v1, v3}, Landroid/content/SharedPreferences;->contains(Ljava/lang/String;)Z

    move-result v0

    if-nez v0, :cond_c

    iget-object v1, v2, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    .line 379648
    invoke-interface {v1, v4}, Landroid/content/SharedPreferences;->contains(Ljava/lang/String;)Z

    move-result v1

    const/4 v0, 0x0

    if-eqz v1, :cond_d

    :cond_c
    const/4 v0, 0x1

    .line 379649
    :cond_d
    if-eqz v0, :cond_4

    .line 379650
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379651
    iget-object v0, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v0

    .line 379652
    invoke-interface {v0, v3}, Landroid/content/SharedPreferences$Editor;->remove(Ljava/lang/String;)Landroid/content/SharedPreferences$Editor;

    invoke-interface {v0, v4}, Landroid/content/SharedPreferences$Editor;->remove(Ljava/lang/String;)Landroid/content/SharedPreferences$Editor;

    invoke-interface {v0}, Landroid/content/SharedPreferences$Editor;->apply()V

    goto/16 :goto_2

    .line 379653
    :cond_e
    iget-object v2, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379654
    iget-object v1, v2, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v1, v3}, Landroid/content/SharedPreferences;->contains(Ljava/lang/String;)Z

    move-result v0

    if-nez v0, :cond_f

    iget-object v1, v2, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    .line 379655
    invoke-interface {v1, v4}, Landroid/content/SharedPreferences;->contains(Ljava/lang/String;)Z

    move-result v1

    const/4 v0, 0x0

    if-eqz v1, :cond_10

    :cond_f
    const/4 v0, 0x1

    .line 379656
    :cond_10
    if-eqz v0, :cond_3

    .line 379657
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379658
    iget-object v0, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v0

    .line 379659
    invoke-interface {v0, v3}, Landroid/content/SharedPreferences$Editor;->remove(Ljava/lang/String;)Landroid/content/SharedPreferences$Editor;

    invoke-interface {v0, v4}, Landroid/content/SharedPreferences$Editor;->remove(Ljava/lang/String;)Landroid/content/SharedPreferences$Editor;

    invoke-interface {v0}, Landroid/content/SharedPreferences$Editor;->apply()V

    goto/16 :goto_1

    .line 379660
    :cond_11
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379661
    iget-object v0, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0, v2}, Landroid/content/SharedPreferences;->contains(Ljava/lang/String;)Z

    move-result v0

    if-eqz v0, :cond_2

    .line 379662
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379663
    invoke-static {v0, v2}, LX/3ZK;->A02(LX/0Zd;Ljava/lang/String;)V

    goto/16 :goto_0

    .line 379664
    :goto_9
    :try_start_0
    iget-object v4, p0, LX/3ZK;->A1q:Lcom/whatsapp/util/WhatsAppLibLoader;

    iget-object v3, p0, LX/3ZK;->A1F:Landroid/content/Context;

    new-array v2, v0, [Ljava/lang/String;

    const/4 v1, 0x0

    const-string v0, "vpx_1_8_1"

    aput-object v0, v2, v1

    invoke-virtual {v4, v3, v2}, Lcom/whatsapp/util/WhatsAppLibLoader;->A04(Landroid/content/Context;[Ljava/lang/String;)V

    const-string v0, "voip/voip-params Loaded libvpx 1.8.1 at Java layer"

    .line 379665
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    goto :goto_a
    :try_end_0
    .catch Ljava/lang/UnsatisfiedLinkError; {:try_start_0 .. :try_end_0} :catch_0

    :catch_0
    move-exception v1

    const-string v0, "voip/voip-params hit error while loading libvpx 1.8.1"

    .line 379666
    invoke-static {v0, v1}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;Ljava/lang/Throwable;)V

    :cond_12
    :goto_a
    if-eqz p1, :cond_13

    const-string v0, "options.disable_device_specific_camera_size"

    .line 379667
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A00(Ljava/lang/String;)Ljava/lang/Boolean;

    move-result-object v1

    const-string v2, "disable_device_specific_camera_size"

    if-eqz v1, :cond_16

    .line 379668
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    invoke-virtual {v1}, Ljava/lang/Boolean;->booleanValue()Z

    move-result v1

    .line 379669
    iget-object v0, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v0

    .line 379670
    invoke-interface {v0, v2, v1}, Landroid/content/SharedPreferences$Editor;->putBoolean(Ljava/lang/String;Z)Landroid/content/SharedPreferences$Editor;

    invoke-interface {v0}, Landroid/content/SharedPreferences$Editor;->apply()V

    .line 379671
    :goto_b
    const-string v0, "options.android_camera2_support_level"

    .line 379672
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A06(Ljava/lang/String;)Ljava/lang/String;

    move-result-object v2

    const-string v1, "camera2_required_hardware_support_level"

    if-eqz v2, :cond_15

    .line 379673
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379674
    iget-object v0, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v0

    .line 379675
    invoke-interface {v0, v1, v2}, Landroid/content/SharedPreferences$Editor;->putString(Ljava/lang/String;Ljava/lang/String;)Landroid/content/SharedPreferences$Editor;

    .line 379676
    invoke-interface {v0}, Landroid/content/SharedPreferences$Editor;->apply()V

    .line 379677
    :goto_c
    const-string v0, "options.force_passive_capture_dev_stream_role"

    .line 379678
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A00(Ljava/lang/String;)Ljava/lang/Boolean;

    move-result-object v1

    const-string v2, "force_passive_capture_dev_stream_role"

    if-eqz v1, :cond_14

    .line 379679
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    invoke-virtual {v1}, Ljava/lang/Boolean;->booleanValue()Z

    move-result v1

    .line 379680
    iget-object v0, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v0

    .line 379681
    invoke-interface {v0, v2, v1}, Landroid/content/SharedPreferences$Editor;->putBoolean(Ljava/lang/String;Z)Landroid/content/SharedPreferences$Editor;

    invoke-interface {v0}, Landroid/content/SharedPreferences$Editor;->apply()V

    .line 379682
    :goto_d
    const-string v0, "options.start_video_call_no_preview"

    .line 379683
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A00(Ljava/lang/String;)Ljava/lang/Boolean;

    move-result-object v1

    if-eqz v1, :cond_17

    .line 379684
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    invoke-virtual {v1}, Ljava/lang/Boolean;->booleanValue()Z

    move-result v2

    .line 379685
    iget-object v0, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v0}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v1

    .line 379686
    const-string v0, "start_video_call_no_preview"

    invoke-interface {v1, v0, v2}, Landroid/content/SharedPreferences$Editor;->putBoolean(Ljava/lang/String;Z)Landroid/content/SharedPreferences$Editor;

    invoke-interface {v1}, Landroid/content/SharedPreferences$Editor;->apply()V

    .line 379687
    :cond_13
    return-void

    .line 379688
    :cond_14
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379689
    invoke-static {v0, v2}, LX/3ZK;->A02(LX/0Zd;Ljava/lang/String;)V

    goto :goto_d

    .line 379690
    :cond_15
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379691
    invoke-static {v0, v1}, LX/3ZK;->A02(LX/0Zd;Ljava/lang/String;)V

    goto :goto_c

    .line 379692
    :cond_16
    iget-object v0, p0, LX/3ZK;->A20:LX/0Zd;

    .line 379693
    invoke-static {v0, v2}, LX/3ZK;->A02(LX/0Zd;Ljava/lang/String;)V

    goto :goto_b

    .line 379694
    :cond_17
    iget-object v1, p0, LX/3ZK;->A20:LX/0Zd;

    const-string v0, "start_video_call_no_preview"

    .line 379695
    invoke-static {v1, v0}, LX/3ZK;->A02(LX/0Zd;Ljava/lang/String;)V

    return-void
.end method

.method public final A0j(ZLcom/whatsapp/jid/UserJid;Ljava/lang/String;)V
    .locals 12

    .line 379696
    invoke-static {}, LX/00A;->A01()V

    .line 379697
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voip/service/start "

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, p0}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379698
    iget-boolean v0, p0, LX/3ZK;->A17:Z

    if-eqz v0, :cond_0

    const-string v0, "voip/start/started, do nothing"

    .line 379699
    invoke-static {v0}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;)V

    return-void

    .line 379700
    :cond_0
    invoke-virtual {p0, p3}, LX/3ZK;->A03(Ljava/lang/String;)LX/3CJ;

    move-result-object v0

    const/4 v4, 0x1

    const/4 v2, 0x0

    const/4 v11, 0x0

    if-eqz v0, :cond_1

    const/4 v11, 0x1

    :cond_1
    if-nez v11, :cond_4

    .line 379701
    iget-object v0, p0, LX/3ZK;->A0R:Landroid/telephony/TelephonyManager;

    if-nez v0, :cond_2

    const/4 v1, 0x0

    .line 379702
    :goto_0
    if-eqz p1, :cond_3

    if-eqz v1, :cond_3

    const-string v0, "voip/start/cellularCallInProgress "

    .line 379703
    invoke-static {v0, v1}, LX/007;->A0f(Ljava/lang/String;I)V

    return-void

    .line 379704
    :cond_2
    invoke-virtual {v0}, Landroid/telephony/TelephonyManager;->getCallState()I

    move-result v1

    goto :goto_0

    .line 379705
    :cond_3
    iget-object v3, p0, LX/3ZK;->A0R:Landroid/telephony/TelephonyManager;

    if-eqz v3, :cond_4

    .line 379706
    iget-object v1, p0, LX/3ZK;->A0Q:Landroid/telephony/PhoneStateListener;

    const/16 v0, 0x20

    invoke-virtual {v3, v1, v0}, Landroid/telephony/TelephonyManager;->listen(Landroid/telephony/PhoneStateListener;I)V

    .line 379707
    :cond_4
    invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J

    move-result-wide v8

    const-string v0, "voip/device_info MANUFACTURER: "

    .line 379708
    invoke-static {v0}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v6

    sget-object v0, Landroid/os/Build;->MANUFACTURER:Ljava/lang/String;

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v0, ", MODEL: "

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    sget-object v0, Landroid/os/Build;->MODEL:Ljava/lang/String;

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v0, ", Device: "

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    sget-object v0, Landroid/os/Build;->DEVICE:Ljava/lang/String;

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v0, ", Board: "

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    sget-object v0, Landroid/os/Build;->BOARD:Ljava/lang/String;

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v0, ", Hardware: "

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    sget-object v0, Landroid/os/Build;->HARDWARE:Ljava/lang/String;

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v0, ", CPU_API: "

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 379709
    invoke-static {}, LX/00q;->A05()Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v0, ", OS: "

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    sget-object v0, Landroid/os/Build$VERSION;->RELEASE:Ljava/lang/String;

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v0, ", Build: "

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    sget-object v5, Landroid/os/Build;->DISPLAY:Ljava/lang/String;

    const-string v3, ", App: "

    const-string v1, "2.20.140"

    const-string v0, ", PowerSaving: "

    invoke-static {v6, v5, v3, v1, v0}, LX/007;->A16(Ljava/lang/StringBuilder;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V

    .line 379710
    invoke-virtual {p0}, LX/3ZK;->A0k()Z

    move-result v0

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(Z)Ljava/lang/StringBuilder;

    invoke-virtual {v6}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    .line 379711
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379712
    iget-object v0, p0, LX/3ZK;->A1Z:LX/011;

    invoke-virtual {v0}, LX/011;->A08()Landroid/media/AudioManager;

    move-result-object v5

    .line 379713
    iput-boolean v2, p0, LX/3ZK;->A0y:Z

    .line 379714
    iput-boolean v2, p0, LX/3ZK;->A19:Z

    .line 379715
    iput-boolean v2, p0, LX/3ZK;->A13:Z

    .line 379716
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip$DebugTapType;->values()[Lcom/whatsapp/voipcalling/Voip$DebugTapType;

    const/4 v3, 0x0

    .line 379717
    iput-object v3, p0, LX/3ZK;->A29:LX/3Bx;

    .line 379718
    iget-object v0, p0, LX/3ZK;->A25:Ljava/util/Map;

    invoke-interface {v0}, Ljava/util/Map;->clear()V

    .line 379719
    iget-object v0, p0, LX/3ZK;->A26:Ljava/util/Map;

    invoke-interface {v0}, Ljava/util/Map;->clear()V

    .line 379720
    iget-object v0, p0, LX/3ZK;->A1t:LX/3C4;

    .line 379721
    iget-object v0, v0, LX/3C4;->A08:Ljava/util/Set;

    invoke-interface {v0}, Ljava/util/Set;->clear()V

    .line 379722
    iget-object v7, p0, LX/3ZK;->A1F:Landroid/content/Context;

    iget-object v6, p0, LX/3ZK;->A0F:Landroid/content/BroadcastReceiver;

    new-instance v1, Landroid/content/IntentFilter;

    const-string v0, "android.intent.action.SCREEN_OFF"

    invoke-direct {v1, v0}, Landroid/content/IntentFilter;-><init>(Ljava/lang/String;)V

    invoke-virtual {v7, v6, v1}, Landroid/content/Context;->registerReceiver(Landroid/content/BroadcastReceiver;Landroid/content/IntentFilter;)Landroid/content/Intent;

    .line 379723
    iget-object v7, p0, LX/3ZK;->A1y:LX/3Co;

    iget-object v0, p0, LX/3ZK;->A1v:LX/3ZC;

    if-eqz v0, :cond_5

    const/4 v1, 0x1

    if-nez v11, :cond_6

    :cond_5
    const/4 v1, 0x0

    .line 379724
    :cond_6
    const-string v0, "voip/audio_route/onCallStart using telecom:"

    .line 379725
    invoke-static {v0, v1}, LX/007;->A0v(Ljava/lang/String;Z)V

    .line 379726
    iput-boolean v1, v7, LX/3Co;->A07:Z

    .line 379727
    iput-boolean v2, v7, LX/3Co;->A06:Z

    .line 379728
    iput-boolean v2, v7, LX/3Co;->A08:Z

    if-nez v1, :cond_7

    .line 379729
    iget-object v1, v7, LX/3Co;->A0B:LX/3CA;

    check-cast v1, LX/3Z4;

    .line 379730
    invoke-interface {v1}, LX/3CA;->A9O()Z

    move-result v0

    iput-boolean v0, v1, LX/3Z4;->A01:Z

    .line 379731
    invoke-virtual {v1}, LX/3Z4;->A00()V

    .line 379732
    iget-object v10, v7, LX/3Co;->A09:Landroid/content/Context;

    iget-object v6, v7, LX/3Co;->A0E:LX/3Ck;

    new-instance v1, Landroid/content/IntentFilter;

    const-string v0, "android.bluetooth.headset.profile.action.CONNECTION_STATE_CHANGED"

    invoke-direct {v1, v0}, Landroid/content/IntentFilter;-><init>(Ljava/lang/String;)V

    invoke-virtual {v10, v6, v1}, Landroid/content/Context;->registerReceiver(Landroid/content/BroadcastReceiver;Landroid/content/IntentFilter;)Landroid/content/Intent;

    .line 379733
    iget-object v10, v7, LX/3Co;->A09:Landroid/content/Context;

    iget-object v6, v7, LX/3Co;->A0G:LX/3Cm;

    new-instance v1, Landroid/content/IntentFilter;

    const-string v0, "android.media.ACTION_SCO_AUDIO_STATE_UPDATED"

    invoke-direct {v1, v0}, Landroid/content/IntentFilter;-><init>(Ljava/lang/String;)V

    .line 379734
    invoke-virtual {v10, v6, v1}, Landroid/content/Context;->registerReceiver(Landroid/content/BroadcastReceiver;Landroid/content/IntentFilter;)Landroid/content/Intent;

    move-result-object v6

    if-eqz v6, :cond_7

    const/4 v1, -0x1

    const-string v0, "android.media.extra.SCO_AUDIO_STATE"

    .line 379735
    invoke-virtual {v6, v0, v1}, Landroid/content/Intent;->getIntExtra(Ljava/lang/String;I)I

    move-result v0

    iput v0, v7, LX/3Co;->A01:I

    .line 379736
    :cond_7
    sget v1, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v0, 0x15

    if-lt v1, v0, :cond_8

    .line 379737
    iget-object v7, p0, LX/3ZK;->A1F:Landroid/content/Context;

    iget-object v6, p0, LX/3ZK;->A0G:Landroid/content/BroadcastReceiver;

    new-instance v1, Landroid/content/IntentFilter;

    const-string v0, "android.intent.action.USER_PRESENT"

    invoke-direct {v1, v0}, Landroid/content/IntentFilter;-><init>(Ljava/lang/String;)V

    invoke-virtual {v7, v6, v1}, Landroid/content/Context;->registerReceiver(Landroid/content/BroadcastReceiver;Landroid/content/IntentFilter;)Landroid/content/Intent;

    .line 379738
    :cond_8
    invoke-static {}, LX/00A;->A01()V

    .line 379739
    iget-object v0, p0, LX/3ZK;->A0O:Landroid/os/PowerManager$WakeLock;

    if-nez v0, :cond_a

    .line 379740
    :try_start_0
    iget-object v0, p0, LX/3ZK;->A1Z:LX/011;

    invoke-virtual {v0}, LX/011;->A0B()Landroid/os/PowerManager;

    move-result-object v1

    if-nez v1, :cond_9

    const-string v0, "voip/service/acquirePartialWakeLock pm=null"

    .line 379741
    invoke-static {v0}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;)V

    goto :goto_1

    :cond_9
    const-string v0, "VoiceService"

    .line 379742
    invoke-static {v1, v4, v0}, LX/02V;->A0L(Landroid/os/PowerManager;ILjava/lang/String;)Landroid/os/PowerManager$WakeLock;

    move-result-object v0

    iput-object v0, p0, LX/3ZK;->A0O:Landroid/os/PowerManager$WakeLock;

    .line 379743
    if-eqz v0, :cond_a

    .line 379744
    invoke-virtual {v0}, Landroid/os/PowerManager$WakeLock;->acquire()V

    const-string v0, "voip/service/acquirePartialWakeLock acquired"

    .line 379745
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    goto :goto_1
    :try_end_0
    .catch Ljava/lang/Exception; {:try_start_0 .. :try_end_0} :catch_0

    :catch_0
    move-exception v0

    .line 379746
    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/Throwable;)V

    .line 379747
    iput-object v3, p0, LX/3ZK;->A0O:Landroid/os/PowerManager$WakeLock;

    :cond_a
    :goto_1
    const/4 v1, 0x2

    if-eqz v5, :cond_b

    const-string v0, "audioManager "

    .line 379748
    invoke-static {v0}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v6

    invoke-virtual {v5}, Landroid/media/AudioManager;->getMode()I

    move-result v0

    invoke-virtual {v6, v0}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    invoke-virtual {v6}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379749
    invoke-virtual {v5, v2}, Landroid/media/AudioManager;->setMicrophoneMute(Z)V

    .line 379750
    sget-object v0, LX/3ZK;->A2E:Ljava/lang/Object;

    check-cast v0, Landroid/media/AudioManager$OnAudioFocusChangeListener;

    .line 379751
    invoke-virtual {v5, v0, v2, v1}, Landroid/media/AudioManager;->requestAudioFocus(Landroid/media/AudioManager$OnAudioFocusChangeListener;II)I

    move-result v5

    const-string v0, "result of audio focus for voice call: "

    .line 379752
    invoke-static {v0, v5}, LX/007;->A0e(Ljava/lang/String;I)V

    :cond_b
    if-nez p1, :cond_16

    .line 379753
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCurrentCallState()Lcom/whatsapp/voipcalling/Voip$CallState;

    move-result-object v5

    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->RECEIVED_CALL:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-ne v5, v0, :cond_c

    iget-boolean v0, p0, LX/3ZK;->A0u:Z

    if-nez v0, :cond_c

    if-eqz v11, :cond_e

    .line 379754
    iget v0, p0, LX/3ZK;->A06:I

    if-eqz v0, :cond_e

    .line 379755
    invoke-virtual {p0, p2, v3, v2}, LX/3ZK;->A0Q(Lcom/whatsapp/jid/UserJid;[JZ)V

    .line 379756
    :cond_c
    :goto_2
    iput-object v3, p0, LX/3ZK;->A0c:Ljava/lang/Integer;

    .line 379757
    :goto_3
    iget-object v5, p0, LX/3ZK;->A0M:Landroid/os/Handler;

    const-wide/16 v0, 0x3e8

    invoke-virtual {v5, v2, v0, v1}, Landroid/os/Handler;->sendEmptyMessageDelayed(IJ)Z

    .line 379758
    iget-object v0, p0, LX/3ZK;->A0I:Landroid/media/SoundPool;

    if-eqz v0, :cond_d

    .line 379759
    iput-object v3, p0, LX/3ZK;->A0i:Ljava/lang/Integer;

    .line 379760
    invoke-virtual {v0}, Landroid/media/SoundPool;->release()V

    .line 379761
    :cond_d
    new-instance v5, Landroid/media/SoundPool;

    invoke-direct {v5, v4, v2, v2}, Landroid/media/SoundPool;-><init>(III)V

    iput-object v5, p0, LX/3ZK;->A0I:Landroid/media/SoundPool;

    goto/16 :goto_6

    .line 379762
    :cond_e
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getRawPeerJid()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/jid/UserJid;->getNullable(Ljava/lang/String;)Lcom/whatsapp/jid/UserJid;

    move-result-object v5

    .line 379763
    const-string v0, "voip/ringtone/play"

    .line 379764
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    if-nez v5, :cond_10

    const-string v0, "voip/ringtone/play/error/peer_jid_is_null call must have been finished"

    .line 379765
    invoke-static {v0}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;)V

    .line 379766
    :cond_f
    :goto_4
    invoke-virtual {p0, p2, v3, v4}, LX/3ZK;->A0Q(Lcom/whatsapp/jid/UserJid;[JZ)V

    goto :goto_2

    .line 379767
    :cond_10
    iget-object v0, p0, LX/3ZK;->A1Z:LX/011;

    invoke-virtual {v0}, LX/011;->A08()Landroid/media/AudioManager;

    move-result-object v6

    if-eqz v6, :cond_11

    .line 379768
    invoke-virtual {v6}, Landroid/media/AudioManager;->getRingerMode()I

    move-result v0

    if-eqz v0, :cond_13

    if-eq v0, v4, :cond_12

    if-ne v0, v1, :cond_11

    const-string v0, "voip/ringtone/ringer_mode/normal"

    .line 379769
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379770
    :cond_11
    :goto_5
    iget-object v0, p0, LX/3ZK;->A1h:LX/04y;

    invoke-virtual {v0, v5}, LX/04y;->A0B(LX/01W;)LX/052;

    move-result-object v1

    .line 379771
    iget-object v0, p0, LX/3ZK;->A1n:LX/0Cy;

    invoke-virtual {v0, v1}, LX/0Cy;->A0G(LX/052;)Z

    move-result v0

    if-eqz v0, :cond_14

    const-string v0, "VoiceService/playRingtone Silencing ringtone for DND"

    .line 379772
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    goto :goto_4

    .line 379773
    :cond_12
    const-string v0, "voip/ringtone/ringer_mode/vibrate"

    .line 379774
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    goto :goto_5

    :cond_13
    const-string v0, "voip/ringtone/ringer_mode/silent"

    .line 379775
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    goto :goto_5

    .line 379776
    :cond_14
    iget-object v0, p0, LX/3ZK;->A0J:Landroid/net/Uri;

    if-nez v0, :cond_f

    .line 379777
    iget-object v0, p0, LX/3ZK;->A1J:LX/0Cl;

    invoke-virtual {v0, v5}, LX/0Cl;->A07(LX/01W;)LX/0Cq;

    move-result-object v0

    .line 379778
    invoke-virtual {v0}, LX/0Cq;->A02()Ljava/lang/String;

    move-result-object v5

    .line 379779
    invoke-static {v5}, Landroid/text/TextUtils;->isEmpty(Ljava/lang/CharSequence;)Z

    move-result v0

    if-nez v0, :cond_f

    .line 379780
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voip/ringtone/ "

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379781
    invoke-static {v5}, Landroid/net/Uri;->parse(Ljava/lang/String;)Landroid/net/Uri;

    move-result-object v0

    iput-object v0, p0, LX/3ZK;->A0J:Landroid/net/Uri;

    if-eqz v6, :cond_15

    .line 379782
    invoke-virtual {v6, v4}, Landroid/media/AudioManager;->setMode(I)V

    .line 379783
    :cond_15
    invoke-virtual {p0}, LX/3ZK;->A0C()V

    goto :goto_4

    .line 379784
    :cond_16
    iput-object v3, p0, LX/3ZK;->A0j:Ljava/lang/Long;

    .line 379785
    iput-object v3, p0, LX/3ZK;->A0e:Ljava/lang/Integer;

    goto/16 :goto_3

    .line 379786
    :goto_6
    :try_start_1
    iget-object v1, p0, LX/3ZK;->A1F:Landroid/content/Context;

    const v0, 0x7f110002

    invoke-virtual {v5, v1, v0, v4}, Landroid/media/SoundPool;->load(Landroid/content/Context;II)I

    move-result v0

    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v0

    iput-object v0, p0, LX/3ZK;->A0i:Ljava/lang/Integer;

    goto :goto_7
    :try_end_1
    .catch Landroid/content/res/Resources$NotFoundException; {:try_start_1 .. :try_end_1} :catch_1

    :catch_1
    move-exception v1

    const-string v0, "voip/service/start failed to load end call sound"

    .line 379787
    invoke-static {v0, v1}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;Ljava/lang/Throwable;)V

    .line 379788
    iput-object v3, p0, LX/3ZK;->A0i:Ljava/lang/Integer;

    .line 379789
    :goto_7
    iget-object v0, p0, LX/3ZK;->A1Z:LX/011;

    invoke-virtual {v0}, LX/011;->A0A()Landroid/net/wifi/WifiManager;

    move-result-object v2

    if-eqz v2, :cond_18

    .line 379790
    invoke-virtual {v2}, Landroid/net/wifi/WifiManager;->isWifiEnabled()Z

    move-result v0

    if-eqz v0, :cond_18

    sget v1, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v0, 0x1d

    if-ge v1, v0, :cond_18

    .line 379791
    invoke-virtual {v2}, Landroid/net/wifi/WifiManager;->getConnectionInfo()Landroid/net/wifi/WifiInfo;

    move-result-object v0

    invoke-virtual {v0}, Landroid/net/wifi/WifiInfo;->getRssi()I

    move-result v0

    int-to-long v0, v0

    invoke-static {v0, v1}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v0

    iput-object v0, p0, LX/3ZK;->A0m:Ljava/lang/Long;

    .line 379792
    :goto_8
    const-wide/16 v0, 0x0

    .line 379793
    iput-wide v0, p0, LX/3ZK;->A0E:J

    const-wide/16 v0, -0x1

    .line 379794
    iput-wide v0, p0, LX/3ZK;->A0C:J

    .line 379795
    iput-boolean v4, p0, LX/3ZK;->A17:Z

    .line 379796
    invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J

    move-result-wide v0

    iput-wide v0, p0, LX/3ZK;->A0A:J

    .line 379797
    iget-object v1, p0, LX/3ZK;->A1c:LX/00E;

    const-string v0, "voip_call_id"

    .line 379798
    invoke-static {v1, v0, p3}, LX/007;->A0X(LX/00E;Ljava/lang/String;Ljava/lang/String;)V

    .line 379799
    iget-wide v2, p0, LX/3ZK;->A0A:J

    sub-long/2addr v2, v8

    .line 379800
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voip/service/start elapsed "

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, v2, v3}, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;

    const-string v0, " ms"

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379801
    iget-object v0, p0, LX/3ZK;->A1Z:LX/011;

    invoke-virtual {v0}, LX/011;->A01()Landroid/app/ActivityManager;

    move-result-object v2

    .line 379802
    sget v1, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v0, 0x1c

    if-lt v1, v0, :cond_17

    if-eqz v2, :cond_17

    .line 379803
    invoke-virtual {v2}, Landroid/app/ActivityManager;->isBackgroundRestricted()Z

    move-result v0

    if-eqz v0, :cond_17

    :goto_9
    iput-boolean v4, p0, LX/3ZK;->A12:Z

    return-void

    :cond_17
    const/4 v4, 0x0

    goto :goto_9

    .line 379804
    :cond_18
    iput-object v3, p0, LX/3ZK;->A0m:Ljava/lang/Long;

    goto :goto_8
.end method

.method public final A0k()Z
    .locals 4

    .line 379805
    iget-object v0, p0, LX/3ZK;->A1Z:LX/011;

    invoke-virtual {v0}, LX/011;->A0B()Landroid/os/PowerManager;

    move-result-object v3

    .line 379806
    sget v2, Landroid/os/Build$VERSION;->SDK_INT:I

    const/4 v1, 0x0

    const/16 v0, 0x15

    if-lt v2, v0, :cond_1

    if-nez v3, :cond_0

    const-string v0, "voip/service/start pm=null"

    .line 379807
    invoke-static {v0}, Lcom/whatsapp/util/Log;->w(Ljava/lang/String;)V

    return v1

    .line 379808
    :cond_0
    invoke-virtual {v3}, Landroid/os/PowerManager;->isPowerSaveMode()Z

    move-result v0

    return v0

    :cond_1
    return v1
.end method

.method public final A0l()Z
    .locals 3

    .line 379809
    sget v2, Landroid/os/Build$VERSION;->SDK_INT:I

    const/4 v1, 0x0

    const/16 v0, 0x1c

    if-lt v2, v0, :cond_1

    iget-object v0, p0, LX/3ZK;->A1v:LX/3ZC;

    if-eqz v0, :cond_1

    const-string v0, "options.android_telecom_framework_callee"

    .line 379810
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A00(Ljava/lang/String;)Ljava/lang/Boolean;

    move-result-object v0

    if-eqz v0, :cond_0

    .line 379811
    invoke-virtual {v0}, Ljava/lang/Boolean;->booleanValue()Z

    move-result v0

    if-eqz v0, :cond_0

    const/4 v1, 0x1

    .line 379812
    :cond_0
    iget-object v0, p0, LX/3ZK;->A1v:LX/3ZC;

    .line 379813
    iput-boolean v1, v0, LX/3ZC;->A06:Z

    :cond_1
    return v1
.end method

.method public synthetic A0m(Landroid/os/Message;)Z
    .locals 20

    move-object/from16 v5, p0

    .line 379814
    move-object/from16 v12, p1

    iget v10, v12, Landroid/os/Message;->what:I

    const/4 v13, 0x6

    const/16 v15, 0x14

    const/4 v14, 0x4

    const/4 v6, 0x3

    const/4 v9, -0x1

    const/16 v7, 0x1c

    const/4 v8, 0x0

    const/4 v11, 0x7

    const/4 v3, 0x2

    const-wide/16 v0, 0x0

    const/4 v2, 0x0

    const/4 v4, 0x1

    packed-switch v10, :pswitch_data_0

    :pswitch_0
    return v2

    .line 379815
    :pswitch_1
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_0

    .line 379816
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCurrentCallId()Ljava/lang/String;

    move-result-object v1

    if-eqz v1, :cond_0

    .line 379817
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    invoke-interface {v0, v1}, LX/0WA;->AOD(Ljava/lang/String;)V

    :cond_0
    return v4

    .line 379818
    :pswitch_2
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v8

    if-eqz v8, :cond_1

    .line 379819
    iget v6, v12, Landroid/os/Message;->arg1:I

    packed-switch v6, :pswitch_data_1

    const-string v0, "Unknown state for call waiting"

    .line 379820
    invoke-static {v2, v0}, LX/00A;->A0A(ZLjava/lang/String;)V

    .line 379821
    :cond_1
    :pswitch_3
    return v4

    .line 379822
    :pswitch_4
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_1

    .line 379823
    invoke-interface {v0, v8, v6}, LX/0WA;->A2Y(Lcom/whatsapp/voipcalling/CallInfo;I)V

    return v4

    .line 379824
    :pswitch_5
    iget-object v0, v12, Landroid/os/Message;->obj:Ljava/lang/Object;

    check-cast v0, Ljava/lang/String;

    .line 379825
    invoke-virtual {v5, v0}, LX/3ZK;->A03(Ljava/lang/String;)LX/3CJ;

    move-result-object v1

    .line 379826
    sget v0, Landroid/os/Build$VERSION;->SDK_INT:I

    if-lt v0, v7, :cond_2

    if-eqz v1, :cond_2

    .line 379827
    invoke-virtual {v1, v13}, LX/3CJ;->A00(I)V

    .line 379828
    :cond_2
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_3

    .line 379829
    invoke-interface {v0, v8, v6}, LX/0WA;->A2Y(Lcom/whatsapp/voipcalling/CallInfo;I)V

    .line 379830
    :cond_3
    invoke-virtual {v5, v8, v3, v2, v2}, LX/3ZK;->A0T(Lcom/whatsapp/voipcalling/CallInfo;IZZ)V

    return v4

    .line 379831
    :pswitch_6
    iget-object v3, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v3, :cond_4

    .line 379832
    invoke-interface {v3, v8, v6}, LX/0WA;->A2Y(Lcom/whatsapp/voipcalling/CallInfo;I)V

    .line 379833
    :cond_4
    iget-object v3, v8, Lcom/whatsapp/voipcalling/CallInfo;->callId:Ljava/lang/String;

    .line 379834
    invoke-virtual {v5, v3}, LX/3ZK;->A03(Ljava/lang/String;)LX/3CJ;

    move-result-object v6

    const/4 v3, 0x0

    if-eqz v6, :cond_5

    const/4 v3, 0x1

    .line 379835
    :cond_5
    if-eqz v3, :cond_6

    .line 379836
    invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J

    move-result-wide v6

    iput-wide v6, v5, LX/3ZK;->A0D:J

    :cond_6
    if-eqz v3, :cond_7

    .line 379837
    iget-object v3, v8, Lcom/whatsapp/voipcalling/CallInfo;->callWaitingInfo:LX/20k;

    .line 379838
    iget-object v3, v3, LX/20k;->A03:Ljava/util/List;

    invoke-interface {v3, v2}, Ljava/util/List;->get(I)Ljava/lang/Object;

    move-result-object v6

    check-cast v6, Lcom/whatsapp/jid/UserJid;

    .line 379839
    iget-object v2, v8, Lcom/whatsapp/voipcalling/CallInfo;->callWaitingInfo:LX/20k;

    .line 379840
    iget-boolean v3, v2, LX/20k;->A04:Z

    .line 379841
    iget-object v2, v2, LX/20k;->A02:Ljava/lang/String;

    .line 379842
    invoke-virtual {v5, v6, v3, v2}, LX/3ZK;->A0p(Lcom/whatsapp/jid/UserJid;ZLjava/lang/String;)Z

    move-result v2

    if-eqz v2, :cond_7

    const-wide/16 v0, 0x7d0

    .line 379843
    invoke-virtual {v5, v0, v1}, LX/3ZK;->A0K(J)V

    return v4

    .line 379844
    :cond_7
    iput-wide v0, v5, LX/3ZK;->A0D:J

    .line 379845
    invoke-virtual {v5, v8}, LX/3ZK;->A0S(Lcom/whatsapp/voipcalling/CallInfo;)V

    return v4

    .line 379846
    :pswitch_7
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_8

    .line 379847
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCurrentCallId()Ljava/lang/String;

    move-result-object v1

    if-eqz v1, :cond_8

    .line 379848
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    invoke-interface {v0, v1}, LX/0WA;->ALJ(Ljava/lang/String;)V

    :cond_8
    return v4

    .line 379849
    :pswitch_8
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_9

    .line 379850
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCurrentCallId()Ljava/lang/String;

    move-result-object v1

    if-eqz v1, :cond_9

    .line 379851
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    invoke-interface {v0, v1}, LX/0WA;->AAF(Ljava/lang/String;)V

    :cond_9
    return v4

    .line 379852
    :pswitch_9
    iget-object v8, v12, Landroid/os/Message;->obj:Ljava/lang/Object;

    if-eqz v8, :cond_c

    .line 379853
    check-cast v8, LX/3Cd;

    .line 379854
    sget v0, Landroid/os/Build$VERSION;->SDK_INT:I

    if-lt v0, v7, :cond_b

    iget-object v0, v5, LX/3ZK;->A1v:LX/3ZC;

    if-eqz v0, :cond_b

    iget-object v0, v8, LX/3Cd;->A01:Ljava/lang/String;

    .line 379855
    invoke-virtual {v5, v0}, LX/3ZK;->A03(Ljava/lang/String;)LX/3CJ;

    move-result-object v1

    const/4 v0, 0x0

    if-eqz v1, :cond_a

    const/4 v0, 0x1

    .line 379856
    :cond_a
    if-eqz v0, :cond_b

    .line 379857
    iget-object v7, v5, LX/3ZK;->A1v:LX/3ZC;

    iget-object v6, v8, LX/3Cd;->A01:Ljava/lang/String;

    iget-object v3, v8, LX/3Cd;->A00:Ljava/lang/String;

    .line 379858
    iget-object v0, v7, LX/3ZC;->A05:Ljava/util/concurrent/ConcurrentMap;

    invoke-interface {v0, v6}, Ljava/util/concurrent/ConcurrentMap;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v2

    check-cast v2, LX/3CJ;

    if-eqz v2, :cond_b

    .line 379859
    new-instance v1, Ljava/lang/StringBuilder;

    const-string v0, "voip/SelfManagedConnectionsManager/onCallAutoConnected changing CallId from: "

    invoke-direct {v1, v0}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v1, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v0, " -> "

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379860
    invoke-virtual {v7, v2}, LX/3ZC;->A08(LX/3CJ;)V

    .line 379861
    iput-object v3, v2, LX/3CJ;->A01:Ljava/lang/String;

    .line 379862
    invoke-virtual {v7, v2}, LX/3ZC;->A07(LX/3CJ;)V

    .line 379863
    :cond_b
    iget-object v1, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v1, :cond_c

    .line 379864
    iget-object v0, v8, LX/3Cd;->A00:Ljava/lang/String;

    invoke-interface {v1, v0}, LX/0WA;->ABi(Ljava/lang/String;)V

    :cond_c
    return v4

    .line 379865
    :pswitch_a
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_d

    .line 379866
    invoke-interface {v0}, LX/0WA;->interruptionStateChanged()V

    :cond_d
    return v4

    :pswitch_b
    const-string v2, "voip/commonHandler/HANDLER_WHAT_OFFLINE_COMPLETE"

    .line 379867
    invoke-static {v2}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379868
    iget-wide v6, v5, LX/3ZK;->A0D:J

    cmp-long v2, v6, v0

    if-nez v2, :cond_e

    iget-object v0, v5, LX/3ZK;->A0L:Landroid/os/Handler;

    .line 379869
    invoke-virtual {v0, v4}, Landroid/os/Handler;->hasMessages(I)Z

    move-result v0

    if-eqz v0, :cond_e

    .line 379870
    iget-object v0, v5, LX/3ZK;->A0L:Landroid/os/Handler;

    invoke-virtual {v0, v4}, Landroid/os/Handler;->removeMessages(I)V

    .line 379871
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v0

    invoke-virtual {v5, v0}, LX/3ZK;->A0S(Lcom/whatsapp/voipcalling/CallInfo;)V

    :cond_e
    return v4

    :pswitch_c
    const-string v0, "voip/commonHandler/HANDLER_WHAT_SHOW_INCOMING_CALL_UI"

    .line 379872
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379873
    iget-object v2, v12, Landroid/os/Message;->obj:Ljava/lang/Object;

    if-eqz v2, :cond_10

    .line 379874
    check-cast v2, Ljava/lang/String;

    .line 379875
    invoke-virtual {v5, v2}, LX/3ZK;->A03(Ljava/lang/String;)LX/3CJ;

    move-result-object v1

    const/4 v0, 0x0

    if-eqz v1, :cond_f

    const/4 v0, 0x1

    .line 379876
    :cond_f
    if-eqz v0, :cond_10

    iget-object v0, v5, LX/3ZK;->A0Z:LX/3CL;

    if-eqz v0, :cond_10

    .line 379877
    invoke-interface {v0, v2}, LX/3CL;->AIU(Ljava/lang/String;)V

    :cond_10
    return v4

    .line 379878
    :pswitch_d
    iget-object v7, v5, LX/3ZK;->A1y:LX/3Co;

    iget v8, v12, Landroid/os/Message;->arg1:I

    .line 379879
    iget v5, v7, LX/3Co;->A00:I

    if-eq v5, v8, :cond_11

    const-string v0, "voip/audio_route/changeAudioRoute: change audioRoute "

    .line 379880
    invoke-static {v0}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v1

    .line 379881
    invoke-static {v5}, Lcom/whatsapp/voipcalling/Voip;->A05(I)Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v0, " -> "

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 379882
    invoke-static {v8}, Lcom/whatsapp/voipcalling/Voip;->A05(I)Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    .line 379883
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379884
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v1

    if-eqz v8, :cond_14

    if-eq v8, v4, :cond_13

    if-eq v8, v3, :cond_14

    if-eq v8, v6, :cond_12

    if-eq v8, v14, :cond_14

    const-string v0, "UNKNOWN AudioRoute"

    .line 379885
    invoke-static {v2, v0}, LX/00A;->A0A(ZLjava/lang/String;)V

    .line 379886
    :cond_11
    return v4

    .line 379887
    :cond_12
    invoke-virtual {v7, v4, v1}, LX/3Co;->A05(ZLcom/whatsapp/voipcalling/CallInfo;)V

    return v4

    .line 379888
    :cond_13
    invoke-virtual {v7, v4, v1}, LX/3Co;->A06(ZLcom/whatsapp/voipcalling/CallInfo;)V

    return v4

    .line 379889
    :cond_14
    iget v0, v7, LX/3Co;->A00:I

    if-ne v0, v4, :cond_15

    .line 379890
    invoke-virtual {v7, v2, v1}, LX/3Co;->A06(ZLcom/whatsapp/voipcalling/CallInfo;)V

    return v4

    :cond_15
    if-ne v0, v6, :cond_16

    .line 379891
    invoke-virtual {v7, v2, v1}, LX/3Co;->A05(ZLcom/whatsapp/voipcalling/CallInfo;)V

    return v4

    .line 379892
    :cond_16
    invoke-virtual {v7, v1}, LX/3Co;->A04(Lcom/whatsapp/voipcalling/CallInfo;)V

    return v4

    .line 379893
    :pswitch_e
    iget-object v1, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v1, :cond_17

    .line 379894
    iget-object v0, v12, Landroid/os/Message;->obj:Ljava/lang/Object;

    check-cast v0, Ljava/lang/String;

    invoke-interface {v1, v0}, LX/0WA;->AMl(Ljava/lang/String;)V

    :cond_17
    return v4

    .line 379895
    :pswitch_f
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_18

    .line 379896
    invoke-interface {v0}, LX/0WA;->groupStateChanged()V

    .line 379897
    :cond_18
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v0

    .line 379898
    invoke-virtual {v5, v0, v3, v2, v2}, LX/3ZK;->A0T(Lcom/whatsapp/voipcalling/CallInfo;IZZ)V

    return v4

    .line 379899
    :pswitch_10
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v2

    if-eqz v2, :cond_19

    .line 379900
    iget-object v1, v2, Lcom/whatsapp/voipcalling/CallInfo;->callState:Lcom/whatsapp/voipcalling/Voip$CallState;

    .line 379901
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->NONE:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-eq v1, v0, :cond_19

    .line 379902
    invoke-virtual {v2}, Lcom/whatsapp/voipcalling/CallInfo;->isPeerRequestingUpgrade()Z

    move-result v0

    if-eqz v0, :cond_19

    .line 379903
    iget-object v1, v5, LX/3ZK;->A0s:Ljava/util/concurrent/ScheduledExecutorService;

    new-instance v0, LX/3Az;

    invoke-direct {v0, v4}, LX/3Az;-><init>(I)V

    invoke-interface {v1, v0}, Ljava/util/concurrent/ScheduledExecutorService;->execute(Ljava/lang/Runnable;)V

    .line 379904
    :cond_19
    return v4

    .line 379905
    :pswitch_11
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v2

    if-eqz v2, :cond_1b

    .line 379906
    iget-object v1, v2, Lcom/whatsapp/voipcalling/CallInfo;->callState:Lcom/whatsapp/voipcalling/Voip$CallState;

    .line 379907
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->NONE:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-eq v1, v0, :cond_1b

    .line 379908
    iget-object v0, v2, Lcom/whatsapp/voipcalling/CallInfo;->self:LX/20l;

    .line 379909
    iget v1, v0, LX/20l;->A04:I

    const/4 v0, 0x0

    if-ne v1, v6, :cond_1a

    const/4 v0, 0x1

    .line 379910
    :cond_1a
    if-eqz v0, :cond_1b

    .line 379911
    iget-object v1, v5, LX/3ZK;->A0s:Ljava/util/concurrent/ScheduledExecutorService;

    new-instance v0, LX/3BF;

    invoke-direct {v0, v4}, LX/3BF;-><init>(I)V

    invoke-interface {v1, v0}, Ljava/util/concurrent/ScheduledExecutorService;->execute(Ljava/lang/Runnable;)V

    .line 379912
    :cond_1b
    return v4

    :pswitch_12
    if-ne v10, v15, :cond_1c

    .line 379913
    iput-object v8, v5, LX/3ZK;->A1C:[J

    .line 379914
    iput-object v8, v5, LX/3ZK;->A1D:[J

    .line 379915
    iput v9, v5, LX/3ZK;->A07:I

    .line 379916
    iput v9, v5, LX/3ZK;->A08:I

    const-wide/high16 v2, 0x7ff8000000000000L    # NaN

    .line 379917
    iput-wide v2, v5, LX/3ZK;->A02:D

    .line 379918
    :cond_1c
    iget-object v2, v5, LX/3ZK;->A1C:[J

    if-eqz v2, :cond_1e

    iget-object v2, v5, LX/3ZK;->A1D:[J

    if-eqz v2, :cond_1e

    .line 379919
    invoke-static {}, Landroid/os/Process;->myUid()I

    move-result v2

    invoke-static {v2}, Landroid/net/TrafficStats;->getUidTxBytes(I)J

    move-result-wide v6

    .line 379920
    invoke-static {}, Landroid/net/TrafficStats;->getTotalTxBytes()J

    move-result-wide v2

    .line 379921
    iget v15, v5, LX/3ZK;->A07:I

    add-int/lit8 v11, v15, 0x1

    iget-object v14, v5, LX/3ZK;->A1C:[J

    array-length v12, v14

    rem-int/2addr v11, v12

    const/16 v13, 0x16

    const/16 v12, 0x15

    if-eq v10, v13, :cond_1f

    if-eq v11, v15, :cond_1d

    .line 379922
    aput-wide v6, v14, v11

    .line 379923
    iget-object v0, v5, LX/3ZK;->A1D:[J

    aput-wide v2, v0, v11

    .line 379924
    iput v11, v5, LX/3ZK;->A07:I

    .line 379925
    :cond_1d
    iget v0, v5, LX/3ZK;->A08:I

    if-lez v0, :cond_1e

    .line 379926
    iget-object v2, v5, LX/3ZK;->A0L:Landroid/os/Handler;

    int-to-long v0, v0

    invoke-virtual {v2, v12, v0, v1}, Landroid/os/Handler;->sendEmptyMessageDelayed(IJ)Z

    .line 379927
    :cond_1e
    return v4

    .line 379928
    :cond_1f
    iget-object v10, v5, LX/3ZK;->A0L:Landroid/os/Handler;

    invoke-virtual {v10, v12}, Landroid/os/Handler;->removeMessages(I)V

    .line 379929
    :goto_0
    iget v10, v5, LX/3ZK;->A07:I

    if-eq v11, v10, :cond_20

    iget-object v10, v5, LX/3ZK;->A1D:[J

    aget-wide v12, v10, v11

    cmp-long v10, v12, v0

    if-nez v10, :cond_20

    add-int/lit8 v11, v11, 0x1

    .line 379930
    iget-object v10, v5, LX/3ZK;->A1C:[J

    array-length v10, v10

    rem-int/2addr v11, v10

    goto :goto_0

    .line 379931
    :cond_20
    iget-object v0, v5, LX/3ZK;->A1D:[J

    aget-wide v0, v0, v11

    sub-long/2addr v2, v0

    .line 379932
    iget-object v0, v5, LX/3ZK;->A1C:[J

    aget-wide v0, v0, v11

    sub-long/2addr v6, v0

    const-string v0, "Recording "

    .line 379933
    invoke-static {v0}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v10

    const-wide/16 v11, 0x3e8

    div-long v0, v6, v11

    invoke-virtual {v10, v0, v1}, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;

    const-string v0, "KB was transmitted by app and "

    invoke-virtual {v10, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    div-long v0, v2, v11

    invoke-virtual {v10, v0, v1}, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;

    const-string v0, "KB by device"

    invoke-virtual {v10, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v10}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379934
    iput-object v8, v5, LX/3ZK;->A1C:[J

    .line 379935
    iput-object v8, v5, LX/3ZK;->A1D:[J

    .line 379936
    iput v9, v5, LX/3ZK;->A07:I

    .line 379937
    iput v9, v5, LX/3ZK;->A08:I

    const-wide/16 v8, 0x0

    cmp-long v0, v6, v8

    if-lez v0, :cond_1e

    cmp-long v0, v2, v8

    if-lez v0, :cond_1e

    cmp-long v0, v6, v2

    if-gtz v0, :cond_1e

    long-to-double v8, v6

    long-to-double v0, v2

    .line 379938
    div-double/2addr v8, v0

    const-wide/high16 v0, 0x4059000000000000L    # 100.0

    mul-double/2addr v8, v0

    iput-wide v8, v5, LX/3ZK;->A02:D

    return v4

    .line 379939
    :pswitch_13
    iget-object v1, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v1, :cond_21

    .line 379940
    iget-object v0, v12, Landroid/os/Message;->obj:Ljava/lang/Object;

    check-cast v0, Lcom/whatsapp/jid/UserJid;

    if-eqz v0, :cond_21

    .line 379941
    invoke-interface {v1, v0}, LX/0WA;->AGb(Lcom/whatsapp/jid/UserJid;)V

    :cond_21
    return v4

    .line 379942
    :pswitch_14
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_22

    .line 379943
    invoke-interface {v0}, LX/0WA;->AIJ()V

    :cond_22
    return v4

    .line 379944
    :pswitch_15
    iget-object v0, v5, LX/3ZK;->A1r:LX/3Br;

    invoke-virtual {v0}, LX/3Br;->A00()D

    move-result-wide v0

    iput-wide v0, v5, LX/3ZK;->A00:D

    return v4

    .line 379945
    :pswitch_16
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_23

    .line 379946
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCurrentCallId()Ljava/lang/String;

    move-result-object v1

    if-eqz v1, :cond_23

    .line 379947
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    invoke-interface {v0, v1}, LX/0WA;->ANq(Ljava/lang/String;)V

    :cond_23
    return v4

    .line 379948
    :pswitch_17
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_24

    .line 379949
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCurrentCallId()Ljava/lang/String;

    move-result-object v1

    if-eqz v1, :cond_24

    .line 379950
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    invoke-interface {v0, v1}, LX/0WA;->ANp(Ljava/lang/String;)V

    :cond_24
    return v4

    .line 379951
    :pswitch_18
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v1

    .line 379952
    invoke-static {v1}, Lcom/whatsapp/voipcalling/Voip;->A09(Lcom/whatsapp/voipcalling/CallInfo;)Z

    move-result v0

    if-eqz v0, :cond_25

    .line 379953
    invoke-virtual {v5, v1}, LX/3ZK;->A0R(Lcom/whatsapp/voipcalling/CallInfo;)V

    :cond_25
    return v4

    .line 379954
    :pswitch_19
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_26

    .line 379955
    invoke-interface {v0}, LX/0WA;->videoCaptureStarted()V

    :cond_26
    return v4

    .line 379956
    :pswitch_1a
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v8

    .line 379957
    iget v14, v12, Landroid/os/Message;->what:I

    iget v7, v12, Landroid/os/Message;->arg1:I

    .line 379958
    invoke-static {}, LX/00A;->A01()V

    if-eqz v8, :cond_2e

    .line 379959
    iget-object v1, v8, Lcom/whatsapp/voipcalling/CallInfo;->callState:Lcom/whatsapp/voipcalling/Voip$CallState;

    .line 379960
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->NONE:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-eq v1, v0, :cond_2e

    const/4 v9, 0x5

    if-eq v7, v11, :cond_30

    if-eq v7, v9, :cond_30

    const/16 v0, 0x9

    if-eq v7, v0, :cond_30

    const/16 v0, 0x8

    if-eq v7, v0, :cond_30

    .line 379961
    invoke-virtual {v8}, Lcom/whatsapp/voipcalling/CallInfo;->isEitherSideRequestingUpgrade()Z

    move-result v0

    if-eqz v0, :cond_27

    iget-boolean v0, v5, LX/3ZK;->A0y:Z

    if-nez v0, :cond_2a

    .line 379962
    :cond_27
    invoke-virtual {v8}, Lcom/whatsapp/voipcalling/CallInfo;->isEitherSideRequestingUpgrade()Z

    move-result v0

    if-eqz v0, :cond_28

    .line 379963
    iput-boolean v2, v5, LX/3ZK;->A19:Z

    .line 379964
    invoke-virtual {v5, v8}, LX/3ZK;->A0R(Lcom/whatsapp/voipcalling/CallInfo;)V

    .line 379965
    :cond_28
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_29

    .line 379966
    invoke-interface {v0, v8}, LX/0WA;->ANt(Lcom/whatsapp/voipcalling/CallInfo;)V

    .line 379967
    :cond_29
    iget-object v0, v5, LX/3ZK;->A1y:LX/3Co;

    invoke-virtual {v0, v8}, LX/3Co;->A02(Lcom/whatsapp/voipcalling/CallInfo;)V

    .line 379968
    :cond_2a
    :goto_1
    iget-boolean v0, v8, Lcom/whatsapp/voipcalling/CallInfo;->videoEnabled:Z

    .line 379969
    if-eqz v0, :cond_2f

    invoke-virtual {v8}, Lcom/whatsapp/voipcalling/CallInfo;->isPeerRequestingUpgrade()Z

    move-result v0

    if-eqz v0, :cond_2f

    .line 379970
    iget-object v0, v5, LX/3ZK;->A0L:Landroid/os/Handler;

    const/16 v11, 0x18

    invoke-virtual {v0, v11}, Landroid/os/Handler;->removeMessages(I)V

    .line 379971
    iget-object v10, v5, LX/3ZK;->A0L:Landroid/os/Handler;

    const-wide/16 v0, 0x7530

    invoke-virtual {v10, v11, v0, v1}, Landroid/os/Handler;->sendEmptyMessageDelayed(IJ)Z

    .line 379972
    iget-object v1, v8, Lcom/whatsapp/voipcalling/CallInfo;->peerJid:Lcom/whatsapp/jid/UserJid;

    .line 379973
    new-array v0, v9, [J

    fill-array-data v0, :array_0

    invoke-virtual {v5, v1, v0, v4}, LX/3ZK;->A0Q(Lcom/whatsapp/jid/UserJid;[JZ)V

    .line 379974
    iget-object v1, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v1, :cond_2b

    invoke-interface {v1}, LX/0WA;->A9a()Z

    move-result v0

    if-nez v0, :cond_2c

    :cond_2b
    const-string v0, "voip/commonHandler/HANDLER_WHAT_PEER_VIDEO_STATE_CHANGED launch incoming request screen, voip activity is "

    .line 379975
    invoke-static {v0}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v0

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 379976
    new-instance v15, Ljava/util/ArrayList;

    invoke-direct {v15}, Ljava/util/ArrayList;-><init>()V

    .line 379977
    iget-object v0, v8, Lcom/whatsapp/voipcalling/CallInfo;->peerJid:Lcom/whatsapp/jid/UserJid;

    .line 379978
    invoke-virtual {v15, v0}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z

    .line 379979
    iget-object v14, v5, LX/3ZK;->A1F:Landroid/content/Context;

    iget-object v0, v5, LX/3ZK;->A1G:LX/0DK;

    .line 379980
    iget-boolean v0, v0, LX/0DK;->A00:Z

    xor-int/2addr v0, v4

    .line 379981
    invoke-static {v0}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v16

    const/16 v17, 0x0

    invoke-static {v4}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;

    move-result-object v18

    const/16 v19, 0x0

    .line 379982
    invoke-static/range {v14 .. v19}, Lcom/whatsapp/voipcalling/VoipActivityV2;->A05(Landroid/content/Context;Ljava/util/List;Ljava/lang/Boolean;Ljava/lang/Boolean;Ljava/lang/Boolean;Ljava/lang/Boolean;)Landroid/content/Intent;

    move-result-object v1

    .line 379983
    iget-object v0, v5, LX/3ZK;->A1F:Landroid/content/Context;

    invoke-virtual {v0, v1}, Landroid/content/Context;->startActivity(Landroid/content/Intent;)V

    .line 379984
    :cond_2c
    :goto_2
    if-eq v7, v3, :cond_2e

    if-eq v7, v13, :cond_2e

    if-ne v7, v6, :cond_2d

    .line 379985
    iget-object v0, v5, LX/3ZK;->A1S:LX/0Kn;

    .line 379986
    iget-boolean v0, v0, LX/0Kn;->A00:Z

    if-eqz v0, :cond_2d

    .line 379987
    invoke-virtual {v8}, Lcom/whatsapp/voipcalling/CallInfo;->isPeerRequestingUpgrade()Z

    move-result v0

    if-eqz v0, :cond_2d

    const/4 v3, 0x1

    .line 379988
    :cond_2d
    invoke-virtual {v5, v8, v3, v4, v2}, LX/3ZK;->A0T(Lcom/whatsapp/voipcalling/CallInfo;IZZ)V

    :cond_2e
    return v4

    .line 379989
    :cond_2f
    invoke-virtual/range {p0 .. p0}, LX/3ZK;->A0A()V

    goto :goto_2

    .line 379990
    :cond_30
    iget-boolean v0, v5, LX/3ZK;->A0y:Z

    if-nez v0, :cond_31

    .line 379991
    iput-boolean v4, v5, LX/3ZK;->A19:Z

    .line 379992
    :cond_31
    iget-object v10, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v10, :cond_2a

    const/16 v1, 0xb

    const/4 v0, 0x0

    if-ne v14, v1, :cond_32

    const/4 v0, 0x1

    .line 379993
    :cond_32
    invoke-interface {v10, v8, v0, v7}, LX/0WA;->ANu(Lcom/whatsapp/voipcalling/CallInfo;ZI)V

    .line 379994
    invoke-virtual {v5, v8}, LX/3ZK;->A0R(Lcom/whatsapp/voipcalling/CallInfo;)V

    goto/16 :goto_1

    .line 379995
    :pswitch_1b
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_33

    .line 379996
    iget-object v0, v12, Landroid/os/Message;->obj:Ljava/lang/Object;

    check-cast v0, Ljava/lang/String;

    .line 379997
    invoke-static {v0}, Lcom/whatsapp/jid/UserJid;->getNullable(Ljava/lang/String;)Lcom/whatsapp/jid/UserJid;

    move-result-object v1

    invoke-static {v1}, LX/00A;->A05(Ljava/lang/Object;)V

    .line 379998
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    invoke-interface {v0, v1}, LX/0WA;->ANr(Lcom/whatsapp/jid/UserJid;)V

    :cond_33
    return v4

    .line 379999
    :pswitch_1c
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_34

    .line 380000
    invoke-interface {v0}, LX/0WA;->videoPreviewReady()V

    :cond_34
    return v4

    .line 380001
    :pswitch_1d
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_35

    .line 380002
    iget-object v0, v12, Landroid/os/Message;->obj:Ljava/lang/Object;

    check-cast v0, Ljava/lang/String;

    .line 380003
    invoke-static {v0}, Lcom/whatsapp/jid/UserJid;->getNullable(Ljava/lang/String;)Lcom/whatsapp/jid/UserJid;

    move-result-object v1

    invoke-static {v1}, LX/00A;->A05(Ljava/lang/Object;)V

    .line 380004
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    invoke-interface {v0, v1}, LX/0WA;->ANs(Lcom/whatsapp/jid/UserJid;)V

    :cond_35
    return v4

    .line 380005
    :pswitch_1e
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v2

    if-eqz v2, :cond_37

    .line 380006
    iget-object v1, v2, Lcom/whatsapp/voipcalling/CallInfo;->callState:Lcom/whatsapp/voipcalling/Voip$CallState;

    .line 380007
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->NONE:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-eq v1, v0, :cond_37

    .line 380008
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_36

    .line 380009
    invoke-interface {v0, v2}, LX/0WA;->ANt(Lcom/whatsapp/voipcalling/CallInfo;)V

    .line 380010
    :cond_36
    invoke-virtual {v5, v2}, LX/3ZK;->A0R(Lcom/whatsapp/voipcalling/CallInfo;)V

    :cond_37
    return v4

    .line 380011
    :pswitch_1f
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v1

    iget v0, v12, Landroid/os/Message;->arg2:I

    if-lez v0, :cond_38

    const/4 v2, 0x1

    .line 380012
    :cond_38
    invoke-virtual {v5, v1, v2}, LX/3ZK;->A0U(Lcom/whatsapp/voipcalling/CallInfo;Z)V

    return v4

    .line 380013
    :pswitch_20
    iget-object v1, v12, Landroid/os/Message;->obj:Ljava/lang/Object;

    check-cast v1, LX/20n;

    iget v0, v12, Landroid/os/Message;->arg1:I

    if-lez v0, :cond_39

    const/4 v2, 0x1

    :cond_39
    invoke-virtual {v5, v1, v2}, LX/3ZK;->A0V(LX/20n;Z)V

    return v4

    .line 380014
    :pswitch_21
    iget-object v6, v5, LX/3ZK;->A1b:LX/02S;

    .line 380015
    invoke-virtual {v6, v8, v11}, LX/02S;->A03(Ljava/lang/String;I)V

    .line 380016
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip$CallState;->values()[Lcom/whatsapp/voipcalling/Voip$CallState;

    move-result-object v9

    iget v6, v12, Landroid/os/Message;->arg1:I

    aget-object v11, v9, v6

    .line 380017
    iget-object v10, v12, Landroid/os/Message;->obj:Ljava/lang/Object;

    check-cast v10, Lcom/whatsapp/voipcalling/CallInfo;

    .line 380018
    invoke-static {}, LX/00A;->A01()V

    if-eqz v10, :cond_71

    .line 380019
    iget-object v6, v10, Lcom/whatsapp/voipcalling/CallInfo;->callState:Lcom/whatsapp/voipcalling/Voip$CallState;

    .line 380020
    if-eq v11, v6, :cond_71

    .line 380021
    iget-object v6, v10, Lcom/whatsapp/voipcalling/CallInfo;->callId:Ljava/lang/String;

    .line 380022
    invoke-virtual {v5, v6}, LX/3ZK;->A03(Ljava/lang/String;)LX/3CJ;

    move-result-object v6

    const/4 v15, 0x0

    if-eqz v6, :cond_3a

    const/4 v15, 0x1

    .line 380023
    :cond_3a
    iget-object v9, v10, Lcom/whatsapp/voipcalling/CallInfo;->callState:Lcom/whatsapp/voipcalling/Voip$CallState;

    .line 380024
    new-instance v12, Ljava/lang/StringBuilder;

    const-string v6, "voip/callStateChangedOnUIThread from "

    invoke-direct {v12, v6}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v12, v11}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v6, " to "

    invoke-virtual {v12, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v12, v9}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v6, " in UI Main thread. selfManagedConnection = "

    invoke-virtual {v12, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-static {v12, v15}, LX/007;->A17(Ljava/lang/StringBuilder;Z)V

    .line 380025
    sget-object v6, Lcom/whatsapp/voipcalling/Voip$CallState;->RECEIVED_CALL:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-ne v9, v6, :cond_6b

    .line 380026
    iget-boolean v4, v5, LX/3ZK;->A1B:Z

    if-nez v4, :cond_6a

    .line 380027
    invoke-virtual/range {p0 .. p0}, LX/3ZK;->A0l()Z

    move-result v4

    const-wide/16 v6, 0x1f4

    if-eqz v4, :cond_68

    .line 380028
    invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J

    move-result-wide v12

    iput-wide v12, v5, LX/3ZK;->A0D:J

    .line 380029
    iget-object v12, v10, Lcom/whatsapp/voipcalling/CallInfo;->peerJid:Lcom/whatsapp/jid/UserJid;

    .line 380030
    iget-boolean v8, v10, Lcom/whatsapp/voipcalling/CallInfo;->videoEnabled:Z

    .line 380031
    iget-object v4, v10, Lcom/whatsapp/voipcalling/CallInfo;->callId:Ljava/lang/String;

    .line 380032
    invoke-virtual {v5, v12, v8, v4}, LX/3ZK;->A0p(Lcom/whatsapp/jid/UserJid;ZLjava/lang/String;)Z

    move-result v4

    if-eqz v4, :cond_70

    const-wide/16 v0, 0x7d0

    .line 380033
    invoke-virtual {v5, v0, v1}, LX/3ZK;->A0K(J)V

    .line 380034
    :cond_3b
    :goto_3
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->RECEIVED_CALL:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-eq v9, v0, :cond_3c

    invoke-virtual {v10}, Lcom/whatsapp/voipcalling/CallInfo;->isPeerRequestingUpgrade()Z

    move-result v0

    if-nez v0, :cond_3c

    .line 380035
    invoke-virtual/range {p0 .. p0}, LX/3ZK;->A0A()V

    .line 380036
    :cond_3c
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->CALLING:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-ne v9, v0, :cond_67

    .line 380037
    iget-object v0, v5, LX/3ZK;->A1y:LX/3Co;

    invoke-virtual {v0, v10}, LX/3Co;->A01(Lcom/whatsapp/voipcalling/CallInfo;)V

    .line 380038
    :cond_3d
    :goto_4
    iget-object v0, v5, LX/3ZK;->A0a:LX/0WA;

    if-eqz v0, :cond_66

    .line 380039
    invoke-interface {v0}, LX/0WA;->A9T()Z

    move-result v12

    .line 380040
    invoke-interface {v0, v11, v10}, LX/0WA;->callStateChanged(Lcom/whatsapp/voipcalling/Voip$CallState;Lcom/whatsapp/voipcalling/CallInfo;)V

    .line 380041
    :goto_5
    iget-object v7, v10, Lcom/whatsapp/voipcalling/CallInfo;->initialPeerJid:Lcom/whatsapp/jid/UserJid;

    .line 380042
    iget-boolean v6, v10, Lcom/whatsapp/voipcalling/CallInfo;->isCaller:Z

    .line 380043
    iget-object v0, v10, Lcom/whatsapp/voipcalling/CallInfo;->callId:Ljava/lang/String;

    .line 380044
    iget v4, v10, Lcom/whatsapp/voipcalling/CallInfo;->initialGroupTransactionId:I

    .line 380045
    iget-object v3, v5, LX/3ZK;->A1g:LX/07h;

    .line 380046
    invoke-static {v0}, LX/0OQ;->A0G(Ljava/lang/String;)Ljava/lang/String;

    move-result-object v1

    .line 380047
    new-instance v0, LX/20m;

    invoke-direct {v0, v7, v6, v1, v4}, LX/20m;-><init>(Lcom/whatsapp/jid/UserJid;ZLjava/lang/String;I)V

    .line 380048
    invoke-virtual {v3, v0}, LX/07h;->A03(LX/20m;)LX/20n;

    move-result-object v6

    .line 380049
    sget-object v1, Lcom/whatsapp/voipcalling/Voip$CallState;->NONE:Lcom/whatsapp/voipcalling/Voip$CallState;

    const-string v17, "can not find message for call id "

    if-ne v9, v1, :cond_57

    if-eqz v6, :cond_56

    .line 380050
    iget v4, v6, LX/20n;->A01:I

    .line 380051
    :goto_6
    iget-object v0, v5, LX/3ZK;->A0T:Lcom/whatsapp/fieldstats/events/WamCall;

    if-eqz v0, :cond_55

    .line 380052
    iget-object v7, v10, Lcom/whatsapp/voipcalling/CallInfo;->initialPeerJid:Lcom/whatsapp/jid/UserJid;

    .line 380053
    iget-boolean v0, v10, Lcom/whatsapp/voipcalling/CallInfo;->isCaller:Z

    .line 380054
    if-nez v0, :cond_54

    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->ACTIVE:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-ne v11, v0, :cond_54

    if-eqz v12, :cond_54

    if-eqz v6, :cond_54

    .line 380055
    iget-object v0, v10, Lcom/whatsapp/voipcalling/CallInfo;->callWaitingInfo:LX/20k;

    .line 380056
    iget v0, v0, LX/20k;->A01:I

    if-nez v0, :cond_54

    iget v0, v5, LX/3ZK;->A05:I

    if-gt v4, v0, :cond_54

    .line 380057
    iget-object v0, v5, LX/3ZK;->A1h:LX/04y;

    invoke-virtual {v0, v7}, LX/04y;->A0A(LX/01W;)LX/052;

    move-result-object v0

    .line 380058
    invoke-virtual {v5, v0}, LX/3ZK;->A0n(LX/052;)Z

    move-result v16

    .line 380059
    :goto_7
    const-string v8, " "

    const/4 v0, -0x1

    .line 380060
    iget-object v0, v10, Lcom/whatsapp/voipcalling/CallInfo;->callWaitingInfo:LX/20k;

    .line 380061
    iget v2, v0, LX/20k;->A01:I

    .line 380062
    iget-object v1, v5, LX/3ZK;->A2B:Ljava/lang/Integer;

    .line 380063
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->ACTIVE:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-ne v11, v0, :cond_53

    if-nez v2, :cond_53

    if-eqz v12, :cond_53

    if-eqz v1, :cond_53

    .line 380064
    invoke-virtual {v1}, Ljava/lang/Integer;->intValue()I

    move-result v3

    const/4 v0, -0x1

    if-eq v3, v0, :cond_53

    .line 380065
    iget-object v0, v5, LX/3ZK;->A1a:LX/00T;

    .line 380066
    invoke-virtual {v0}, LX/00T;->A01()J

    move-result-wide v13

    .line 380067
    iget-object v0, v5, LX/3ZK;->A20:LX/0Zd;

    .line 380068
    iget-object v12, v0, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    const-string v2, "last_call_rating_timestamp"

    const-wide/16 v0, 0x0

    invoke-interface {v12, v2, v0, v1}, Landroid/content/SharedPreferences;->getLong(Ljava/lang/String;J)J

    move-result-wide v1

    cmp-long v0, v13, v1

    if-ltz v0, :cond_3e

    sub-long/2addr v13, v1

    .line 380069
    int-to-long v0, v3

    const-wide/16 v2, 0x3e8

    mul-long/2addr v0, v2

    cmp-long v2, v13, v0

    if-ltz v2, :cond_53

    :cond_3e
    const/4 v13, 0x1

    .line 380070
    :goto_8
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->ACTIVE:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-ne v11, v0, :cond_3f

    iget-wide v2, v5, LX/3ZK;->A01:D

    .line 380071
    invoke-static {v2, v3}, Ljava/lang/Double;->isNaN(D)Z

    move-result v0

    if-nez v0, :cond_3f

    iget-wide v0, v5, LX/3ZK;->A00:D

    .line 380072
    invoke-static {v0, v1}, Ljava/lang/Double;->isNaN(D)Z

    move-result v12

    if-nez v12, :cond_3f

    .line 380073
    iget-object v12, v5, LX/3ZK;->A0T:Lcom/whatsapp/fieldstats/events/WamCall;

    sub-double/2addr v0, v2

    invoke-static {v0, v1}, Ljava/lang/Double;->valueOf(D)Ljava/lang/Double;

    move-result-object v2

    iput-object v2, v12, Lcom/whatsapp/fieldstats/events/WamCall;->callBatteryChangePct:Ljava/lang/Double;

    const-wide/high16 v0, 0x7ff8000000000000L    # NaN

    .line 380074
    iput-wide v0, v5, LX/3ZK;->A01:D

    .line 380075
    iput-wide v0, v5, LX/3ZK;->A00:D

    const-string v0, "VoiceService callStateChangedOnUIThread to NONE setting battery fieldstat: "

    .line 380076
    invoke-static {v0}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v0

    invoke-virtual {v0, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 380077
    :cond_3f
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->ACTIVE:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-ne v11, v0, :cond_40

    iget-wide v0, v5, LX/3ZK;->A02:D

    invoke-static {v0, v1}, Ljava/lang/Double;->isNaN(D)Z

    move-result v2

    if-nez v2, :cond_40

    .line 380078
    iget-object v3, v5, LX/3ZK;->A0T:Lcom/whatsapp/fieldstats/events/WamCall;

    invoke-static {v0, v1}, Ljava/lang/Double;->valueOf(D)Ljava/lang/Double;

    move-result-object v2

    iput-object v2, v3, Lcom/whatsapp/fieldstats/events/WamCall;->callAppTrafficTxPct:Ljava/lang/Double;

    const-wide/high16 v0, 0x7ff8000000000000L    # NaN

    .line 380079
    iput-wide v0, v5, LX/3ZK;->A02:D

    const-string v0, "VoiceService callStateChangedOnUIThread to NONE setting txTrafficRatio fieldstat: "

    .line 380080
    invoke-static {v0}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v0

    invoke-virtual {v0, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    :cond_40
    if-eqz v16, :cond_4b

    const/4 v0, -0x1

    if-eq v4, v0, :cond_4a

    mul-int/lit16 v0, v4, 0x3e8

    int-to-long v0, v0

    .line 380081
    :goto_9
    new-instance v3, Landroid/content/Intent;

    iget-object v4, v5, LX/3ZK;->A1F:Landroid/content/Context;

    const-class v2, Lcom/whatsapp/CallSpamActivity;

    invoke-direct {v3, v4, v2}, Landroid/content/Intent;-><init>(Landroid/content/Context;Ljava/lang/Class;)V

    const/high16 v2, 0x10000000

    .line 380082
    invoke-virtual {v3, v2}, Landroid/content/Intent;->setFlags(I)Landroid/content/Intent;

    .line 380083
    invoke-virtual {v7}, Lcom/whatsapp/jid/Jid;->getRawString()Ljava/lang/String;

    move-result-object v4

    const-string v2, "caller_jid"

    .line 380084
    invoke-virtual {v3, v2, v4}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Ljava/lang/String;)Landroid/content/Intent;

    .line 380085
    iget-object v4, v10, Lcom/whatsapp/voipcalling/CallInfo;->callId:Ljava/lang/String;

    .line 380086
    const-string v2, "call_id"

    invoke-virtual {v3, v2, v4}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Ljava/lang/String;)Landroid/content/Intent;

    const-string v2, "call_duration"

    .line 380087
    invoke-virtual {v3, v2, v0, v1}, Landroid/content/Intent;->putExtra(Ljava/lang/String;J)Landroid/content/Intent;

    .line 380088
    iget-boolean v4, v10, Lcom/whatsapp/voipcalling/CallInfo;->isEndedByMe:Z

    .line 380089
    const-string v2, "call_terminator"

    invoke-virtual {v3, v2, v4}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Z)Landroid/content/Intent;

    .line 380090
    invoke-virtual {v10}, Lcom/whatsapp/voipcalling/CallInfo;->getDefaultPeerInfo()LX/20l;

    move-result-object v2

    if-eqz v2, :cond_48

    invoke-virtual {v10}, Lcom/whatsapp/voipcalling/CallInfo;->getDefaultPeerInfo()LX/20l;

    move-result-object v2

    .line 380091
    iget-boolean v2, v2, LX/20l;->A09:Z

    if-eqz v2, :cond_48

    const-string v4, "peer-interrupted"

    .line 380092
    :goto_a
    const-string v2, "call_termination_reason"

    .line 380093
    invoke-virtual {v3, v2, v4}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Ljava/lang/String;)Landroid/content/Intent;

    .line 380094
    iget-boolean v4, v10, Lcom/whatsapp/voipcalling/CallInfo;->videoEnabled:Z

    .line 380095
    const-string v2, "call_video"

    invoke-virtual {v3, v2, v4}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Z)Landroid/content/Intent;

    .line 380096
    iget-boolean v2, v10, Lcom/whatsapp/voipcalling/CallInfo;->isGroupCallCreatedOnServer:Z

    .line 380097
    if-eqz v2, :cond_41

    .line 380098
    iget-object v2, v10, Lcom/whatsapp/voipcalling/CallInfo;->creatorJid:Lcom/whatsapp/jid/UserJid;

    .line 380099
    invoke-virtual {v2}, Lcom/whatsapp/jid/Jid;->getRawString()Ljava/lang/String;

    move-result-object v4

    const-string v2, "call_creator_jid"

    .line 380100
    invoke-virtual {v3, v2, v4}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Ljava/lang/String;)Landroid/content/Intent;

    .line 380101
    :cond_41
    new-instance v4, Ljava/lang/StringBuilder;

    const-string v2, "voiceservice starting call spam activity "

    invoke-direct {v4, v2}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V

    invoke-virtual {v4, v7}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v4, v8}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v4, v0, v1}, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;

    invoke-virtual {v4}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 380102
    iget-object v0, v5, LX/3ZK;->A1F:Landroid/content/Context;

    invoke-virtual {v0, v3}, Landroid/content/Context;->startActivity(Landroid/content/Intent;)V

    .line 380103
    :cond_42
    const/4 v0, 0x1

    :goto_b
    if-eqz v0, :cond_43

    const-string v0, "callStateChangedOnUIThread to NONE. callOfferElapsedTimeInMillisOnServer: "

    .line 380104
    invoke-static {v0}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v1

    iget-object v0, v5, LX/3ZK;->A0T:Lcom/whatsapp/fieldstats/events/WamCall;

    iget-object v0, v0, Lcom/whatsapp/fieldstats/events/WamCall;->callOfferElapsedT:Ljava/lang/Long;

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 380105
    iget-object v2, v5, LX/3ZK;->A1k:LX/0Ex;

    iget-object v1, v5, LX/3ZK;->A0T:Lcom/whatsapp/fieldstats/events/WamCall;

    iget-boolean v0, v5, LX/3ZK;->A1A:Z

    invoke-virtual {v2, v1, v0}, LX/0Ex;->A06(Lcom/whatsapp/fieldstats/events/WamCall;Z)V

    .line 380106
    :cond_43
    :goto_c
    iget-boolean v3, v5, LX/3ZK;->A17:Z

    .line 380107
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->ACTIVE_ELSEWHERE:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-eq v11, v0, :cond_47

    .line 380108
    invoke-virtual {v5, v11, v10}, LX/3ZK;->A0a(Lcom/whatsapp/voipcalling/Voip$CallState;Lcom/whatsapp/voipcalling/CallInfo;)V

    .line 380109
    :goto_d
    if-eqz v6, :cond_5b

    .line 380110
    iget-object v1, v5, LX/3ZK;->A1H:LX/0J7;

    const-string v0, "voip/notifyCallEnded"

    .line 380111
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 380112
    invoke-static {}, LX/00A;->A01()V

    .line 380113
    iget-object v0, v1, LX/00o;->A00:LX/00p;

    invoke-virtual {v0}, LX/00p;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_e
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v0

    if-eqz v0, :cond_44

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v0

    check-cast v0, LX/0O8;

    .line 380114
    invoke-virtual {v0, v6}, LX/0O8;->A03(LX/20n;)V

    goto :goto_e

    .line 380115
    :cond_44
    iget-object v0, v6, LX/20n;->A06:LX/20m;

    iget-boolean v0, v0, LX/20m;->A03:Z

    if-nez v0, :cond_45

    iget v2, v6, LX/20n;->A00:I

    const/4 v1, 0x2

    const/4 v0, 0x1

    if-eq v2, v1, :cond_46

    :cond_45
    const/4 v0, 0x0

    .line 380116
    :cond_46
    if-eqz v0, :cond_5c

    .line 380117
    iget v1, v10, Lcom/whatsapp/voipcalling/CallInfo;->callResult:I

    .line 380118
    const/16 v0, 0x14

    if-eq v1, v0, :cond_5c

    .line 380119
    invoke-virtual {v5, v6, v3}, LX/3ZK;->A0V(LX/20n;Z)V

    goto/16 :goto_13

    .line 380120
    :cond_47
    xor-int/lit8 v1, v3, 0x1

    const-string v0, "web relay calls should not start fg activity"

    .line 380121
    invoke-static {v1, v0}, LX/00A;->A0A(ZLjava/lang/String;)V

    .line 380122
    invoke-virtual/range {p0 .. p0}, LX/3ZK;->A0B()V

    goto :goto_d

    .line 380123
    :cond_48
    iget-object v2, v10, Lcom/whatsapp/voipcalling/CallInfo;->self:LX/20l;

    .line 380124
    iget-boolean v2, v2, LX/20l;->A09:Z

    if-eqz v2, :cond_49

    const-string v4, "self-interrupted"

    goto/16 :goto_a

    :cond_49
    const-string v4, "unknown"

    goto/16 :goto_a

    .line 380125
    :cond_4a
    const-wide/16 v0, -0x1

    goto/16 :goto_9

    .line 380126
    :cond_4b
    if-eqz v13, :cond_42

    .line 380127
    new-instance v13, Landroid/content/Intent;

    iget-object v1, v5, LX/3ZK;->A1F:Landroid/content/Context;

    const-class v0, Lcom/whatsapp/CallRatingActivity;

    invoke-direct {v13, v1, v0}, Landroid/content/Intent;-><init>(Landroid/content/Context;Ljava/lang/Class;)V

    const/high16 v0, 0x10000000

    .line 380128
    invoke-virtual {v13, v0}, Landroid/content/Intent;->setFlags(I)Landroid/content/Intent;

    .line 380129
    iget-object v12, v5, LX/3ZK;->A0T:Lcom/whatsapp/fieldstats/events/WamCall;

    .line 380130
    new-instance v8, Landroid/os/Bundle;

    invoke-direct {v8}, Landroid/os/Bundle;-><init>()V

    .line 380131
    invoke-virtual {v12}, Ljava/lang/Object;->getClass()Ljava/lang/Class;

    move-result-object v0

    invoke-virtual {v0}, Ljava/lang/Class;->getDeclaredFields()[Ljava/lang/reflect/Field;

    move-result-object v7

    .line 380132
    array-length v4, v7

    const/4 v3, 0x0

    :goto_f
    if-ge v3, v4, :cond_52

    aget-object v1, v7, v3

    .line 380133
    invoke-virtual {v1}, Ljava/lang/reflect/Field;->getModifiers()I

    move-result v2

    .line 380134
    invoke-static {v2}, Ljava/lang/reflect/Modifier;->isPublic(I)Z

    move-result v0

    if-eqz v0, :cond_51

    invoke-static {v2}, Ljava/lang/reflect/Modifier;->isStatic(I)Z

    move-result v0

    if-nez v0, :cond_51

    .line 380135
    invoke-virtual {v1}, Ljava/lang/reflect/Field;->getName()Ljava/lang/String;

    move-result-object v2

    .line 380136
    :try_start_0
    invoke-virtual {v1, v12}, Ljava/lang/reflect/Field;->get(Ljava/lang/Object;)Ljava/lang/Object;

    move-result-object v1

    if-eqz v1, :cond_51

    .line 380137
    instance-of v0, v1, Ljava/lang/Double;

    if-eqz v0, :cond_4c

    .line 380138
    check-cast v1, Ljava/lang/Double;

    invoke-virtual {v1}, Ljava/lang/Double;->doubleValue()D

    move-result-wide v0

    invoke-virtual {v8, v2, v0, v1}, Landroid/os/Bundle;->putDouble(Ljava/lang/String;D)V

    goto :goto_10

    .line 380139
    :cond_4c
    instance-of v0, v1, Ljava/lang/Integer;

    if-eqz v0, :cond_4d

    .line 380140
    check-cast v1, Ljava/lang/Integer;

    invoke-virtual {v1}, Ljava/lang/Integer;->intValue()I

    move-result v0

    invoke-virtual {v8, v2, v0}, Landroid/os/Bundle;->putInt(Ljava/lang/String;I)V

    goto :goto_10

    .line 380141
    :cond_4d
    instance-of v0, v1, Ljava/lang/Long;

    if-eqz v0, :cond_4e

    .line 380142
    check-cast v1, Ljava/lang/Long;

    invoke-virtual {v1}, Ljava/lang/Long;->longValue()J

    move-result-wide v0

    invoke-virtual {v8, v2, v0, v1}, Landroid/os/Bundle;->putLong(Ljava/lang/String;J)V

    goto :goto_10

    .line 380143
    :cond_4e
    instance-of v0, v1, Ljava/lang/Boolean;

    if-eqz v0, :cond_4f

    .line 380144
    check-cast v1, Ljava/lang/Boolean;

    invoke-virtual {v1}, Ljava/lang/Boolean;->booleanValue()Z

    move-result v0

    invoke-virtual {v8, v2, v0}, Landroid/os/Bundle;->putBoolean(Ljava/lang/String;Z)V

    goto :goto_10

    .line 380145
    :cond_4f
    instance-of v0, v1, Ljava/lang/String;

    if-eqz v0, :cond_50

    .line 380146
    check-cast v1, Ljava/lang/String;

    invoke-virtual {v8, v2, v1}, Landroid/os/Bundle;->putString(Ljava/lang/String;Ljava/lang/String;)V

    goto :goto_10

    .line 380147
    :cond_50
    new-instance v1, Ljava/lang/StringBuilder;

    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V

    const-string v0, "unexpected member "

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v0, " in fieldstats event, only Double, Integer, and String members are supported"

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v1

    const/4 v0, 0x0

    .line 380148
    invoke-static {v0, v1}, LX/00A;->A0A(ZLjava/lang/String;)V

    .line 380149
    :cond_51
    :goto_10
    add-int/lit8 v3, v3, 0x1

    goto :goto_f
    :try_end_0
    .catch Ljava/lang/IllegalAccessException; {:try_start_0 .. :try_end_0} :catch_0

    :cond_52
    const-string v0, "event"

    .line 380150
    invoke-virtual {v13, v0, v8}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Landroid/os/Bundle;)Landroid/content/Intent;

    .line 380151
    iget-boolean v1, v5, LX/3ZK;->A1A:Z

    const-string v0, "uploadFieldStat"

    invoke-virtual {v13, v0, v1}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Z)Landroid/content/Intent;

    .line 380152
    iget-object v0, v5, LX/3ZK;->A1F:Landroid/content/Context;

    invoke-virtual {v0, v13}, Landroid/content/Context;->startActivity(Landroid/content/Intent;)V

    .line 380153
    iget-object v2, v5, LX/3ZK;->A20:LX/0Zd;

    iget-object v0, v5, LX/3ZK;->A1a:LX/00T;

    .line 380154
    invoke-virtual {v0}, LX/00T;->A01()J

    move-result-wide v0

    .line 380155
    iget-object v2, v2, LX/0Zd;->A00:Landroid/content/SharedPreferences;

    invoke-interface {v2}, Landroid/content/SharedPreferences;->edit()Landroid/content/SharedPreferences$Editor;

    move-result-object v3

    .line 380156
    const-string v2, "last_call_rating_timestamp"

    invoke-interface {v3, v2, v0, v1}, Landroid/content/SharedPreferences$Editor;->putLong(Ljava/lang/String;J)Landroid/content/SharedPreferences$Editor;

    invoke-interface {v3}, Landroid/content/SharedPreferences$Editor;->apply()V

    const/4 v0, 0x0

    goto/16 :goto_b

    .line 380157
    :cond_53
    const/4 v13, 0x0

    goto/16 :goto_8

    .line 380158
    :cond_54
    const/16 v16, 0x0

    goto/16 :goto_7

    .line 380159
    :cond_55
    iget v1, v10, Lcom/whatsapp/voipcalling/CallInfo;->callResult:I

    .line 380160
    const/16 v0, 0x14

    if-eq v1, v0, :cond_43

    const-string v0, "callFieldStat can not be null when call state changed to NONE."

    .line 380161
    invoke-static {v2, v0}, LX/00A;->A0A(ZLjava/lang/String;)V

    goto/16 :goto_c

    .line 380162
    :cond_56
    const/4 v4, -0x1

    goto/16 :goto_6

    .line 380163
    :cond_57
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->ACTIVE_ELSEWHERE:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-ne v9, v0, :cond_59

    .line 380164
    invoke-virtual {v5, v11, v10}, LX/3ZK;->A0a(Lcom/whatsapp/voipcalling/Voip$CallState;Lcom/whatsapp/voipcalling/CallInfo;)V

    if-eqz v6, :cond_58

    .line 380165
    iget-object v1, v5, LX/3ZK;->A1H:LX/0J7;

    const-string v0, "voip/notifyCallActivatedElseWhere"

    .line 380166
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 380167
    invoke-static {}, LX/00A;->A01()V

    .line 380168
    iget-object v0, v1, LX/00o;->A00:LX/00p;

    invoke-virtual {v0}, LX/00p;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_11
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v0

    if-eqz v0, :cond_5e

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v0

    check-cast v0, LX/0O8;

    .line 380169
    invoke-virtual {v0, v6}, LX/0O8;->A02(LX/20n;)V

    goto :goto_11

    .line 380170
    :cond_58
    const-string v0, "call is active elsewhere, can not find message for call id "

    .line 380171
    invoke-static {v0}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v1

    .line 380172
    iget-object v0, v10, Lcom/whatsapp/voipcalling/CallInfo;->callId:Ljava/lang/String;

    .line 380173
    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/String;)V

    goto :goto_14

    .line 380174
    :cond_59
    if-ne v11, v1, :cond_5e

    if-eqz v6, :cond_5a

    .line 380175
    iget-object v1, v5, LX/3ZK;->A1H:LX/0J7;

    const-string v0, "voip/notifyCallStarted"

    .line 380176
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 380177
    invoke-static {}, LX/00A;->A01()V

    .line 380178
    iget-object v0, v1, LX/00o;->A00:LX/00p;

    invoke-virtual {v0}, LX/00p;->iterator()Ljava/util/Iterator;

    move-result-object v1

    :goto_12
    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z

    move-result v0

    if-eqz v0, :cond_5e

    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;

    move-result-object v0

    check-cast v0, LX/0O8;

    .line 380179
    invoke-virtual {v0, v6}, LX/0O8;->A04(LX/20n;)V

    goto :goto_12

    .line 380180
    :cond_5a
    invoke-static/range {v17 .. v17}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v1

    .line 380181
    iget-object v0, v10, Lcom/whatsapp/voipcalling/CallInfo;->callId:Ljava/lang/String;

    .line 380182
    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/String;)V

    goto :goto_14

    .line 380183
    :cond_5b
    invoke-static/range {v17 .. v17}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v1

    .line 380184
    iget-object v0, v10, Lcom/whatsapp/voipcalling/CallInfo;->callId:Ljava/lang/String;

    .line 380185
    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->e(Ljava/lang/String;)V

    .line 380186
    :cond_5c
    :goto_13
    iget-object v0, v10, Lcom/whatsapp/voipcalling/CallInfo;->callWaitingInfo:LX/20k;

    .line 380187
    iget v2, v0, LX/20k;->A01:I

    const/4 v1, 0x1

    const/4 v0, 0x0

    if-ne v2, v1, :cond_5d

    const/4 v0, 0x1

    :cond_5d
    iput-boolean v0, v5, LX/3ZK;->A1B:Z

    .line 380188
    :cond_5e
    :goto_14
    sget v1, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v0, 0x1c

    if-lt v1, v0, :cond_71

    iget-object v1, v5, LX/3ZK;->A1v:LX/3ZC;

    if-eqz v1, :cond_71

    if-eqz v15, :cond_71

    .line 380189
    iget-object v0, v10, Lcom/whatsapp/voipcalling/CallInfo;->callId:Ljava/lang/String;

    .line 380190
    invoke-virtual {v1, v0}, LX/3ZC;->A05(Ljava/lang/String;)LX/3CJ;

    move-result-object v2

    if-eqz v2, :cond_71

    .line 380191
    invoke-virtual {v9}, Ljava/lang/Enum;->ordinal()I

    move-result v1

    if-eqz v1, :cond_63

    const/4 v0, 0x1

    if-eq v1, v0, :cond_62

    const/4 v0, 0x3

    if-eq v1, v0, :cond_61

    const/4 v0, 0x6

    if-eq v1, v0, :cond_60

    const/4 v0, 0x7

    if-ne v1, v0, :cond_5f

    const/16 v0, 0xb

    .line 380192
    invoke-virtual {v2, v0}, LX/3CJ;->A00(I)V

    .line 380193
    :cond_5f
    :goto_15
    iget-object v0, v5, LX/3ZK;->A1Z:LX/011;

    invoke-virtual {v0}, LX/011;->A08()Landroid/media/AudioManager;

    move-result-object v1

    const-string v0, "options.android_telecom_audio_mode_in_call"

    .line 380194
    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->A01(Ljava/lang/String;)Ljava/lang/Integer;

    move-result-object v0

    if-eqz v1, :cond_65

    if-eqz v0, :cond_65

    .line 380195
    invoke-virtual {v0}, Ljava/lang/Integer;->intValue()I

    move-result v0

    invoke-virtual {v1, v0}, Landroid/media/AudioManager;->setMode(I)V

    goto/16 :goto_18

    .line 380196
    :cond_60
    invoke-virtual {v2}, Landroid/telecom/Connection;->setActive()V

    goto :goto_15

    .line 380197
    :cond_61
    invoke-virtual {v2}, Landroid/telecom/Connection;->setRinging()V

    goto :goto_15

    .line 380198
    :cond_62
    invoke-virtual {v2}, Landroid/telecom/Connection;->setDialing()V

    goto :goto_15

    :cond_63
    const/4 v1, 0x3

    .line 380199
    iget v0, v10, Lcom/whatsapp/voipcalling/CallInfo;->callResult:I

    .line 380200
    packed-switch v0, :pswitch_data_2

    const/16 v1, 0x9

    .line 380201
    :cond_64
    :goto_16
    invoke-virtual {v2, v1}, LX/3CJ;->A00(I)V

    goto :goto_15

    .line 380202
    :pswitch_22
    const/16 v1, 0xb

    goto :goto_16

    :pswitch_23
    const/4 v1, 0x4

    goto :goto_16

    :pswitch_24
    const/4 v1, 0x1

    goto :goto_16

    .line 380203
    :pswitch_25
    iget-boolean v0, v10, Lcom/whatsapp/voipcalling/CallInfo;->isCaller:Z

    .line 380204
    const/4 v1, 0x7

    if-nez v0, :cond_64

    :pswitch_26
    const/4 v1, 0x5

    goto :goto_16

    :pswitch_27
    const/16 v1, 0x8

    goto :goto_16

    :pswitch_28
    const/4 v1, 0x6

    goto :goto_16

    .line 380205
    :pswitch_29
    iget-boolean v0, v10, Lcom/whatsapp/voipcalling/CallInfo;->isEndedByMe:Z

    .line 380206
    if-eqz v0, :cond_64

    const/4 v1, 0x2

    goto :goto_16

    .line 380207
    :cond_65
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->CALLING:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-eq v9, v0, :cond_75

    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->ACTIVE:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-eq v9, v0, :cond_75

    const/4 v0, 0x0

    .line 380208
    invoke-virtual {v2, v0}, Landroid/telecom/Connection;->setAudioModeIsVoip(Z)V

    goto/16 :goto_18

    .line 380209
    :cond_66
    const/4 v12, 0x0

    goto/16 :goto_5

    .line 380210
    :cond_67
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->NONE:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-eq v9, v0, :cond_3d

    .line 380211
    iget-object v0, v5, LX/3ZK;->A1y:LX/3Co;

    invoke-virtual {v0, v10}, LX/3Co;->A02(Lcom/whatsapp/voipcalling/CallInfo;)V

    goto/16 :goto_4

    .line 380212
    :cond_68
    iput-wide v0, v5, LX/3ZK;->A0D:J

    .line 380213
    iget-boolean v0, v5, LX/3ZK;->A0w:Z

    if-nez v0, :cond_69

    const-wide/16 v6, 0x0

    :cond_69
    invoke-virtual {v5, v6, v7}, LX/3ZK;->A0K(J)V

    goto/16 :goto_3

    .line 380214
    :cond_6a
    iput-boolean v2, v5, LX/3ZK;->A1B:Z

    .line 380215
    iget-object v1, v10, Lcom/whatsapp/voipcalling/CallInfo;->peerJid:Lcom/whatsapp/jid/UserJid;

    .line 380216
    iget-object v0, v10, Lcom/whatsapp/voipcalling/CallInfo;->callId:Ljava/lang/String;

    .line 380217
    invoke-virtual {v5, v2, v1, v0}, LX/3ZK;->A0j(ZLcom/whatsapp/jid/UserJid;Ljava/lang/String;)V

    .line 380218
    invoke-virtual {v5, v10, v3, v2, v2}, LX/3ZK;->A0T(Lcom/whatsapp/voipcalling/CallInfo;IZZ)V

    .line 380219
    iget-object v0, v5, LX/3ZK;->A1y:LX/3Co;

    invoke-virtual {v0, v10}, LX/3Co;->A01(Lcom/whatsapp/voipcalling/CallInfo;)V

    goto/16 :goto_3

    .line 380220
    :cond_6b
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->PRE_ACCEPT_RECEIVED:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-ne v9, v0, :cond_6c

    iget-boolean v0, v5, LX/3ZK;->A13:Z

    if-nez v0, :cond_6c

    .line 380221
    invoke-virtual {v5, v10, v3, v2, v2}, LX/3ZK;->A0T(Lcom/whatsapp/voipcalling/CallInfo;IZZ)V

    goto/16 :goto_3

    .line 380222
    :cond_6c
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->NONE:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-ne v9, v0, :cond_6d

    .line 380223
    iget-object v0, v5, LX/3ZK;->A0L:Landroid/os/Handler;

    invoke-virtual {v0, v4}, Landroid/os/Handler;->removeMessages(I)V

    goto/16 :goto_3

    .line 380224
    :cond_6d
    sget-object v0, Lcom/whatsapp/voipcalling/Voip$CallState;->ACTIVE:Lcom/whatsapp/voipcalling/Voip$CallState;

    if-ne v9, v0, :cond_3b

    .line 380225
    sget v1, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v0, 0x10

    if-lt v1, v0, :cond_6e

    .line 380226
    new-instance v1, LX/0dq;

    const-string v0, "refresh_notification"

    .line 380227
    invoke-direct {v1, v0, v8, v8}, LX/0dq;-><init>(Ljava/lang/String;Landroid/os/Bundle;Landroid/os/Message;)V

    .line 380228
    invoke-static {v1}, LX/0dr;->A01(LX/0dq;)V

    .line 380229
    :cond_6e
    iget v1, v5, LX/3ZK;->A09:I

    const/16 v0, -0x80

    if-lt v1, v0, :cond_6f

    const/16 v0, 0x100

    if-gt v1, v0, :cond_6f

    if-eqz v1, :cond_6f

    const-string v0, "voip/voipAudioLevelBase "

    .line 380230
    invoke-static {v0}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v0

    invoke-static {v0, v1}, LX/007;->A0x(Ljava/lang/StringBuilder;I)V

    .line 380231
    iget-short v1, v5, LX/3ZK;->A0t:S

    iget v0, v5, LX/3ZK;->A09:I

    add-int/2addr v1, v0

    int-to-short v0, v1

    .line 380232
    iput-short v0, v5, LX/3ZK;->A0t:S

    invoke-static {v0}, Lcom/whatsapp/voipcalling/Voip;->adjustAudioLevel(I)V

    :cond_6f
    if-eqz v15, :cond_3b

    .line 380233
    sget v0, Landroid/os/Build$VERSION;->SDK_INT:I

    if-lt v0, v7, :cond_3b

    iget-object v1, v5, LX/3ZK;->A1v:LX/3ZC;

    if-eqz v1, :cond_3b

    .line 380234
    iget-object v0, v10, Lcom/whatsapp/voipcalling/CallInfo;->callId:Ljava/lang/String;

    .line 380235
    invoke-virtual {v1, v0}, LX/3ZC;->A05(Ljava/lang/String;)LX/3CJ;

    move-result-object v1

    if-eqz v1, :cond_3b

    .line 380236
    invoke-virtual {v1}, Landroid/telecom/Connection;->getConnectionCapabilities()I

    move-result v0

    or-int/2addr v0, v4

    .line 380237
    invoke-virtual {v1, v0}, Landroid/telecom/Connection;->setConnectionCapabilities(I)V

    goto/16 :goto_3

    .line 380238
    :cond_70
    iput-wide v0, v5, LX/3ZK;->A0D:J

    .line 380239
    iget-object v0, v5, LX/3ZK;->A0R:Landroid/telephony/TelephonyManager;

    if-nez v0, :cond_72

    const/4 v0, 0x0

    .line 380240
    :goto_17
    if-eqz v0, :cond_73

    .line 380241
    iget-object v1, v10, Lcom/whatsapp/voipcalling/CallInfo;->callId:Ljava/lang/String;

    .line 380242
    const-string v0, "busy"

    .line 380243
    invoke-virtual {v5, v1, v0, v14}, LX/3ZK;->A0g(Ljava/lang/String;Ljava/lang/String;I)V

    .line 380244
    :cond_71
    :goto_18
    const/4 v0, 0x1

    return v0

    .line 380245
    :cond_72
    invoke-virtual {v0}, Landroid/telephony/TelephonyManager;->getCallState()I

    move-result v0

    goto :goto_17

    .line 380246
    :cond_73
    iget-boolean v0, v5, LX/3ZK;->A0w:Z

    if-nez v0, :cond_74

    const-wide/16 v6, 0x0

    :cond_74
    invoke-virtual {v5, v6, v7}, LX/3ZK;->A0K(J)V

    .line 380247
    invoke-virtual {v5, v10, v3, v2, v2}, LX/3ZK;->A0T(Lcom/whatsapp/voipcalling/CallInfo;IZZ)V

    goto/16 :goto_3

    .line 380248
    :catch_0
    move-exception v1

    .line 380249
    new-instance v0, Ljava/lang/IllegalArgumentException;

    invoke-direct {v0, v1}, Ljava/lang/IllegalArgumentException;-><init>(Ljava/lang/Throwable;)V

    throw v0

    .line 380250
    :cond_75
    const/4 v0, 0x1

    .line 380251
    invoke-virtual {v2, v0}, Landroid/telecom/Connection;->setAudioModeIsVoip(Z)V

    return v0

    .line 380252
    :pswitch_2a
    iget-object v0, v5, LX/3ZK;->A1r:LX/3Br;

    invoke-virtual {v0}, LX/3Br;->A00()D

    move-result-wide v0

    iput-wide v0, v5, LX/3ZK;->A01:D

    return v4

    .line 380253
    :pswitch_2b
    iget-wide v6, v5, LX/3ZK;->A0D:J

    cmp-long v2, v6, v0

    if-lez v2, :cond_76

    .line 380254
    invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J

    move-result-wide v0

    sub-long/2addr v0, v6

    invoke-static {v0, v1}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object v0

    iput-object v0, v5, LX/3ZK;->A0k:Ljava/lang/Long;

    .line 380255
    :cond_76
    invoke-static {}, Lcom/whatsapp/voipcalling/Voip;->getCallInfo()Lcom/whatsapp/voipcalling/CallInfo;

    move-result-object v0

    invoke-virtual {v5, v0}, LX/3ZK;->A0S(Lcom/whatsapp/voipcalling/CallInfo;)V

    return v4

    nop

    :array_0
    .array-data 8
        0x0
        0x32
        0x64
        0x32
        0x3e8
    .end array-data

    :pswitch_data_0
    .packed-switch 0x1
        :pswitch_2b
        :pswitch_0
        :pswitch_2a
        :pswitch_21
        :pswitch_20
        :pswitch_1f
        :pswitch_1e
        :pswitch_1d
        :pswitch_1c
        :pswitch_1b
        :pswitch_1a
        :pswitch_1a
        :pswitch_19
        :pswitch_18
        :pswitch_17
        :pswitch_16
        :pswitch_15
        :pswitch_14
        :pswitch_13
        :pswitch_12
        :pswitch_12
        :pswitch_12
        :pswitch_11
        :pswitch_10
        :pswitch_f
        :pswitch_e
        :pswitch_d
        :pswitch_c
        :pswitch_b
        :pswitch_a
        :pswitch_9
        :pswitch_8
        :pswitch_7
        :pswitch_2
        :pswitch_1
    .end packed-switch

    :pswitch_data_1
    .packed-switch 0x0
        :pswitch_3
        :pswitch_6
        :pswitch_3
        :pswitch_4
        :pswitch_5
        :pswitch_3
        :pswitch_3
        :pswitch_3
        :pswitch_3
    .end packed-switch

    :pswitch_data_2
    .packed-switch 0x1
        :pswitch_29
        :pswitch_28
        :pswitch_27
        :pswitch_26
        :pswitch_25
        :pswitch_24
        :pswitch_27
        :pswitch_26
        :pswitch_26
        :pswitch_24
        :pswitch_27
        :pswitch_27
        :pswitch_27
        :pswitch_24
        :pswitch_27
        :pswitch_27
        :pswitch_27
        :pswitch_23
        :pswitch_24
        :pswitch_22
    .end packed-switch
.end method

.method public final A0n(LX/052;)Z
    .locals 3

    const/4 v2, 0x1

    if-eqz p1, :cond_0

    .line 380256
    iget-object v0, p1, LX/052;->A08:LX/0NF;

    if-nez v0, :cond_0

    iget-object v1, p0, LX/3ZK;->A1i:LX/0B8;

    const-class v0, LX/01W;

    .line 380257
    invoke-virtual {p1, v0}, LX/052;->A03(Ljava/lang/Class;)Lcom/whatsapp/jid/Jid;

    move-result-object v0

    invoke-static {v0}, LX/00A;->A05(Ljava/lang/Object;)V

    check-cast v0, LX/01W;

    invoke-virtual {v1, v0}, LX/0B8;->A01(LX/01W;)I

    move-result v0

    if-eq v0, v2, :cond_0

    return v2

    :cond_0
    const/4 v2, 0x0

    return v2
.end method

.method public final A0o(Lcom/whatsapp/jid/DeviceJid;Ljava/lang/String;[BI)Z
    .locals 11

    const-string v3, "voip/receive_message/onPeerE2EDecryptionFailed session retry threw: "

    const/4 v4, 0x0

    move v10, p4

    if-ltz p4, :cond_1

    const/4 v1, 0x4

    if-gt p4, v1, :cond_1

    .line 380258
    if-eqz p3, :cond_0

    .line 380259
    array-length v0, p3

    if-ne v0, v1, :cond_0

    .line 380260
    invoke-static {p3}, LX/02V;->A0C([B)I

    move-result v9

    const-string v2, "voip/receive_message/onPeerE2EDecryptionFailed peer e2e decryption failure; remoteRegistrationId="

    const-string v1, " retryCount: "

    const-string v0, " from: "

    .line 380261
    invoke-static {v2, v9, v1, p4, v0}, LX/007;->A0M(Ljava/lang/String;ILjava/lang/String;ILjava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v0

    move-object v7, p1

    invoke-virtual {v0, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 380262
    :try_start_0
    new-instance v5, LX/3B0;

    move-object v6, p0

    move-object v8, p2

    invoke-direct/range {v5 .. v10}, LX/3B0;-><init>(LX/3ZK;Lcom/whatsapp/jid/DeviceJid;Ljava/lang/String;II)V

    .line 380263
    sget-object v0, LX/08J;->A02:Ljava/util/concurrent/ThreadPoolExecutor;

    invoke-virtual {v0, v5}, Ljava/util/concurrent/ThreadPoolExecutor;->submit(Ljava/util/concurrent/Callable;)Ljava/util/concurrent/Future;

    move-result-object v0

    .line 380264
    invoke-interface {v0}, Ljava/util/concurrent/Future;->get()Ljava/lang/Object;

    move-result-object v0

    check-cast v0, Ljava/lang/Boolean;

    invoke-virtual {v0}, Ljava/lang/Boolean;->booleanValue()Z

    move-result v0

    return v0
    :try_end_0
    .catch Ljava/lang/InterruptedException; {:try_start_0 .. :try_end_0} :catch_1
    .catch Ljava/util/concurrent/ExecutionException; {:try_start_0 .. :try_end_0} :catch_0

    :catch_0
    move-exception v0

    .line 380265
    invoke-static {v3, v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;Ljava/lang/Throwable;)V

    .line 380266
    sget-object v1, LX/3Ce;->A0C:LX/3Ce;

    const/4 v0, 0x0

    invoke-static {v1, v0}, LX/3ZK;->A01(LX/3Ce;Ljava/lang/String;)V

    .line 380267
    return v4

    :catch_1
    move-exception v0

    .line 380268
    invoke-static {v3, v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;Ljava/lang/Throwable;)V

    .line 380269
    sget-object v1, LX/3Ce;->A0C:LX/3Ce;

    const/4 v0, 0x0

    invoke-static {v1, v0}, LX/3ZK;->A01(LX/3Ce;Ljava/lang/String;)V

    .line 380270
    return v4

    :cond_0
    const-string v0, "voip/receive_message/onPeerE2EDecryptionFailed e2e decryption failure; invalid remote remoteRegBytes id; remoteRegistrationId="

    .line 380271
    invoke-static {v0}, LX/007;->A0K(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v1

    .line 380272
    invoke-static {p3}, Ljava/util/Arrays;->toString([B)Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    .line 380273
    invoke-static {v0}, Lcom/whatsapp/util/Log;->i(Ljava/lang/String;)V

    .line 380274
    sget-object v1, LX/3Ce;->A0C:LX/3Ce;

    const/4 v0, 0x0

    invoke-static {v1, v0}, LX/3ZK;->A01(LX/3Ce;Ljava/lang/String;)V

    .line 380275
    return v4

    :cond_1
    const-string v0, "voip/receive_message/onPeerE2EDecryptionFailed do nothing retry count: "

    .line 380276
    invoke-static {v0, p4}, LX/007;->A0e(Ljava/lang/String;I)V

    return v4
.end method

.method public final A0p(Lcom/whatsapp/jid/UserJid;ZLjava/lang/String;)Z
    .locals 4

    .line 380277
    iget-object v0, p0, LX/3ZK;->A1h:LX/04y;

    invoke-virtual {v0, p1}, LX/04y;->A0B(LX/01W;)LX/052;

    move-result-object v3

    .line 380278
    sget v1, Landroid/os/Build$VERSION;->SDK_INT:I

    const/16 v0, 0x1c

    if-lt v1, v0, :cond_0

    iget-object v2, p0, LX/3ZK;->A1v:LX/3ZC;

    if-eqz v2, :cond_0

    iget-object v1, p0, LX/3ZK;->A1F:Landroid/content/Context;

    iget-object v0, p0, LX/3ZK;->A1P:LX/01A;

    .line 380279
    iget-object v0, v0, LX/01A;->A03:Lcom/whatsapp/jid/UserJid;

    .line 380280
    invoke-static {v0}, LX/00A;->A05(Ljava/lang/Object;)V

    .line 380281
    invoke-virtual {v2, v1, v0}, LX/3ZC;->A0C(Landroid/content/Context;Lcom/whatsapp/jid/UserJid;)Z

    move-result v0

    if-eqz v0, :cond_0

    iget-object v1, p0, LX/3ZK;->A1v:LX/3ZC;

    iget-object v0, p0, LX/3ZK;->A1X:LX/04z;

    .line 380282
    invoke-virtual {v0, v3}, LX/04z;->A04(LX/052;)Ljava/lang/String;

    move-result-object v0

    .line 380283
    invoke-virtual {v1, p3, p1, v0, p2}, LX/3ZC;->A0D(Ljava/lang/String;Lcom/whatsapp/jid/UserJid;Ljava/lang/String;Z)Z

    move-result v1

    const/4 v0, 0x1

    if-nez v1, :cond_1

    :cond_0
    const/4 v0, 0x0

    :cond_1
    return v0
.end method
